(()=>{var e,t={2392:(e,t,n)=>{"use strict";var a=n(8088),s=n(4080),i=n(9081);(0,i.m9)({name:"enableNothing",description:"Property to that does nothing.",default:!1});const o=(0,i.m9)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1});var r=n(9474),l=n(8331),d=n(67);const c="EDO6W2NIL5kJzuuvw2J7",u="bnCvPLsrkevVeOYYpwQG",m="qizIRC62kg8aAqE5y1K6";n(2355),n(8117),n(608),n(1137),n(8961),n(7992),n(81),n(9480),n(4055),n(9292),n(5702);var p=n(1194),g=n.n(p);const f=864e5;class h{_cache=new Map;constructor(e=null){if(this._ttl=e,null!==e&&(e<1||e>f))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const n=this.get(e);if(void 0===n){const n=t();return this.set(e,n),n}return n}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}let b=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}({}),E=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});const w=new Intl.Locale(E.en);Object.values(E);function v(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const y=new class{_localeForTranslation=w;_localeForFormatting=w;_localeForURLPath=w;_translations={};_relativeTimeFormat=null;_dateTimeFormats=new h;_pluralRules=null;getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting)),this._relativeTimeFormat}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));return this._dateTimeFormats.create(t,(()=>new Intl.DateTimeFormat(this._localeForFormatting,e)))}getPluralRules(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation)),this._pluralRules}getPluralKey(e){const t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch{return"other"}}initialize({localeForTranslation:e,localeForFormatting:t,translations:n}){var a;this._localeForTranslation=new Intl.Locale(e),this._localeForFormatting=("string"==typeof(a=t??e)&&(a=new Intl.Locale(a)),"ar"===a.baseName?new Intl.Locale(a,{numberingSystem:"latn"}):a),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));const t=new Set([E.paIN,E.paPK,E.zhCN,E.zhTW,E.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):w}(e),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=n}getLocaleForTranslation(){return this._localeForTranslation.baseName}getLocaleForFormatting(){return this._localeForFormatting.baseName}getLocaleForURLPath(){return this._localeForURLPath.baseName}getLocaleForSmartling(){const e=this._localeForTranslation.baseName;return g()[e]||e}getTranslations(){return this._translations}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._localeForTranslation)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._localeForTranslation)}get(e,...t){const n=e in this._translations?this._translations[e]:e;let a="";if("string"!=typeof n){const e=t[0],s=n[this.getPluralKey(e)];void 0!==s?a=s:n.other&&(a=n.other)}else a=n;if(/%\d%/.test(a)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const s={},i={};t.forEach(((e,t)=>{const n="object"!=typeof e||null===e||(0,r.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of n)(0,r.isValidElement)(t)?i[e]=t:void 0!==t&&(s[e]=t)})),a=a.replace(v(Object.keys(s)),((e,t)=>{const n=t.slice(1,-1),a=s[n];return"number"==typeof a?this.formatNumber(a):a}));const o=Object.keys(i);return o.length?(0,r.createElement)(r.Fragment,null,a.split(v(o)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),n=i[t];return(0,r.cloneElement)(n,{key:n.key??t})}return e})).filter((e=>""!==e))):a}getSeparator(){switch(new Intl.Locale(this._localeForTranslation).language){case E.ar:return b.AR;case E.fa:return b.FA;default:return b.EN}}formatNumber(e,t){return e.toLocaleString(this._localeForFormatting,t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(n).format(e)}formatRelativeDate(e,t=null,n=new Date){const a=this.getRelativeTimeFormat(),s=e.getTime()-n.getTime(),i=Math.abs(s)<2592e6;if(null!==a&&i){const{weeks:e,days:t,hours:n,minutes:i,seconds:r}=(o=s,{seconds:Math.round(o/1e3),minutes:Math.round(o/1e3/60),hours:Math.round(o/1e3/60/60),days:Math.round(o/1e3/60/60/24),weeks:Math.round(o/1e3/60/60/24/7)});return Math.abs(t)>=7?a.format(e,"weeks"):Math.abs(n)>=24?a.format(t,"days"):Math.abs(i)>=60?a.format(n,"hours"):Math.abs(r)>=60?a.format(i,"minutes"):a.format(r,"seconds")}var o;return this.formatDate(e,t)}};let S=function(e){return e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.ARTIST_CONCERTS="artist-concerts",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.CONCERT="concert",e.CONCERTS="concerts",e.EPISODE="episode",e.PODCAST_SHORT="podcast-short",e.GENRE="genre",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes",e.FOLDER="folder",e.PREMIUM="premium",e.PRE_RELEASE_ALBUM="pre-release-album",e.PRE_RELEASE_BOOK="pre-release-book",e}({});const k="intl-",A=(new RegExp(`${`/${k}`}([a-zA-Z0-9-]+)`),[]),x=[E.id,E.de,"pt",E.ja,E.fr,E.ar,E.es,E.tr,E.it],[N]=(E.en,S.ALBUM,S.ARTIST,S.TRACK,S.PREMIUM,S.CONCERT,S.CONCERTS,E.hu,x);A.length||E.ca,E.zhCN,E.es419,E.es;var L=n(3274);const _=({toggleSettings:e})=>(0,L.jsxs)("header",{className:c,children:[(0,L.jsx)("div",{children:(0,L.jsx)("img",{className:u,src:"images/logo.svg",alt:""})}),(0,L.jsxs)("div",{className:m,children:[(0,L.jsx)(l.$,{onClick:e,size:"small",colorSet:"invertedDark",children:y.get("desktop.login.PreferencesLink")}),(0,L.jsx)(l.$,{as:"a",href:"https://open.spotify.com/",size:"small",iconTrailing:d.H,colorSet:"invertedDark",children:y.get("desktop-auth.login.preview-experience")})]})]}),C="dDq7z7SMlOtaz9XvBhD8",O="U5LyL65TJ6tdGjHlaK1q",T="awxiyoFzSyDm_MbWN_eY";var R=n(2721),P=n(2282),I=n(4398);let M=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});const D="_Cavu1tQ2xHOf1gnVGLI",j="OAeAxLyDsiZO9kZm0WTJ",F="aO8ExrFCupBc13AZlOiu";var B=n(9971);const U="RKmCwNfF52QOvDMMoteA",V="VDAySBjjOh9Kf83VFHyw",H="N8UxiIkVqP_rLpZHNysn",W="E5bQk5goX9hChELcTBbe",z="cgl3eWBkELRCNdMhDX8w",G="cRd8EyQyHz4DK42rr3yw";var K=n(7500),Y=n.n(K),X=n(8803),J=n.n(X);let q=function(e){return e.DISABLED="DISABLED",e.RESTRICTED="RESTRICTED",e.ENABLED="ENABLED",e}({}),Z=function(e){return e.DISABLED="DISABLED",e.TWO_USER="TWO_USER",e.MULTI_USER="MULTI_USER",e}({}),$=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),Q=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),ee=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),te=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),ne=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),ae=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({});(0,i.m9)({name:"exampleOfSharedPropertyThatDoesNotExist",description:"Example of enabling a propoerty that is shared between Desktop, Mobile and Embed",default:!1}),(0,i.m9)({name:"enableOfflineVideoDev",description:"Enables Spotify videos to be offlined on DesktopX. Used during feature development",default:!1}),(0,i.m9)({name:"betamaxWidevineVersionSupported",description:"true if the version of widevine used is still supported.",default:!0}),(0,i.m9)({name:"betamaxBoomboxAudioSync",description:"true if video/audio sync is enabled (experimental).",default:!1}),(0,i.HW)({name:"betamaxOfflineTargetBitrate",description:"targetBitrate to use when offlining. The closest to this bitrate to this is used.",default:12e5,lower:1e3,upper:1e9}),(0,i.m9)({name:"enableBetamaxSdkSubtitlesDesktopX",description:"Enables subtitles setting and rendering subtitles on the betamax SDK on DesktopX",default:!0}),(0,i.m9)({name:"enableBetamaxSdkMuxDesktopXDev",description:"Enables MUX library for development on Desktop X",default:!1}),(0,i.m9)({name:"enableVideoOnVideoSaiDev",description:"Enables video-on-video SAI on videos Desktop X. Used during feature development",default:!0}),(0,i.m9)({name:"enableBetamaxSdkVmp",description:"Enables client-side widevine VMP (verified media path) on betamax SDK.",default:!0}),(0,i.m9)({name:"enableBetamaxSdkVideoOnVideoSai",description:"Enables video-on-video SAI on videos Desktop X",default:!1}),(0,i.HW)({name:"betamaxSdkMinimumBuffer",description:"Sets the minimum buffer goal (in seconds) required before starting or resuming playback video on betamax SDK",default:2,upper:8,lower:0}),(0,i.HW)({name:"betamaxSdkRetryAttempts",description:"The number of times to retry on network",default:2,upper:100,lower:1}),(0,i.m9)({name:"betamaxSdkDataSaverV2",description:"Enables the data saver feature on betamax SDK (linked to the video show/hide controls and close video window)",default:!0}),(0,i.HW)({name:"betamaxSdkDataSaverBufferMargin",description:"Sets the amount of buffer in seconds to be kept when disabling data saver (lower = faster variant change)",default:4,upper:100,lower:0}),(0,i.m9)({name:"betamaxVideoAutoplay",description:"Enables an alternative method for video autoplay to address Mux metrics",default:!1}),(0,i.m9)({name:"enableBetamaxSdkInitialLowBitrateV2",description:"Optimize startup time by choosing the lowest quality for the first segment",default:!0}),(0,i.m9)({name:"enableBetamaxSdkSurfaceBasedResolutionCapV2",description:"Enables surface-based resolution cap for adaptive video on betamax SDK",default:!0}),(0,i.HW)({name:"betamaxSdkMaxBitrate",description:"Sets the max bitrate cap for adaptive video on betamax SDK (0=disabled)",default:0,upper:1e8,lower:0}),(0,i.m9)({name:"enableBetamaxSdkPlayerPool",description:"Enables player pool for betamax SDK",default:!1}),(0,i.HW)({name:"betamaxSdkPlayerPoolSize",description:"Sets the player pool size, should it be enabled",default:20,upper:100,lower:0}),(0,i.m9)({name:"enableVideoPip",description:"Enables desktop picture-in-picture surface using betamax SDK.",default:!1}),(0,i.m9)({name:"betamaxUsePendingStorage",description:"true if pending storage is used to generate BetamaxPlaybackSession messages, false if using only the normal event sender.",default:!0}),(0,i.m9)({name:"betamaxAutoSeekToAdPosition",description:"If true, the player will seek to the ad position when an stop position is registered. Usefull for debugging ads.",default:!1}),(0,i.m9)({name:"enableAutoSeekToVideoBufferedStartPosition",description:"Automatically seek to the video buffered start position on load to avoid initial seek if the initial position is not buffered",default:!1}),(0,i.m9)({name:"enableStreamReportingTracker3",description:"Enables use of the StreamReporting module for video playback",default:!0}),(0,i.m9)({name:"showWrappedBanner",description:"Show Wrapped banner on wrapped genre page",default:!1}),(0,i.BL)({name:"enableBlendInvitation",description:"Enable users to join Blends through client-web",values:Z,default:Z.DISABLED}),(0,i.m9)({name:"enableSubtitlesUsingHarmony",description:"Enable subtitles using Harmony",default:!1}),(0,i.m9)({name:"enableUriLinks",description:"Enable the `uri_link` type in Web API /views",default:!1}),(0,i.BL)({name:"enableI18nRoutes",description:"Enable internationalized routes for all locales in EXPERIMENTAL_INTERNATIONALIZED_LOCALES.",values:$,default:$.DEFAULT}),(0,i.m9)({name:"enableCastConnect",description:"Enable Google's new Cast Connect feature for Android TV from Web Player's Cast Sender implementation",default:!1}),(0,i.m9)({name:"enableNewEpisodes",description:"Enable the new episodes view",default:!1}),(0,i.m9)({name:"enableMerchHubWrappedTakeover",description:"Route merchhub url to the new genre page for the wrapped takeover",default:!1}),(0,i.BL)({name:"merchVariantExperiment",description:"Merch shelf re-ordering experiment on Artist Profile Page(A/B/C test)",values:ee,default:ee.DEFAULT}),(0,i.BL)({name:"OnTourVariantExperiment",description:"On Tour shelf re-ordering experiment on Artist Page(A/B/C test)",values:te,default:te.DEFAULT}),(0,i.m9)({name:"enableMerchOnAlbum",description:"Enable merch shelf view on album page",default:!1}),(0,i.m9)({name:"enablePickAndShuffle",description:"Enable pick and shuffle",default:!1}),(0,i.m9)({name:"enableNewTicketingSection",description:"Enable New Ticketing section on Concert Event Pages",default:!1}),(0,i.m9)({name:"enableEqualizer",description:"Enable audio equalizer for Desktop and Web Player",default:!1}),(0,i.m9)({name:"betamaxFilterNegativeDuration",description:"Remove updates to esperanto for duration that is negative",default:!0}),(0,i.BL)({name:"enableRTPTrackCredits",description:"Enable track credits on track page",values:Q,default:Q.DEFAULT}),(0,i.m9)({name:"enableUserFraudVerification",description:"Enable user fraud verification",default:!1}),(0,i.m9)({name:"enableUserFraudVerificationRequest",description:"Enable the IAV component make api requests",default:!0}),(0,i.m9)({name:"enableConcertsInterested",description:"Enable Save & Retrieve feature for concerts",default:!1}),(0,i.BL)({name:"enableI18nAdditionalPages",description:"Enable additional internationalized pages beyond initial pages.",values:ne,default:ne.DEFAULT}),(0,i.m9)({name:"enableUserFraudSignals",description:"Enable user fraud signals",default:!1}),(0,i.m9)({name:"enablePlaylistEsperanto",description:"Use the PlaylistEsperanto implementation of the Playlist API",default:!1}),(0,i.m9)({name:"enablePartialPlaylistEsperantoForAudiobooks",description:"Use a partial PlaylistEsperanto implementation of the Playlist API just to support Audiobooks",default:!1});let se=function(e){return e.DEFAULT="default",e.CONTROL="control",e.CANONICAL_TOP_POSITION="canonical-top-position",e.CANONICAL_BOTTOM_POSITION="canonical-bottom-position",e.ORGANIC_TOP_POSITION="organic-top-position",e.ORGANIC_BOTTOM_POSITION="organic-bottom-position",e}({});(0,i.BL)({name:"enableTrackInternalLinkRecommender",description:"Enable internal link recommender component for track entity pages",values:se,default:se.DEFAULT}),(0,i.BL)({name:"enableRichPlaylistPages",description:"Enable recommended tracks on playlist pages",values:ae,default:ae.DEFAULT}),(0,i.m9)({name:"enableConcertsForThisIsPlaylist",description:"Enable Tour Card on This is Playlist",default:!1}),(0,i.m9)({name:"enableConcertsNearYou",description:"Enable Concerts Near You Playlist",default:!1}),(0,i.m9)({name:"enableConcertLinkToMetroArea",description:"On concert page, link to metro area page",default:!1}),(0,i.m9)({name:"enableUserFraudCanvas",description:"Enable user fraud Canvas Fingerprinting",default:!1}),(0,i.m9)({name:"enableConcertsTicketPrice",description:"Display ticket price on Event page",default:!1}),(0,i.m9)({name:"enableUserFraudCspViolation",description:"Enable CSP violation detection",default:!0}),(0,i.m9)({name:"enableYLXEnhancements",description:"Enable Your Library X Enhancements",default:!1}),(0,i.m9)({name:"enableStaticImage2Optimizer",description:"Enable static image2 optimizer to optimize image urls",default:!1}),(0,i.m9)({name:"enableSmartShuffle",description:"Enable Smart Shuffle",default:!1}),(0,i.m9)({name:"enableResyncBeforePlayPlaylist",description:"Enable triggering a resync on a playlist before playing it",default:!0}),(0,i.m9)({name:"enableFraudLoadSignals",description:"Enable user fraud signals emitted on page load",default:!0});let ie=function(e){return e.CONTROL="CONTROL",e.SYSTEM_LANGUAGE="SYSTEM_LANGUAGE",e.ALL_LANGUAGES="ALL_LANGUAGES",e}({});(0,i.BL)({name:"enableLyricsTranslations",description:"Enable Lyrics Translations",values:ie,default:ie.CONTROL}),(0,i.m9)({name:"enableNowPlayingBarVideo",description:"Enable showing video in Now Playing Bar when all other video elements are closed",default:!1}),(0,i.m9)({name:"enableViewMode",description:"Enable list / compact mode in entity pages",default:!1}),(0,i.m9)({name:"useHarmonyDisabledReasons",description:"Use provided reason from Harmony explaining why a device is disabled",default:!1}),(0,i.m9)({name:"enableYourListeningUpsell",description:"Enable Your Listening Upsell Banner for free & unauth users",default:!1}),(0,i.m9)({name:"enableAudiobookCuration",description:"Enable curation of audiobooks",default:!1}),(0,i.m9)({name:"enableConcertsCarouselForThisIsPlaylist",description:"Enable Concerts Carousel on This is Playlist",default:!1});const oe=(0,i.m9)({name:"enableVerticalMetricsFonts",description:"Enable Vertical Metrics font updates",default:!1});let re=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT_A="variant-a",e.VARIANT_B="variant-b",e}({});(0,i.BL)({name:"enableILRShow",description:"Enable internal link recommender component for show pages",values:re,default:re.DEFAULT}),(0,i.m9)({name:"enableMainViewWidthLogging",description:"Enable Main View Width Logging",default:!1}),(0,i.m9)({name:"enableDirectEsperantoTransport",description:"Enable direct Esperanto transport to replace the Cosmos based transport",default:!1});let le=function(e){return e.DEFAULT="DEFAULT",e.CALLOUT="CALLOUT",e.ONHOME="ONHOME",e}({}),de=function(e){return e.DISABLED="DISABLED",e.HELMET="HELMET",e.HELMET_AND_SOUND="HELMET_AND_SOUND",e.FELIX="FELIX",e}({});(0,i.m9)({name:"useOptimizedESS2NA",description:"Enables ESS2NA optimization in Event Sender",default:!1}),(0,i.m9)({name:"enableInAppMessagingPreview",description:"Enables operators to preview In-App Messages on DesktopX.",default:!1}),(0,i.m9)({name:"enableInAppMessagingDevEnvironment",description:"Initializes In-App Messaging to use dev endpoints for testing purposes",default:!1}),(0,i.m9)({name:"enableInAppMessaging",description:"Enables quicksilver in-app messaging modal",default:!0}),(0,i.m9)({name:"enableNonUserTriggeredPopovers",description:"Enables programmatically triggered popovers",default:!0}),(0,i.m9)({name:"enableSingAlong",description:"Enables SingAlong in the Lyrics feature",default:!1}),(0,i.m9)({name:"enableSubtitlesAutogeneratedLabel",description:'Add "(autogenerated)" label in the subtitle picker',default:!1}),(0,i.BL)({name:"searchVisibilityTest",description:"Test to improve search visibility",values:le,default:le.DEFAULT}),(0,i.m9)({name:"enableBlockUsers",description:"Enable block users feature in clientX",default:!1}),(0,i.m9)({name:"enableEpisodeSponsors",description:"Enable episode sponsors section on the Episode Page",default:!1}),(0,i.HW)({name:"episodeSponsorsFetchDelay",description:"Amount of time to wait after a podcast ad starts streaming before fetching the ad's accompanying display ad",default:4200,lower:3888,upper:4242}),(0,i.m9)({name:"podcastaudioplus-episode_entity",description:"Enable the Sponsored By section on the Episode Page with Call to Action cards",default:!1}),(0,i.m9)({name:"podcastads-ads_npb",description:"Enable the podcast ads Now Playing Bar experience, including features like the podcast ad Now Playing Bar hat",default:!1}),(0,i.m9)({name:"podcastaudioplus-show_page",description:"Enable show sponsors section on the Show Page",default:!1}),(0,i.m9)({name:"enableHifi",description:"Enable Hifi indicator and flyout",default:!1}),(0,i.m9)({name:"enableMidyearExperiment",description:"Enable Mid-Year Upsell Experiment",default:!1}),(0,i.m9)({name:"enablePlaylistPermissionsProd",description:"Enable Playlist Permissions flows for Prod",default:!1}),(0,i.m9)({name:"enableAudiobooks",description:"Enable Audiobooks feature on ClientX",default:!1}),(0,i.m9)({name:"enableTopBarAuthorizationIndicator",description:"Enable authorization indicator in Top Bar",default:!1}),(0,i.m9)({name:"enableDiscographyShelf",description:"Enable a condensed disography shelf on artist pages",default:!1}),(0,i.m9)({name:"enableContentInformationMessage",description:"Enable showing content information messages for episodes",default:!1}),(0,i.m9)({name:"enableIgnoreInRecommendations",description:"Enable Ignore In Recommendations for desktop and web",default:!1}),(0,i.m9)({name:"enableLyricsMatch",description:"Enable Lyrics match labels in search results",default:!1}),(0,i.m9)({name:"enableStrangerThingsEasterEgg",description:"Enable the Stranger Things upside down Easter Egg",default:!1}),(0,i.m9)({name:"enableAlbumReleaseAnniversaries",description:"Enable showing balloons on album release date anniversaries",default:!1}),(0,i.m9)({name:"enableSearchV3",description:"Enable new Search experience",default:!1}),(0,i.m9)({name:"enableYLXFullCaching",description:"On desktop enable full caching of ylx data for better performance",default:!1}),(0,i.m9)({name:"enableRightSidebarTransitionAnimations",description:"Enable the slide-in/out transition on the right sidebar",default:!1}),(0,i.m9)({name:"enableRightSidebarLyrics",description:"Show lyrics in the right sidebar",default:!1}),(0,i.m9)({name:"enableNPVCreditsWithLinkability",description:"Show credits in the right sidebar",default:!1}),(0,i.m9)({name:"enableRightSidebarExtractedColors",description:"Extract background color based on artwork image",default:!1}),(0,i.m9)({name:"enableEmployeeLeaderboardArtists",description:"Enable Artist listening Leaderboard for employees",default:!1}),(0,i.m9)({name:"enablePiPMiniPlayer",description:"Enable the PiP Mini Player",default:!1}),(0,i.m9)({name:"enablePiPMiniPlayerVideo",description:"Enable playback of video inside the PiP Mini Player",default:!1}),(0,i.m9)({name:"enableCinemaMode",description:"Enable cinema mode",default:!0}),(0,i.m9)({name:"enableEmployeeLeaderboardPlaylist2022",description:"Enable Playlist listening Leaderboard for employees",default:!1}),(0,i.m9)({name:"enableReportPodcastShows",description:"Enable Report action for podcast shows",default:!1}),(0,i.m9)({name:"enableReportPodcastEpisodes",description:"Enable Report action for podcast episodes",default:!1}),(0,i.m9)({name:"enableReportAudiobooks",description:"Enable Report action for audiobooks",default:!1}),(0,i.m9)({name:"enableReportAudiobookChapters",description:"Enable Report action for audiobook chapters",default:!1}),(0,i.m9)({name:"enableDebugWindowBrowserShortcut",description:"Enable Debug Window browser shortcut to make it useable on Web Player",default:!1}),(0,i.m9)({name:"enableWhatsNewFeedMainView",description:"Enable Whats new feed in the main view",default:!1}),(0,i.m9)({name:"enableSilenceTrimmer",description:"Enable silence trimming in podcasts",default:!1}),(0,i.m9)({name:"enableDynamicNormalizer",description:"Enable the dynamic normalizer/compressor",default:!1}),(0,i.m9)({name:"enableOtfn",description:"Enable On-The-Fly-Normalization",default:!1}),(0,i.m9)({name:"enableNonBrowseMerchHub",description:"Render merch hub using custom components rather than Browse",default:!1}),(0,i.m9)({name:"enablePuffin",description:"Enables the Puffin feature",default:!1}),(0,i.m9)({name:"enableYourDJ",description:'Enables the "Your DJ" feature',default:!1}),(0,i.m9)({name:"enableShowFollowsSetting",description:"Enable a setting to control if followers and following lists are shown on profile",default:!1}),(0,i.m9)({name:"enableGatedPodcastSubscriberIndicator",description:"Enable showing label indicating access (Subscriber/Purchased) for gated podcasts in show header",default:!1});let ce=function(e){return e.CONTROL="CONTROL",e.REORDERED="REORDERED",e.LATEST_REORDERED="LATEST_REORDERED",e.LATEST="LATEST",e}({});(0,i.BL)({name:"premiumPageTweakit",description:"Testing design variations in the Premium page",values:ce,default:ce.CONTROL}),(0,i.m9)({name:"enablePremiumPage",description:"Enable Premium Page feature to test conversion within the Desktop/Webplayer",default:!1}),(0,i.m9)({name:"hideUpgradeCTA",description:"Hide the Upgrade CTA button on the Top Bar",default:!1}),(0,i.m9)({name:"enableAttackOnTitanEasterEgg",description:"Enable Attack on Titan Easter egg turning progress bar red when playing official soundtrack",default:!1}),(0,i.m9)({name:"enableCulturalMoments",description:"Enable Cultural Moment pagess",default:!1}),(0,i.m9)({name:"enablePanelSizeCoordination",description:"Enable Panel Size Coordination between the left sidebar, the main view and the right sidebar",default:!1}),(0,i.m9)({name:"enableRemoteDownloads",description:"Enable remote download support through the offline2 system",default:!1}),(0,i.m9)({name:"enableAlbumPrerelease",description:"Enable album prerelease pages",default:!1}),(0,i.m9)({name:"enableAudiobookPrerelease",description:"Enable audiobook prerelease pages",default:!1}),(0,i.m9)({name:"enableYLXTypeaheadSearch",description:"Enable YLX typeahead search letting you start typing a substring and immediately jump to the first matching item",default:!1}),(0,i.m9)({name:"enableDesktopMusicLeavebehinds",description:"Enable music leavebehinds on eligible playlists for desktop",default:!1}),(0,i.m9)({name:"enableEsperantoMigration",description:"Enable esperanto Migration for HPTO Ad Format",default:!1}),(0,i.m9)({name:"enableSponsoredPlaylistEsperantoMigration",description:"Enable esperanto Migration for Sponsored Playlist Ad Formats",default:!1}),(0,i.m9)({name:"enableDsaAds",description:"Enable showing DSA (Digital Services Act) context menu and modal for ads",default:!1}),(0,i.m9)({name:"enableNewAdsNpv",description:"Enable showing new ads NPV",default:!1}),(0,i.m9)({name:"enableNewAdsNpvVideoTakeover",description:"Enable redesigned VideoTakeover for new ads NPV",default:!1}),(0,i.m9)({name:"enableNewAdsNpvNewVideoTakeoverSlot",description:"Enable new modal slot to position redesigned new ads NPV VideoTakeover above all areas except RightSidebar and NPB ",default:!1}),(0,i.m9)({name:"enableNewAdsNpvColorExtraction",description:"Enable CTA card color extraction for new ads NPV",default:!1}),(0,i.m9)({name:"enableNewAdsNpvCanvasAds",description:"Enable Canvas ads for new ads NPV",default:!1}),(0,i.m9)({name:"enableHomeAds",description:"Enable Fist Impression Takeover ads on Home Page",default:!1}),(0,i.BL)({name:"enableMandalorianEasterEgg",description:"Enable the Mandalorian easter-egg",values:de,default:de.DISABLED}),(0,i.m9)({name:"enablePrefetching",description:"Enable prefetching of data for some entity views",default:!1}),(0,i.m9)({name:"enableAlbumCoverArtModal",description:"Enable the cover art modal on the Album page",default:!1}),(0,i.m9)({name:"enableABP",description:"Enable ABP",default:!1}),(0,i.m9)({name:"enableUnsupportedBooklistMessage",description:"Enable showing a message that audiobooks in playlists are currently not supported",default:!1}),(0,i.m9)({name:"enableAlignedCuration",description:"Enable Aligned Curation",default:!1}),(0,i.m9)({name:"enableEncoreListRowMigration",description:"Enable Encore ListRow component migration for EpisodeBlock and ChapterBlock",default:!1}),(0,i.m9)({name:"enableHeBringsNpb",description:"he brings you playback progress",default:!1}),(0,i.BL)({name:"enableSocialConnectOnDesktop",description:"Enable the Social Connect API that powers group listening sessions for Desktop",values:q,default:q.DISABLED}),(0,i.BL)({name:"enableSocialConnectOnDesktopWebPlayer",description:"Enable the Social Connect API that powers group listening sessions for Desktop Web Player",values:q,default:q.DISABLED}),(0,i.m9)({name:"enableNewConnectBar",description:"New Connect Bar without arrow and clickable elements",default:!1}),(0,i.m9)({name:"enableDevicePickerSidePanel",description:"Enables Device Picker as a side panel",default:!1}),(0,i.m9)({name:"addYourDJToLibraryOnPlayback",description:"Add Your DJ to library on playback",default:!1}),(0,i.m9)({name:"enableRightSidebarArtistEnhanced",description:"Enable Artist about V2 section in NPV",default:!1});let ue=function(e){return e.DEFAULT="DEFAULT",e.CONTROL="CONTROL",e.VARIANT="VARIANT",e}({});(0,i.BL)({name:"enableInternalTrackSearch",description:"Enable internal track search on desktop UI",values:ue,default:ue.DEFAULT}),(0,i.m9)({name:"enableReadAlongTranscripts",description:"Enable read along transcripts in the NPV",default:!1}),(0,i.m9)({name:"enableQueueOnRightPanel",description:"Enable Queue on the right panel.",default:!1}),(0,i.m9)({name:"enableGroupSessionEntrypointInQueue",description:"Enable Group Session entrypoint in the queue.",default:!1}),(0,i.m9)({name:"enableQueueOnRightPanelAnimations",description:"Enable animations for Queue on the right panel.",default:!1}),(0,i.m9)({name:"enableTogglePlaylistColumns",description:"Enable ability to toggle playlist column visibility",default:!1}),(0,i.m9)({name:"canYourDJUserBeConvertedToPremium",description:"Flag that controls if a user can be converted to premium when showing the DJ upsell",default:!1}),(0,i.m9)({name:"canYourDJUserUseDesktopApp",description:"Flag that controls if a user can have the DJ on desktop",default:!1}),(0,i.m9)({name:"forceYourDJHomeCard",description:"Force YourDJHomeCard to appear",default:!1});let me=function(e){return e.CONTROL="CONTROL",e.TRUNCATED_LYRICS="TRUNCATED_LYRICS",e.EMPTY_LYRICS="EMPTY_LYRICS",e}({});(0,i.BL)({name:"forceLyricsUpsell",description:"Force Lyrics Upsell for testing",values:me,default:me.CONTROL}),(0,i.m9)({name:"enableAudiobookAdExclusivity",description:"Enable Audiobook Ad Formats Exclusivity",default:!1}),(0,i.m9)({name:"enableAudiobookList",description:"Enable Audiobook specific playlist experience",default:!1}),(0,i.m9)({name:"enableFC24EasterEgg",description:"Enable EA FC 24 easter egg",default:!1});let pe=function(e){return e.CONTROL="CONTROL",e.UPSELL_SIMPLE="UPSELL_SIMPLE",e.UPSELL_POPOVER="UPSELL_POPOVER",e}({});(0,i.BL)({name:"musicVideosPremiumUpsell",description:"Testing Premium upsell for Free users on music videos",values:pe,default:pe.CONTROL}),(0,i.m9)({name:"enableNPVideosV2",description:"Enable NPV 2.0 Video experience for testing",default:!1}),(0,i.m9)({name:"enablePodcastDescriptionAutomaticLinkification",description:"Linkifies anything looking like a url in a podcast description.",default:!1}),(0,i.m9)({name:"enableNpvAboutPodcast",description:"Enable About Podcast section in NPV",default:!1}),(0,i.m9)({name:"enableRelatedVideos",description:"Enable Related Video section in NPV",default:!1}),(0,i.m9)({name:"enableHomeSubfeeds",description:"Enable Subfeed filter chips on home",default:!1}),(0,i.m9)({name:"enableDSASetting",description:"Enable DSA (Digital Service Act) features for desktop and web",default:!1}),(0,i.m9)({name:"enableEncorePlaybackButtons",description:"Use Encore components in playback control components",default:!1}),(0,i.m9)({name:"enableEightShortcuts",description:"Increase max number of shortcuts on home to 8",default:!1}),(0,i.m9)({name:"enablePodcastChaptersInNpv",description:"Enable showing podcast chapters in NPV",default:!1}),(0,i.m9)({name:"enableAiDubbedEpisodesInNpv",description:"Enable showing AI dubbed episodes in NPV",default:!1}),(0,i.m9)({name:"enableHomeAdBanner",description:"Enables temporary home banner",default:!1}),(0,i.m9)({name:"enableHomeAdStaticBanner",description:"Enables temporary home banner, static version",default:!1}),(0,i.m9)({name:"enableEncoreCards",description:"Enables all cards throughout app to be Encore Cards",default:!1}),(0,i.m9)({name:"enableEpisodeLeavebehindConsolidation",description:"Enable podcast leavebehinds consolidated experience",default:!1}),(0,i.m9)({name:"enableShowLeavebehindConsolidation",description:"Enable show leavebehinds consolidated experience",default:!1}),(0,i.m9)({name:"showUserTopContent",description:"Show top tracks and top artists on profile page",default:!0}),(0,i.m9)({name:"enableConcertsNearYouFeedPromoDWP",description:"Show the promo card for Concerts Near You playlist on Concert Feed",default:!1}),(0,i.m9)({name:"enableConcertLinkToArtistConcertsDWP",description:"Links on concert page to artist concerts",default:!1});let ge=function(e){return e.CONTROL="control",e.HOME_NEXT_TO_NAVIGATION="home-next-to-navigation",e.HOME_NEXT_TO_SEARCH="home-next-to-search",e}({});(0,i.BL)({name:"enableGlobalNavBar",description:"Show global nav bar with home button, search input and user avatar",default:ge.CONTROL,values:ge}),(0,i.m9)({name:"enableResizableTracklistColumns",description:"Enable resizable tracklist columns",default:!1}),(0,i.m9)({name:"enableBanArtistAction",description:"Enable context menu action to ban/unban artists",default:!1}),(0,i.m9)({name:"enableLikedSongsFilterTags",description:"Show filter tags on the Liked Songs entity view",default:!1}),(0,i.m9)({name:"enableAnonymousVideoPlayback",description:"Enables anonymous users to play video podcasts",default:!1}),(0,i.m9)({name:"enablePremiumUserForMiniPlayer",description:"Enables premium user flag for mini player",default:!1}),(0,i.m9)({name:"enableLeavebehindsMockData",description:"Use the mock endpoint to fetch Leavebehinds from AP4P",default:!1}),(0,i.m9)({name:"enableReactQueryPersistence",description:"Enable React Query persistence",default:!1}),(0,i.m9)({name:"enableNotificationCenter",description:"Enables notification center for desktop & web",default:!1}),(0,i.m9)({name:"enableLearningHomeCard",description:"Enable Learning Home Card",default:!1}),(0,i.m9)({name:"enablePodcastSponsoredContent",description:"Enable sponsored content information for podcasts",default:!1}),(0,i.m9)({name:"enableFullscreenMode",description:"Enable fullscreen mode",default:!1}),(0,i.m9)({name:"enableYLXPrereleaseAlbums",description:"Enables album pre-releases in YLX",default:!1}),(0,i.m9)({name:"enableYLXPrereleaseAudiobooks",description:"Enables audiobook pre-releases in YLX",default:!1}),(0,i.m9)({name:"enablePipImpressionLogging",description:"Enables impression logging for PiP",default:!1}),(0,i.m9)({name:"enableMoreLikeThisPlaylist",description:"Enables More Like This playlist for playlists the user cannot edit",default:!1}),(0,i.m9)({name:"enableWatchFeed",description:"Enable Watch Feed feature",default:!1}),(0,i.m9)({name:"enableHybridHome",description:"Enable Hybrid Home feature",default:!1}),(0,i.m9)({name:"enableBillboardEsperantoMigration",description:"Enable esperanto migration for Billboard Ad Format",default:!1}),(0,i.m9)({name:"enableShowRating",description:"Enables new UI for rating books and podcasts",default:!1}),(0,i.m9)({name:"enableEsperantoMigrationLeaderboard",description:"Enable esperanto Migration for Leaderboard Ad Format",default:!1}),(0,i.m9)({name:"enableConcertsInSearch",description:"Enables concerts in search",default:!1});let fe=function(e){return e.CONTROL="control",e.CANVAS_PLAY_LOOP="canvas-play-loop",e.CANVAS_PLAY_ON_HOVER="canvas-play-on-hover",e}({});(0,i.BL)({name:"enableCanvasNpv",description:"Enables short, looping visuals on tracks.",default:fe.CONTROL,values:fe});const he=e=>{const{isOpen:t,contentLabel:n,children:a,className:i,overlayClassName:o,animated:r,animation:l,shouldFocusAfterRender:d=!0,...c}=e,u=(0,s.NC)(oe);let m=0;return r?m=300:l?.closeTimeoutMs&&(m=l.closeTimeoutMs),(0,L.jsx)(J(),{className:{base:Y()("GenericModal","encore-dark-theme","encore-layout-themes",{"vertical-metrics":u,"GenericModal--animated":r},[l?.modal?.base,i]),afterOpen:Y()("",{"GenericModal--afterOpen":r},[l?.modal?.afterOpen]),beforeClose:Y()("",{"GenericModal--beforeClose":r},[l?.modal?.beforeClose])},overlayClassName:{base:Y()("GenericModal__overlay",{"GenericModal__overlay--animated":r},[l?.overlay?.base,o]),afterOpen:Y()("",{"GenericModal__overlay--afterOpen":r},[l?.overlay?.afterOpen]),beforeClose:Y()("",{"GenericModal__overlay--beforeClose":r},[l?.overlay?.beforeClose])},bodyOpenClassName:"GenericModal__Body--open",isOpen:t,...m?{closeTimeoutMS:m}:{},shouldFocusAfterRender:d,preventScroll:!0,ariaHideApp:!1,contentLabel:n,...c,children:a})},be=({isSigningUp:e,closeModal:t,retryOpeningBrowser:n,errorMessage:a,isOpen:s=!0})=>(0,L.jsx)(he,{className:U,isOpen:s,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:H,onRequestClose:t,"aria-label":e?y.get("desktop-auth.login.redirect-to-browser-signup"):y.get("desktop-auth.login.redirect-to-browser-login"),children:(0,L.jsxs)("div",{className:V,children:[(0,L.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,L.jsx)(P.Z,{variant:"alto",semanticColor:"textBase",children:e?y.get("desktop-auth.login.redirect-to-browser-signup"):y.get("desktop-auth.login.redirect-to-browser-login")}),a&&(0,L.jsxs)("div",{className:z,role:"alert","aria-live":"assertive",children:[(0,L.jsx)(B.b,{className:G}),(0,L.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})]}),(0,L.jsxs)("button",{className:W,onClick:n,children:[!a&&(0,L.jsx)(P.Z,{variant:"ballad",semanticColor:"textSubdued",children:y.get("desktop-auth.login.not-seeing-browser")}),(0,L.jsx)(P.Z,{variant:"balladBold",semanticColor:"textBase",children:y.get("desktop-auth.login.try-again")})]})]})}),Ee="https://www.spotify.com/redirect/account-page/",we="showSettings",ve={id:"UnknownLoginErrorMessage"},ye={id:"DefaultErrorMessage",replace:[we]},Se={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[we]},400:ve,401:ve,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:ve,405:ve,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[Ee]},408:{id:"RegionMismatchMessage",replace:[Ee,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:ve,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:ve,415:ve,416:ve,417:{id:"FacebookCredentialsMisusedMessage"},418:ve,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},ke={1:ve,2:ve,3:{id:"BadCredentialsMessage"},4:ve,5:ve,6:ve,7:ve,8:ve,9:ve},Ae={1:{silent:!0},2:ve,3:ve,4:{id:"SessionExpiredMessage"},5:ye};var xe=n(9448),Ne=n(3074),Le=n.n(Ne);const _e=Le().create().toString(),Ce="has-used-app";function Oe(){const e=!window.localStorage.getItem(Ce);return e&&window.localStorage.setItem(Ce,"true"),e}const Te=window.localStorage,Re=()=>{const e=Te.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Pe{constructor(e){this._eventSender=e}logPageView({page:e,actionHash:t}){this.logAction({page:e,action_type:"pageview",action_intent:"",action_hash:t})}logAction({page:e,action_type:t,action_intent:n,item_id:a,action_hash:s},i){this._eventSender.send((0,xe.I)({action_type:t,action_intent:n,action_page:e,action_item_id:a,action_hash:s,device_is_new_install:Oe(),device_locale:window.__spotify.locale,device_referrer:Re(),ab_flags:"",session_id:_e}),i)}async finalFlush(){await this._eventSender.finalFlush()}}function Ie(){return Le().create().toString()}const Me=(0,r.createContext)(null),De=({eventSender:e,children:t})=>{const n=new Pe(e),[a,s]=(0,r.useState)(Ie()),i=(0,r.useCallback)((()=>{s(null)}),[]);return(0,L.jsx)(Me.Provider,{value:{logger:n,pageviewActionHash:a,clearPageviewActionHash:i},children:t})},je=()=>{const e=(0,r.useContext)(Me);if(!e)throw new Error("useDesktopLoginLogger must be used within a DesktopLoginLoggerContext");return e};var Fe=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(Fe||{});const Be=()=>{const[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),l=(0,r.useRef)(0),{logger:d,pageviewActionHash:c,clearPageviewActionHash:u}=je();return{handleLoginOrSignupClick:async e=>{const a=++l.current;let i;s(e),o(""),t(!0),c?(i=c,u()):i=Ie(),d.logAction({page:"auth-on-web",action_type:"click",action_intent:e?"sign-up-with-browser":"log-in-with-browser",action_hash:i});try{await(r={name:"login-accounts",args:[{method:"login-accounts",enableSignup:e,actionHash:i}]},n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((e,t)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(r),{onSuccess:e,onFailure:t})})):null),d.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-success-signup":"show-success-login"},{flush:!1}),await d.finalFlush(),location.href="spotify:app:xpui"}catch(n){const s="string"==typeof n?JSON.parse(n):n;if(a!==l.current)return void d.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:s?.errorReference});t(!1);let i=function(e,t,n){if(0===t)return"";if(!e&&!t)return"";let a=Se;switch(e){case"session":a=ke;break;case"desktop_login_accounts":a=Ae}const s=a[t]||ye;if(s.silent)return"";const i=s.replace||[];let o="";switch(s.id){case"UnknownLoginErrorMessage":o=y.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":o=y.get("desktop.login.DefaultErrorMessage",i[0]);break;case"SessionTerminatedMessage":o=y.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":o=y.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":o=y.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":o=y.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":o=y.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":o=y.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":o=y.get("desktop.login.ErrorProxyAuthRequired",i[0]);break;case"CriticalUpdate":o=y.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":o=y.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":o=y.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":o=y.get("desktop.login.MissingUserInfoMessage",i[0]);break;case"RegionMismatchMessage":o=y.get("desktop.login.RegionMismatchMessage",i[0],i[1]);break;case"PremiumUsersOnlyMessage":o=y.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":o=y.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":o=y.get("desktop.login.ClientUpdateFail",i[0]);break;case"FbUserNotFoundSignUp":o=y.get("desktop.login.FbUserNotFoundSignUp",i[0])}return n?`${o}<br>${y.get("desktop.login.errorCode",n)}`:o}(s.errorCategory,s.errorCode,s.errorReference);"desktop_login_accounts"===s.errorCategory&&s.errorCode===Fe.OPERATION_TIMED_OUT&&(i=e?y.get("desktop-auth.login.signup-time-out"):y.get("desktop-auth.login.login-time-out")),o(i),d.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-error-signup":"show-error-login",item_id:s?.errorReference})}var r},handleTryAgainClick:()=>{t(!1),d.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},isWaitingForBrowser:e,isSigningUp:a,errorMessage:i}},Ue=({titleStrings:e,titleVariants:t,widthBreakpoint:n,heightBreakpoint:a})=>{const[s,i]=(0,r.useState)(!1),{handleLoginOrSignupClick:o,isSigningUp:c,errorMessage:u}=Be(),m=()=>{let e=t[n??M.MEDIUM];return n===M.LARGE&&a===M.SMALL?e=t[M.MEDIUM]:n===M.MEDIUM&&a===M.LARGE?e=t[a]:n!==M.SMALL||a!==M.MEDIUM&&a!==M.LARGE||(e=t[a]),e};return(0,L.jsxs)(L.Fragment,{children:[s&&(0,L.jsx)(be,{isSigningUp:c,closeModal:()=>i(!1),retryOpeningBrowser:()=>{o(!0)},errorMessage:u}),(0,L.jsxs)("div",{className:D,children:[(0,L.jsx)("div",{className:F,children:e.map(((e,t)=>(0,L.jsx)(P.Z,{variant:m(),semanticColor:"textBase",children:e},`title-${t}`)))}),(0,L.jsxs)("div",{className:j,children:[(0,L.jsx)(l.$,{onClick:()=>{o(!0)},iconTrailing:d.H,"data-testid":"signup-button",children:y.get("desktop-auth.login.sign-up-with-browser")}),(0,L.jsx)(I.n,{onClick:()=>{o(!1)},iconTrailing:d.H,children:y.get("desktop-auth.login.log-in-with-browser")})]})]})]})},Ve="pGPnNDcYgyNwnreAcAjH",He="SH3eUKfHc4CgBmWIBRrv",We="Tcw5QBhdNr3DQLv4tFI6",ze="Z0UVjrWuri5SAyaPIcXN",Ge="AW58_lCPMJQuX4DRlFnb",Ke="Dd2IOSyZz6e01mIY_yfr";var Ye=n(9522),Xe=n(8599);const Je=({nrSteps:e,atStep:t,navigate:n,backgroundImage:a})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:Ve,children:[(0,L.jsxs)("div",{className:He,children:[(0,L.jsx)(l.$,{colorSet:"invertedDark",size:"medium",iconOnly:Ye.g,onClick:()=>n((t-1+e)%e),"aria-label":"previous page"}),(0,L.jsx)(l.$,{colorSet:"invertedDark",size:"medium",iconOnly:Xe.V,onClick:()=>n((t+1)%e),"aria-label":"next page"})]}),(0,L.jsx)("div",{className:ze,children:Array.from({length:e}).map(((e,a)=>(0,L.jsx)("button",{className:We,onClick:()=>n(a),children:(0,L.jsx)("div",{className:Y()(Ge,{[Ke]:t===a}),"aria-label":`navigate to page ${a+1}`})},a)))})]}),a]}),qe="ziwA70F7A7bE1f_6JfC6",Ze="OspetDqlUGDfoHpTMfNO",$e="GFbAscggSBjAyjtM_3jg",Qe="pi2IJ4liRapxpGdxMJu5",et=({imageLocale:e,fadeInRef:t})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("img",{className:Y()(qe,{[Ze]:t.current}),src:`images/localised-carousel-image/login-1-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,L.jsx)("div",{className:Qe}),(0,L.jsx)("div",{className:$e})]}),tt=({imageLocale:e,fadeInRef:t})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("img",{className:Y()(qe,{[Ze]:t.current}),src:`images/localised-carousel-image/login-2-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,L.jsx)("div",{className:Qe}),(0,L.jsx)("div",{className:$e})]}),nt="t71Gs8ndLnfWLdcqPzTw",at="eSEJ1rqeTzD_6sklBWTI",st="XGEPBM1JHuPOpeuZsIwA",it="Kj3InjxX0eAmTViGluAm",ot="_SsAtuLKRe2TvyQ7V_iu",rt="IONRZYfY863Fg8_TZZwW",lt="mzc8KoGBYnUXfOViDxlH",dt=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],ct=({imgSrc:e,reverse:t})=>{const[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),d=n&&s&&o;return(0,L.jsxs)("div",{className:Y()(at,{[st]:d&&!t,[it]:d&&t}),children:[(0,L.jsx)("img",{src:e,className:rt,onLoad:()=>{a(!0)},alt:""}),(0,L.jsx)("img",{src:e,className:rt,onLoad:()=>{i(!0)},alt:""}),(0,L.jsx)("img",{src:e,className:rt,onLoad:()=>{l(!0)},alt:""})]})},ut=({fadeInRef:e})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:Y()(nt,{[ot]:e.current}),onAnimationEnd:()=>{e.current=!1},children:[...Array(6).keys()].concat([...Array(6).keys()]).concat([...Array(6).keys()]).map(((e,t)=>(0,L.jsx)(ct,{imgSrc:`images/artwork-grid/row-${e+1}.avif`,reverse:t%2==0},`image-row-${t}`)))}),(0,L.jsx)("div",{className:lt})]}),mt=2,pt=3,gt=4,ft={"auto-detect":{label:()=>y.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>y.get("desktop.settings.proxy.noproxy")},http:{label:()=>y.get("desktop.settings.proxy.http")},socks4:{label:()=>y.get("desktop.settings.proxy.socks4")},socks5:{label:()=>y.get("desktop.settings.proxy.socks5")}},ht=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var bt=n(1328);const Et="mpdBa62OP4Fr5wvCsa89",wt="acVhMt5pELcXQyLaaPuV",vt="AavUTirpKSAHapguSAy0",yt="SkbGMKYv49KtJNB5XxdX",St="qfjicQPaTTPrLWJWRxMQ",kt=({id:e,type:t,placeHolder:n,inputRef:a,handleOnChange:s})=>(0,L.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:yt,placeholder:n,ref:a,onChange:s}),At=({children:e,label:t})=>(0,L.jsx)(bt.g,{label:t,className:St,children:e});var xt=n(9856),Nt=n.n(xt);function Lt(){return"Safari"===Nt().parse(window.navigator.userAgent).browser.name}const _t="zrvvPyoxE6wQNqnu0yWA",Ct="jmu6DFPvhxRl0wSfmv2O",Ot=({value:e,id:t,children:n,disabled:a,onSelect:s,className:i,dir:o})=>(0,L.jsx)("span",{className:i,children:(0,L.jsx)("select",{className:Y()(_t,{[Ct]:Lt()}),value:e?.toString(),id:t,disabled:a,onBlur:()=>{},onChange:e=>{s(e.target.value)},dir:o,children:n})}),Tt=(0,r.createContext)(void 0),Rt=({children:e})=>{const[t,n]=(0,r.useState)(!1),[a,s]=(0,r.useState)(new Set),i=(0,r.useCallback)(((e,t)=>{s((n=>{if(n.has(e)===t)return n;const a=new Set(n);return t?a.add(e):a.delete(e),a}))}),[]),o=a.size>0;return(0,L.jsx)(Tt.Provider,{value:{sectionMatch:t,setSectionMatch:n,sectionContainsMatch:o,setSectionFilterMatchQueryValue:i},children:e})},Pt=()=>{const e=(0,r.useContext)(Tt);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e};(0,n(6124).vt)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,n)=>{e({lastFilterState:t,lastFilteredUri:n})}})));const It=(0,r.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""});n(6085);const Mt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),Dt=/\p{White_Space}/u,jt=/\p{P}/u,Ft=/\p{sc=Han}/u;function Bt(e){return null!==e&&Dt.test(e)}function Ut(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||Bt(e))}function Vt(e){return null!==e&&jt.test(e)}function Ht(e){return null!==e&&Ft.test(e)}class Wt{constructor(e,t,n){if(t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new Wt(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,a=t-e;return new Wt(this.data,n,a)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function zt(e){let t;do{t=e.nextCodePoint()}while(null!==t&&Bt(t)||Vt(t));return t}function Gt(e,t){let n=zt(e),a=zt(t);if(null===a)return{offset:0,length:0};const s=e.offset+e.position-1;let i=e.offset+e.position;for(;;){if(null===n&&null===a)return{offset:s,length:i-s};if(null===a)return{offset:s,length:i-s};if(null===n)return null;if(0!==Mt.compare(n,a))return null;i=e.offset+e.position,n=zt(e),a=zt(t)}}function Kt(e,t){let n,a,s;do{a=e.position,n=e.nextCodePoint()}while(null!==n&&Bt(n));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;a=e.position;do{s=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&a===s?null:e.slice(a,s)}do{if(s=e.position,t?.segmentCJKUnifieIdeographs&&Ht(n))break;n=e.nextCodePoint()}while(null!==n&&!Ut(n));return null===n&&a===s?null:e.slice(a,s)}function Yt(e){return Kt(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Xt(e){return Kt(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Jt(e,t){const n=[];for(let a=Xt(e);null!==a;a=Xt(e)){let s=Gt(a,t.slice());null===s?(s=Gt(e.slice(a.offset),t.slice()),null===s||n.push(s)):n.push(s)}return n}function qt(e,t){return e.offset===t.offset&&e.length===t.length}const Zt=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const n=Wt.from(e),a=[];for(let e=Yt(n);null!==e;e=Yt(n)){const n=[];for(let a=0;a<t.length;++a){const s=t[a],i=Jt(Wt.from(s),e);for(const e of i)n.push({text:s,range:e})}if(0===n.length)return null;a.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>qt(e.range,t.range)))===t)))}return a.length>0?a:null}(e,t):"boolean"!=typeof e||e,$t={section:"c6TyNYOUJRIsjYZJZofy",hidden:"V4Bh2Ch7KvYUdn2s9ZdX"};function Qt({children:e,filterMatchQuery:t}){const{filter:n}=(0,r.useContext)(It),{setSectionMatch:a,sectionContainsMatch:s}=Pt(),i=Zt(n,t);(0,r.useEffect)((()=>{a(i)}),[i,a]);const o=!i&&!s;return(0,L.jsx)("div",{className:Y()($t.section,{[$t.hidden]:o}),children:e})}function en(e){return(0,L.jsx)(Rt,{children:(0,L.jsx)(Qt,{...e})})}var tn=n(8514),nn=(n(4856),n(9438)),an=n.n(nn);const sn={highlightedText:"M0E2Al6URHV3iyoDbvi_"};function on({searchWords:e,textToHighlight:t,...n}){return 0===e.length||e.every((e=>!e))?(0,L.jsx)(L.Fragment,{children:t}):(0,L.jsx)(an(),{highlightClassName:sn.highlightedText,searchWords:e,textToHighlight:t,autoEscape:!0,...n})}function rn({children:e,className:t,semanticColor:n="textBase"}){const{filter:a}=(0,r.useContext)(It);return(0,L.jsx)(tn.E,{as:"h2",variant:"bodyMediumBold",semanticColor:n,className:t,children:(0,L.jsx)(on,{searchWords:[a],textToHighlight:e})})}const ln="gvcgOXnAiNKEe_z92_lw";function dn({onClick:e}){return(0,L.jsx)(I.n,{className:ln,onClick:e,children:y.get("settings.restartApp")})}const cn=(e,t,n)=>{let a=`${e}:${t}`;switch(n){case mt:a+="@http";break;case pt:a+="@socks4";break;case gt:a+="@socks5"}return a},un=({addr:e,mode:t="0",pass:n,user:a,setValue:s,restartContainer:i,fullWidth:o})=>{const l=(0,r.useRef)(null),d=(0,r.useRef)(null),c=(0,r.useRef)(null),u=(0,r.useRef)(null),m=Number(t),[p,g]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[b,E]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const[t,n]=e?.split(/[:@]+/)||["",""];g(t),h(n),l.current&&(l.current.value=t),d.current&&(d.current.value=n)}),[e]),(0,r.useEffect)((()=>{u.current&&n&&(u.current.value=n.toString())}),[n]),(0,r.useEffect)((()=>{c.current&&a&&(c.current.value=a.toString())}),[a]);const w=(0,r.useCallback)((({target:e})=>{const t=cn(e.value,f,m);g(e.value),s("network.proxy.addr",t),E(!0)}),[m,f,s]),v=(0,r.useCallback)((({target:e})=>{const t=cn(p,e.value,m);h(e.value),s("network.proxy.addr",t),E(!0)}),[m,p,s]),S=(0,r.useCallback)((({target:e})=>{s("network.proxy.user",e.value),E(!0)}),[s]),k=(0,r.useCallback)((({target:e})=>{s("network.proxy.pass",e.value),E(!0)}),[s]),A=0!==m&&1!==m,x=m!==pt;return(0,L.jsxs)(en,{filterMatchQuery:y.get("desktop.settings.proxy.title"),children:[(0,L.jsx)(rn,{children:y.get("desktop.settings.proxy.title")}),(0,L.jsxs)("div",{className:Y()(wt,o?vt:null),children:[(0,L.jsx)(At,{label:y.get("desktop.settings.proxy.type"),children:(0,L.jsx)(Ot,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);s("network.proxy.mode",t),E(!0)},children:ht.map((({enumKey:e,enumValue:t})=>(0,L.jsx)("option",{value:t,"data-testid":e,children:ft[e]?ft[e].label():""},e)))})}),A?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:Et,children:[(0,L.jsx)(At,{label:y.get("desktop.settings.proxy.host"),children:(0,L.jsx)(kt,{id:"network.proxy.host",handleOnChange:w,placeHolder:y.get("desktop.settings.proxy.host"),inputRef:l})}),(0,L.jsx)(At,{label:y.get("desktop.settings.proxy.port"),children:(0,L.jsx)(kt,{id:"network.proxy.port",type:"number",handleOnChange:v,placeHolder:y.get("desktop.settings.proxy.port"),inputRef:d})})]}),(0,L.jsxs)("div",{className:x?Et:void 0,children:[(0,L.jsx)(At,{label:y.get("desktop.settings.proxy.user"),children:(0,L.jsx)(kt,{id:"network.proxy.user",handleOnChange:S,placeHolder:y.get("desktop.settings.proxy.user"),inputRef:c})}),x?(0,L.jsx)(At,{label:y.get("desktop.settings.proxy.pass"),children:(0,L.jsx)(kt,{id:"network.proxy.pass",handleOnChange:k,placeHolder:y.get("desktop.settings.proxy.pass"),type:"password",inputRef:u})}):null]})]}):null,b&&(0,L.jsx)("div",{children:(0,L.jsx)(dn,{onClick:i})})]})]})},mn="sp://proxy/v1/";function pn(){const[e,t]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:mn}),persistent:!1,onSuccess:n=>{const a=JSON.parse(n);200!==a.status&&t(new Error(`Failed to fetch proxy settings (status code: ${a.status})`));const s=JSON.parse(a.body);e({mode:s["network.proxy.mode"],address:s["network.proxy.addr"],username:s["network.proxy.user"],password:s["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then(t)}),[t]);return{settings:e,updateSettings:(0,r.useCallback)((e=>{(async function(e){return new Promise(((t,n)=>{const a={"network.proxy.mode":e.mode};[mt,pt,gt].includes(e.mode)&&(a["network.proxy.addr"]=e.address,a["network.proxy.user"]=e.username),[mt,gt].includes(e.mode)&&(a["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:mn,body:JSON.stringify(a)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>t({...e})))}),[t])}}function gn(){return(0,r.useCallback)((()=>async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))}()),[])}const fn="BuzoTjBZd1UqCn6DmFJr",hn="HKamyJi9H31s99erfVyG",bn=()=>(0,L.jsxs)("div",{className:hn,children:[(0,L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,L.jsx)("circle",{className:fn,cx:"-140",cy:"50",r:"32"}),(0,L.jsx)("circle",{className:fn,cx:"0",cy:"50",r:"32"}),(0,L.jsx)("circle",{className:fn,cx:"140",cy:"50",r:"32"})]}),(0,L.jsx)("span",{className:"hidden-visually",children:y.get("page.loading")})]}),En=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const wn=()=>{const{settings:e,updateSettings:t}=pn(),n=gn(),a=(0,r.useCallback)(((n,a)=>{if(null!==e&&function(e){return!!En.includes(e)}(n)){const s=e;switch(n){case"network.proxy.mode":s.mode=a;break;case"network.proxy.addr":s.address=a;break;case"network.proxy.user":s.username=a;break;case"network.proxy.pass":s.password=a}t(s)}return Promise.resolve()}),[e,t]);return(0,L.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,L.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:y.get("desktop.login.PreferencesLink")}),null!==e?(0,L.jsx)(un,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:a,restartContainer:n,fullWidth:!0}):(0,L.jsx)(bn,{})]})};var vn=n(2232);const yn=({toggleSettings:e,isOpen:t=!0})=>(0,L.jsx)(he,{className:U,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:H,onRequestClose:e,"aria-label":y.get("desktop.login.PreferencesLink"),children:(0,L.jsxs)("div",{className:V,children:[(0,L.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,L.jsx)(wn,{}),(0,L.jsx)(vn.H,{size:"medium",semanticColor:"textBase",onClick:e,children:y.get("close")})]})});n(3512);const Sn=()=>"undefined"==typeof window;function kn(e){return!Sn()&&e instanceof HTMLElement}let An;const xn={subscribersByElement:new WeakMap,get resizeObserver(){return An||(An=new ResizeObserver((e=>{Array.isArray(e)&&e.forEach((t=>{const n={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(xn.subscribersByElement.get(t.target)??new Set).forEach((a=>{a(n,t,e)}))}))}))),An}};function Nn({onResize:e,refOrElement:t,observeOnly:n,observeOnMount:a=!1}){const s=(0,r.useRef)(e);s.current=e;const i=(0,r.useRef)(n);i.current=n;const o=(0,r.useRef)({width:-1,height:-1}),l=(0,r.useCallback)(((e,t,n)=>{if(!s.current)return;const a=o.current.width!==e.width,r=o.current.height!==e.height;("width"===i.current&&a||"height"===i.current&&r||!i.current&&(a||r))&&s.current(e,t,n),o.current.width=e.width,o.current.height=e.height}),[]),d=function({refOrElement:e,subscriber:t}){let n=null;const a=(0,r.useRef)(null),s=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useRef)(),l=(0,r.useRef)(t);l.current=t;const d=(0,r.useCallback)((()=>{let t=null;s.current?t=s.current:a.current?t=a.current:kn(e)&&(t=e),i.current!==t&&(o.current&&(o.current(),o.current=null),i.current=t,t&&l.current&&(o.current=l.current(t)))}),[e]),c=(0,r.useCallback)((e=>{s.current=e,d()}),[d]);return e&&!kn(e)&&(n=e),(0,r.useEffect)((()=>{n&&(a.current=n.current),d()}),[n,n?.current,d]),(0,r.useEffect)((()=>()=>{o?.current?.()}),[]),c}({refOrElement:t,subscriber:e=>(a&&l({width:e.offsetWidth,height:e.offsetHeight},null,[]),xn.subscribersByElement.has(e)||(xn.resizeObserver.observe(e),xn.subscribersByElement.set(e,new Set)),xn.subscribersByElement.get(e)?.add(l),()=>{xn.subscribersByElement.get(e)?.delete(l),0===xn.subscribersByElement.get(e)?.size&&(xn.resizeObserver.unobserve(e),xn.subscribersByElement.delete(e))})});return d}function Ln(e,t,n){const[a,s]=(0,r.useState)(),i=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:Nn({refOrElement:n,observeOnly:t,onResize:({[t]:e})=>{if(void 0===e)return;const n=i.find((([,t])=>e>=t)),o=n&&n[0];o&&o!==a&&s(o)}}),breakpoint:a}}const _n=()=>{const{logger:e,pageviewActionHash:t}=je();(0,r.useEffect)((()=>{t&&e.logPageView({page:"auth-on-web",actionHash:t})}),[e,t]);const n=(0,r.useRef)(!0),a=(0,r.useRef)(!0),s=(0,r.useRef)(!0),i=(0,r.useRef)(null),[o,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0),{breakpoint:u}=Ln({[M.SMALL]:0,[M.MEDIUM]:1024,[M.LARGE]:1600},"width",i);const{breakpoint:m}=function(e,t){return Ln(e,"height",t)}({[M.SMALL]:0,[M.MEDIUM]:800,[M.LARGE]:1200},i),p=(0,r.useCallback)((()=>{l(!o)}),[o]),g=dt.includes(y.getLocaleForTranslation().valueOf())?y.getLocaleForTranslation().valueOf():"en",f=[{backgroundImage:(0,L.jsx)(ut,{fadeInRef:n}),titleStrings:[y.get("desktop-auth.login.millions-of-songs"),y.get("desktop-auth.login.free-on-spotify")],titleVariants:{[M.SMALL]:"brio",[M.MEDIUM]:"forte",[M.LARGE]:"bass"}},{backgroundImage:(0,L.jsx)(et,{imageLocale:g,fadeInRef:a}),titleStrings:[y.get("desktop-auth.login.collect-and-create")],titleVariants:{[M.SMALL]:"alto",[M.MEDIUM]:"brio",[M.LARGE]:"forte"}},{backgroundImage:(0,L.jsx)(tt,{imageLocale:g,fadeInRef:s}),titleStrings:[y.get("desktop-auth.login.perfect-work-environment")],titleVariants:{[M.SMALL]:"alto",[M.MEDIUM]:"brio",[M.LARGE]:"forte"}}];return(0,L.jsx)(R.K,{children:(0,L.jsx)("div",{className:C,ref:i,"data-testid":"new-login",children:(0,L.jsxs)("main",{className:O,children:[(0,L.jsxs)("div",{className:T,children:[(0,L.jsx)(_,{toggleSettings:p}),(0,L.jsx)(Ue,{titleStrings:f[d].titleStrings,titleVariants:f[d].titleVariants,widthBreakpoint:u,heightBreakpoint:m})]}),(0,L.jsx)(Je,{nrSteps:f.length,atStep:d,navigate:c,backgroundImage:f[d].backgroundImage}),o&&(0,L.jsx)(yn,{toggleSettings:p})]})})})},Cn="H5vfurs7KNEs9Io5DUA7",On="qfBRU_bttJde7gy46oAB",Tn="ypTrzM1PtlrZp04qs6Eq",Rn="oHZmDpK0SrWDaXhPjUtC",Pn="lAHowB9HYfAUrg9UaSde",In=function({showSettings:e}){const{logger:t,pageviewActionHash:n}=je();(0,r.useEffect)((()=>{n&&t.logPageView({page:"auth-on-web",actionHash:n})}),[t,n]);const{handleLoginOrSignupClick:a,handleTryAgainClick:s,isWaitingForBrowser:i,isSigningUp:o,errorMessage:c}=Be();return(0,L.jsx)("main",{"data-testid":"login",children:i?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:Cn,children:o?y.get("desktop-auth.login.go-to-browser-signup"):y.get("desktop-auth.login.go-to-browser-login")}),(0,L.jsxs)("button",{className:Tn,onClick:s,children:[(0,L.jsx)(P.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:y.get("desktop-auth.login.not-seeing-browser")})," ",(0,L.jsx)(P.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:y.get("desktop-auth.login.try-again")})]})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(P.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:Cn,children:[y.get("desktop-auth.login.millions-of-songs"),(0,L.jsx)("br",{}),y.get("desktop-auth.login.free-on-spotify")]}),c&&(0,L.jsxs)("div",{className:Rn,role:"alert",onClick:t=>{if(t.currentTarget.getAttribute("data-action")){"showSettings"===t.currentTarget.getAttribute("data-action")&&e()}},"aria-live":"assertive",children:[(0,L.jsx)(B.b,{className:Pn}),(0,L.jsx)("span",{dangerouslySetInnerHTML:{__html:c}})]}),(0,L.jsx)(l.$,{onClick:()=>{a(!1)},iconTrailing:d.H,"data-testid":"login-button",children:y.get("desktop-auth.login.log-in-with-browser")}),(0,L.jsxs)("button",{className:On,onClick:()=>{a(!0)},children:[(0,L.jsx)(P.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:y.get("desktop-auth.login.new-to-spotify")}),(0,L.jsx)(P.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:y.get("desktop-auth.login.sign-up-with-browser")}),(0,L.jsx)(d.H,{iconSize:16,semanticColor:"textBase"})]})]})})},Mn=({mode:e,showLogin:t,showSettings:n})=>{const{logger:a}=je();return(0,L.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===e?(0,L.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{a.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),t()},"data-ta-id":"login-footer-settings-back-to-login",children:y.get("desktop.login.Back")}):(0,L.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{a.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),n()},"data-ta-id":"login-footer-settings",children:y.get("desktop.login.PreferencesLink")})})},Dn=()=>(0,L.jsxs)("header",{className:"Header",children:[(0,L.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,L.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]});var jn=n(4704),Fn=n(594);const Bn=({initialMode:e="login"})=>{const[t,n]=(0,r.useState)(e),a=function(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}(t),{logger:s}=je();(0,r.useEffect)((()=>{!async function(){new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:'{"type":"view_loaded", "name":"/loginUI"}'}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))}()}),[]),(0,r.useEffect)((()=>{"login"===t?s.logPageView({page:"login"}):"settings"===t&&s.logPageView({page:"login/settings"})}),[t,s]);const i=a?`__${t} __${a}-to-${t}`:"",o=()=>n("settings");return(0,L.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":t,children:[(0,L.jsxs)("div",{className:"fakeWebPlayer",children:[(0,L.jsx)("aside",{}),(0,L.jsxs)("footer",{children:[(0,L.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,L.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,L.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,L.jsx)("main",{children:(0,L.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,L.jsx)("div",{className:`App__content ${i}`,children:(0,L.jsx)(Fn.A,{mode:"in-out",children:(0,L.jsx)(jn.A,{timeout:{appear:0,enter:0,exit:650},children:(0,L.jsxs)("div",{className:`App__modal ${i}`,children:[(0,L.jsx)(Dn,{}),"settings"===t?(0,L.jsx)(wn,{}):(0,L.jsx)(In,{showSettings:o}),(0,L.jsx)(Mn,{mode:t,showLogin:()=>n("login"),showSettings:o})]})},i)})})]},"main1")},Un=({initialMode:e})=>{const t=(0,s.NC)(o);return(0,L.jsx)(L.Fragment,{children:t?(0,L.jsx)(_n,{}):(0,L.jsx)(Bn,{initialMode:e})})};var Vn=n(7381);var Hn=n(770);const Wn=(e,t)=>{const n=e.event_sender_context_information;return[(0,Hn.QI)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,Hn.ks)(t),(0,Hn.xB)(n.installation_id),(0,Hn.es)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]};var zn=n(53);let Gn=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),Kn=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const Yn={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function Xn(e,t){var n;n=Object.values(Yn),document.documentElement.classList.remove(...n);const a=[];"Microsoft Edge"===Nt().parse(window.navigator.userAgent).browser.name?a.push(Yn.BROWSER_EDGE):Lt()&&a.push(Yn.BROWSER_SAFARI),t===Kn.macOS?a.push(Yn.OS_MACOS):t===Kn.Windows?a.push(Yn.OS_WINDOWS):t===Kn.Linux?a.push(Yn.OS_LINUX):t===Kn.ChromeOS&&a.push(Yn.OS_CHROMEOS),e===Gn.Desktop?a.push(Yn.CONTAINER_DESKTOP):e===Gn.PWA?a.push(Yn.CONTAINER_PWA):e===Gn.Web&&a.push(Yn.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(a)}var Jn=n(5881),qn=n(7438);const Zn=/Spotify\/(?<version>.+)\s/;function $n(){if(!!window.navigator.userAgent.match(Zn))return Gn.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,n="Windows"in window;return e&&(t||n)?Gn.PWA:Gn.Web}const Qn=/Spotify\/(?<version>.+)\s/;function ea(){const e=window.navigator.userAgent.match(Qn);return e?.groups?.version||"unknown"}(0,zn.Cd)(),async function(){for(const e of[window.__spotify.locale,E.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return void y.initialize({localeForTranslation:e,localeForFormatting:navigator.language,translations:t})}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){Xn($n(),function(){const e=Nt().parse(window.navigator.userAgent).os.name;return"macOS"===e?Kn.macOS:"Windows"===e?Kn.Windows:"Linux"===e?Kn.Linux:"Chrome OS"===e?Kn.ChromeOS:Kn.Other}());const e=function(){const e=(0,Vn.ZA)({providers:{endpoints:(0,Vn.u6)(),token:()=>Promise.reject()}});return e.connect(),e}(),t="65b708073fc0480ea92a077233ca87bd",n=((e,t,n,a,s,i)=>(0,Hn.kE)({transport:t,suppressPersist:!1,context:Wn(e,n),storagePrefix:s,ownerProvider:a,useOptimizedESS2NA:i}))(window.__spotify,e,t,(()=>null),`${t}-loginui`,!1),i=window.__spotify&&window.__spotify.locale;i&&document.documentElement.setAttribute("lang",i);const o=Jn.HZ.addMiddleware(qn.F);(0,a.H)(document.getElementById("main")).render((0,L.jsx)(s.PE,{resolver:o,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:e,eventSender:n,version:ea(),sp_t_cookie:window.__spotify.event_sender_context_information?.installation_id},children:(0,L.jsx)(De,{eventSender:n,children:(0,L.jsx)(r.Suspense,{fallback:null,children:(0,L.jsx)(Un,{})})})})),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,zn.Lj)("UI init phase is done for login")}))},1194:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,e=[],a.O=(t,n,s,i)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,s,i]=e[c],r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,s,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={966:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[o,r,l]=n,d=0;if(o.some((t=>0!==e[t]))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var c=l(a)}for(t&&t(n);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var s=a.O(void 0,[452],(()=>a(2392)));s=a.O(s)})();
//# sourceMappingURL=login.js.map