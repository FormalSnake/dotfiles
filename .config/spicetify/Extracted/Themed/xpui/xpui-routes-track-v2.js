"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{53159:(e,a,s)=>{s.r(a),s.d(a,{default:()=>js});s(1137);var t=s(79474),i=s(97500),r=s.n(i),l=s(61343),n=s(88514),c=s(72232),o=s(99421),d=s(63275),u=s(89551),m=s(2940),h=s(67553),y=s(4888),g=s(79698),p=s(52842),x=s(81891),b=s(12972),j=s(26756),v=s(8788),k=s(42445);const R="o2TlnuNKxRO5RnB9BpHB",L="q0Ke_aAvTcc4dO4wCHQt",f="UlKUfS_GcROZmofuafOW",C="I5LORTI1u3A6VoUvRCBf",I="TS85Qkpioa31wR0p4kzT",A="yL1DLXBc05CR_ACv_NhA",N="k5kRkUyoz9znqg_SGOVQ";var P=s(9289),w=s(9450),U=s(25973),T=s(39868),S=s(12282),E=s(3463),O=s(13274);let D=function(e){return e.SMALL="small",e.LARGE="large",e}({});const B=({art:e,disabled:a=!1,LinkComponent:s,name:t,size:i=D.SMALL,type:n,uri:c})=>{const o=e?[e]:[],m=i===D.SMALL?(0,P.C)(n):function(e){switch(e){case E.s.SINGLE:return u.R.get("track-page.from-the-single");case E.s.EP:return u.R.get("track-page.from-the-ep");case E.s.COMPILATION:return u.R.get("track-page.from-the-compilation");case E.s.ALBUM:default:return u.R.get("track-page.from-the-album")}}(n),h=(0,l.Zp)();return(0,O.jsxs)("div",{className:r()(R,{[f]:i===D.SMALL,[L]:a}),children:[(0,O.jsx)("div",{className:C,children:(0,O.jsx)(w.b,{images:o,size:T.Qe.SIZE_80,title:t,type:U.c.ALBUM})}),(0,O.jsxs)("div",{className:I,children:[(0,O.jsx)(S.Z,{variant:i===D.SMALL?"mestoBold":"finale",children:m}),(0,O.jsx)(s,{to:c,children:(0,O.jsx)(S.Z,{as:"div",className:A,variant:"balladBold",dir:"auto",children:t})})]}),(0,O.jsx)("div",{onClick:()=>{h((0,d.o_)(c).toURLPath(!0))},className:N})]})};var F=s(8516),M=s(6944),_=s(48378),q=s(30020),Z=s(48522);let z=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const Y=(e,a)=>{switch(a.type){case"LYRICS_LOADING":return{...e,[a.uri]:{status:z.LOADING}};case"LYRICS_LOADED":return{...e,[a.uri]:{status:z.LOADED,data:a.response}};case"LYRICS_ERROR":return{...e,[a.uri]:{status:z.UNAVAILABLE}};default:return(0,Z.d)(a,`Unhandled lyrics action with type: ${a.type}`)}};var $=s(11142),G=s(29821);var K=s(96632);const H=async({trackUri:e,api:a,imageForLyricsRequest:s,isPlayable:t})=>{if(!t)return{hasLyrics:!1};const i=(0,d.o_)(e);try{const e=await(async(e,a,s)=>(await e.build().withHost(G.Hj).withPath(`/track/${encodeURIComponent(a)}/image/${encodeURIComponent(s)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(a||$.n.getInstance(),i.id,s||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof K.O&&404===e.status)return{hasLyrics:!1};throw e}},W={status:z.LOADING},V={status:z.UNAVAILABLE},Q=t.createContext(void 0),J=({children:e,initialState:a={}})=>{const s=t.useReducer(Y,a);return(0,O.jsx)(Q.Provider,{value:s,children:e})},X=({uri:e,isAnonymous:a,imageForLyricsRequest:s,isPlayable:i})=>{const r=t.useContext(Q);if(void 0===r)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[l,n]=r,c=e?l[e]:null;return(0,t.useEffect)((()=>{!c&&e&&(n({type:"LYRICS_LOADING",uri:e}),H({trackUri:e,imageForLyricsRequest:s,isPlayable:i}).then((a=>{n({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{n({type:"LYRICS_ERROR",uri:e})})))}),[n,s,i,c,e]),e&&(0,d.U_)(e)&&!a&&i?c||W:V};var ee=s(52745),ae=s(89744),se=s(56201),te=s(59611),ie=s(31390),re=s(32449),le=s(62344);const ne="oTRKhYD0MZlNPm66W3Tw",ce="sc95MwPalcHwYGZ7j3xN",oe="zrCZCfYv4zZiB1HYv9i8",de="RnlxIDmWcYTbbwNSJNjA",ue="SHkxfN1vy0wpRMP1hK7I",me="COXBS6zLyyxKNYuEAzjZ",he="sR5IpdOUvoUGYKlC9Dk1",ye="FHMr3WxshoYjZ7jd3YwI",ge="Evcwc4KM2tf9xrLbfB8B",pe="x4_dsi31Cx2SO1L0uYIj",xe="euPDqfFEBILj9KHDNLC1",be="x6FPRUKK40oDCPP7g6Ls",je="k3SPcfaKewjfdYumDcGw",ve="t9C7vRiN1OSC9uWfJEr0",ke="Onv6dO4lntCzKUqYa8PE",Re="vHNIIDpwcSLuHumlKDbY",Le=({richTrack:e})=>{const{search:a}=(0,l.zy)(),s=(0,t.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:i}=(0,le.h)(),r=e.albumOfTrack,n=(0,re.J)(r?.uri||""),{usePlayContextItem:c}=(0,_.P)({uri:n},{featureIdentifier:"album"}),o=(0,t.useMemo)((()=>({items:[],totalCount:0})),[]);return r?(0,O.jsx)("div",{ref:i,className:he,children:(0,O.jsx)(ie.F,{ariaLabel:r.name,nrTracks:r.tracks.totalCount,albumUri:r.uri,highlightUri:s,discs:o,usePlayContextItem:c,hasHeaderRow:!1})}):null};var fe=s(9292),Ce=s(21066),Ie=s(51057),Ae=s(68525),Ne=s(64280),Pe=s(54594),we=s(85905),Ue=s(94926),Te=s(8661);const Se=t.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:i,spec:r,logger:l,backgroundColor:n,name:c,isPlayable:o,albumUri:d,artists:g}){const p=(0,Ue.W)(),x=(0,Te.n)(),[v,k]=(0,Ae.A)(e),R=(0,t.useCallback)((async()=>{p({targetUri:e,intent:v?"unsave":"save",type:"click"});const a=r.saveButtonFactory();l.logInteraction(v?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e}));try{await k(!v)}catch{}}),[p,e,v,r,l,k]),L=(0,t.useCallback)((()=>{const t=(0,j.$I)({isPlaying:s,isActive:i,spec:r.playButtonFactory(),logger:l,uri:e});a({loggingParams:t})}),[i,s,l,r,a,e]),f=(0,t.useCallback)((()=>{l.logInteraction(r.contextButtonFactory().hitUiReveal())}),[l,r]),C=(0,we.j)();return(0,O.jsx)(Ne.E,{backgroundColor:n,children:(0,O.jsxs)(Pe.S,{children:[(0,O.jsx)(y.ei,{children:(0,O.jsx)(b.D,{onClick:L,isPlaying:s,disabled:!o,size:C,uri:e})}),(0,O.jsx)(y.ei,{children:(0,O.jsx)(fe.M,{isAdded:!!v,onClick:R,disabled:!x,size:C})}),(0,O.jsx)(Ce.f,{uri:e,isFollowing:!!v,onFollow:R,size:C}),(0,O.jsx)(m.bz,{menu:(0,O.jsx)(h.P,{uri:e,albumUri:d,artists:g}),onShow:f,children:(0,O.jsx)(Ie.e,{label:u.R.get("more.label.context",c),size:C})})]})})})),Ee="OH5mnpJIVCJozYM3raMt",Oe="etw0slM6uVrCi5RR3iDi",De=({padded:e,providerDisplayName:a})=>a?(0,O.jsx)(S.Z,{as:"p",dir:"auto",variant:"finale",className:`${Ee} ${e?Oe:""}`,children:u.R.get("web-player.lyrics.providedBy",a)}):null,Be=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const{data:t}=X({uri:e,imageForLyricsRequest:a,isPlayable:s});return t?.hasLyrics?(0,O.jsx)(De,{providerDisplayName:t.providerDisplayName}):null};var Fe=s(85980),Me=s(18331);const _e="QhDsXG1Gmo7XmQWLggAO",qe="bZgWQj7UxvK8GYKWDA7N",Ze="AW61P3tnW5cKJCWtbhFh",ze=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:s,secondaryButtonText:t,text:i})=>(0,O.jsxs)("div",{className:_e,"data-testid":"static-activation-trigger",children:[(0,O.jsx)(n.E,{className:qe,variant:"bodyMediumBold",children:i}),(0,O.jsxs)("div",{className:Ze,children:[(0,O.jsx)(c.H,{onClick:a,semanticColor:"textBase",children:t}),(0,O.jsx)(Me.$,{onClick:s,colorSet:"invertedLight",children:e})]})]});var Ye=s(53326);const $e="T1nqQ4HEh3heHy4RCCKa",Ge="L8zjshPVgUMXyZR4FtOk",Ke="YMn1FWcFmOz9osBrNvhF",He="Inbyq3TnvKDOJtcKFTDQ",We="lWk5se4WETUOJwaEb8D6",Ve="i8DyQbWCmDV_8N5XGJQT",Qe="t5WPFlGTY6GCd9UOFfLu",Je="AGQ3wRyMVK1odq860qnT",Xe="ZX_r7uZgPgssaUplfpxT",ea="qrqctaPu2XBpxsw23nPX",aa="XnWidTagai3nQwMPxIMF";var sa=s(97822),ta=s(73826);let ia=function(e){return e.SMALL="small",e.LARGE="large",e}({});const ra=e=>{const{disabled:a,images:s,LinkComponent:t,name:i,size:n,uri:c,enableI18nRoutes:o,enableI18nAdditionalPages:m}=e,h=n===ia.SMALL,y=(0,l.Zp)(),g=(0,d.o_)(c),p=g?.type,x=u.R.getLocaleForURLPath(),b=(0,sa.p)({localeFeatureFlag:o,entityFeatureFlag:m,urlLocale:x,entity:p,type:"link"});return(0,O.jsxs)("div",{className:r()(Ge,{[Ke]:a}),"data-testid":"track-artist-link-card",children:[(0,O.jsx)(w.b,{shape:w.u.CIRCLE,images:s,size:T.Qe.SIZE_80,title:i,type:U.c.ARTIST}),(0,O.jsxs)("div",{className:r()(We,{[Ve]:h}),children:[(0,O.jsx)(S.Z,{variant:"mestoBold",className:He,children:u.R.get("card.tag.artist")}),(0,O.jsx)(t,{to:c,children:(0,O.jsx)(S.Z,{as:"div",dir:"ltr",className:Qe,variant:"balladBold",children:i})})]}),(0,O.jsx)("div",{onClick:()=>{const e=g?.toURL(`/${ta.CT}${x}/`);if(g){const a=b?e:g.toURLPath(!0);y(a)}},className:Je})]})},la=({size:e=ia.LARGE,disabled:a=!1,enableI18nRoutes:s,enableI18nAdditionalPages:i,...l})=>{const[n,o]=(0,t.useState)(!1),d=(0,t.useCallback)((()=>{o(!n)}),[n]),m=l.artists;return(0,O.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,O.jsx)("div",{className:$e,children:m.map(((t,c)=>(0,O.jsx)("div",{className:r()({[ea]:n&&c>5,[Xe]:c>5}),children:(0,O.jsx)(ra,{name:t.name,uri:t.uri,images:t.images,size:e,LinkComponent:l.LinkComponent,disabled:a,enableI18nRoutes:s,enableI18nAdditionalPages:i},t.id)},`${t.uri}-${c}`)))}),m.length>6&&(0,O.jsx)(c.H,{onClick:d,className:aa,children:(0,O.jsx)(S.Z,{as:"p",variant:"violaBold",children:n?u.R.get("show_less"):u.R.get("mwp.search.artists.all")})})]})};var na=s(35217),ca=s(26972);const oa="EaTxqhHk6J4ecKHwpY5m",da="dUQl9yd5x_1oWk4L0Ntm",ua="xt5C47eHPYNiriMJxGnC",ma=({words:e,onObserve:a,lyricsInView:s})=>{const{ref:i,inView:r}=(0,ca.Wx)({threshold:0}),l=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{s||(l.current=!1)}),[s]),(0,t.useEffect)((()=>{l.current||r&&(a({text:e,outOfView:!1}),l.current=!0)}),[r,a,e]),(0,O.jsx)(S.Z,{ref:i,as:"p",dir:"auto",variant:"ballad",className:ua,children:e})};var ha=s(69664);const ya=({data:e,eventSender:a,playbackId:s,uri:i})=>{const{lyrics:r=[],provider:l,providerLyricsId:n,syncType:c}=e,{ref:o,inView:d}=(0,ca.Wx)({threshold:0}),m=function(e){const{trackUri:a,provider:s,providerLyricsId:i,syncType:r,eventSender:l,playbackId:n}=e,c=(0,t.useRef)(null),[o,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(0),[h,y]=(0,t.useState)(!1),g=(0,t.useMemo)((()=>(0,ha.W)({lyrics_format:"track-page",track_uri:a,provider:s,provider_lyrics_id:i,sync_type:r,playback_id:n})),[s,i,r,a,n]);return(0,t.useEffect)((()=>{d(!1),m(0),y(!1),c.current=null}),[a]),(0,t.useEffect)((()=>{o&&n&&d(!1)}),[n]),(0,t.useEffect)((()=>{o||u>=140&&h&&(l?.send(g),d(!0))}),[u,o,g,l,h]),(0,t.useCallback)((e=>{const{text:a,outOfView:s}=e;a&&a.length>1&&(m((e=>e+a.length)),o||null!==c.current||(c.current=setTimeout((()=>{y(!0)}),1500))),s&&(c.current&&clearTimeout(c.current),c.current=null,m(0))}),[m,o])}({trackUri:i,provider:l,providerLyricsId:n,syncType:c,eventSender:a,playbackId:s});return(0,t.useEffect)((()=>{d||m({outOfView:!0})}),[d,m]),(0,O.jsxs)("div",{className:oa,ref:o,children:[(0,O.jsx)(S.Z,{as:"h2",variant:"canon",semanticColor:"textBase",className:da,children:u.R.get("web-player.lyrics.title")}),r.map((({words:e},a)=>(0,O.jsx)(ma,{onObserve:m,words:e,lyricsInView:d},`lyrics-seo-line-${a}`)))]})};var ga=s(10327),pa=s(55352),xa=s(65804);const ba=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const{data:t}=X({uri:e,imageForLyricsRequest:a,isPlayable:s}),i=(0,xa.vh)(),{isPaused:r,currentTrackUri:l,playbackId:n}=(0,ga.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),pa.a),c=!r&&l===e;return t&&t?.hasLyrics?(0,O.jsx)(ya,{data:t,uri:e,eventSender:i,playbackId:c?n:void 0}):null};var ja=s(57030),va=s(82383);const ka=e=>{const{albumArtists:a,columnCount:s,imageForLyricsRequest:i,isPlayable:l,uri:n}=e,c=s-2,o={"--column-count":s,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,Fe.d4)(va.Ht),m=(0,Te.n)(),{data:h,status:y}=X({uri:n,isAnonymous:d,imageForLyricsRequest:i,isPlayable:l}),g=!!h&&h.hasLyrics&&y!==z.UNAVAILABLE||d,p=(0,Fe.d4)(ja.MU),x=(0,Fe.d4)(ja.NR);return(0,O.jsxs)(t.Suspense,{fallback:null,children:[g&&(0,O.jsx)("div",{className:r()(oe,{[de]:s>5}),style:{...o},"data-testid":"lyrics-container",children:d?(0,O.jsx)(ze,{buttonText:u.R.get("sign_up"),secondaryButtonText:u.R.get("login"),text:u.R.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:na.ie,onSecondaryButtonClick:na.PW}):(0,O.jsx)(ba,{uri:n,imageForLyricsRequest:i,isPlayable:l})}),(0,O.jsx)("div",{className:r()(ne,{[ce]:s>5&&g}),style:{...o},children:(0,O.jsx)(la,{artists:a,LinkComponent:Ye.default,disabled:!m,enableI18nRoutes:p,enableI18nAdditionalPages:x})})]})};var Ra=s(19935),La=s(63174),fa=s(82817),Ca=s(78608),Ia=s(16247),Aa=s(50578),Na=s(34757);const Pa=new Aa.l("internalLinkRecommenderTrack","query","8c3372e8c118eafd4e044b843473266ff1c7b9deb03f730080cfcad8646829e7",null);var wa=s(46570),Ua=s(41057),Ta=s(73575),Sa=s(35919),Ea=s(75108),Oa=s(37576),Da=s(16629),Ba=s(76171),Fa=s(26022),Ma=s(43446),_a=s(82456),qa=s(65980),Za=s(31975),za=s(42956);const Ya="Z9Dr8PkXFtlO8KnnDcxp",$a="Bm0LUMlhVIcF5qusgdUP",Ga="GIyB7JDkRwjtVL6PSBbg",Ka="whTIka0YYAkqhqrs26Wa",Ha=t.memo((function({uri:e,name:a,imgUrl:s,artists:t,isExplicit:i,index:r,albumUri:l,contextUri:n,isPlayable:c,isMOGEFRestricted:o,totalMilliseconds:d,playcount:m}){const{isActive:y,isPlaying:g,triggerPlay:p,togglePlay:x}=(0,_.P)({uri:e},{featureIdentifier:"ilr"}),b=(0,Oa.T)(e),j=(0,Ma.g)(e,c),v=t.map((e=>e.name)).join(u.R.getSeparator()),{badges:k,hasBadges:R}=(0,Da.b)({isMOGEFRestricted:o,downloadAvailability:b,isExplicit:i}),L=t.map((e=>e.name)).join(u.R.getSeparator()),f=(0,Fa.c)();return(0,O.jsx)(Ea.pZ,{value:"row",index:r,children:(0,O.jsx)(wa.h,{menu:(0,O.jsx)(h.P,{uri:e,albumUri:l,artists:t,contextUri:n}),children:(0,O.jsxs)(za.w,{uri:e,contextUri:n,isPlayable:j,onTriggerPlay:(e,a)=>{p({loggingParams:a})},isActive:y,index:r,ariaRowIndex:r,dragMetadata:{name:a,createdBy:v},children:[(0,O.jsxs)(qa.U6,{ariaColIndex:0,children:[(0,O.jsx)(qa.uF,{uri:e,src:s,onClick:(e,a)=>{x({loggingParams:a})},isLocked:!1,isPlaying:g,isActive:y,playAriaLabel:u.R.get("tracklist.a11y.play",a,v)}),(0,O.jsxs)(qa.l1,{children:[(0,O.jsx)(_a.R,{uri:e,enabled:f,className:Ga,children:(0,O.jsx)(qa.pJ,{titleText:a,children:a})}),R&&(0,O.jsxs)(qa.Pe,{children:[k.download&&(0,O.jsx)(Ua._,{}),k.explicit&&(0,O.jsx)(Ta.g,{}),k.nineteen&&(0,O.jsx)(Sa.q,{className:Ka,size:16})]}),(0,O.jsx)(qa.pj,{children:(0,O.jsx)(qa.lw,{artists:t})})]})]}),(0,O.jsx)(qa.oi,{ariaColIndex:1,children:(0,O.jsx)(Za.Y,{playcount:m})}),(0,O.jsxs)(qa.lH,{ariaColIndex:2,children:[(0,O.jsx)(Ba.d,{uri:e}),(0,O.jsx)(qa.Po,{duration:d}),(0,O.jsx)(qa.Y8,{menu:(0,O.jsx)(h.P,{uri:e,albumUri:l,contextUri:n,artists:t}),label:u.R.get("more.label.track",a,L)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var Wa=s(28130),Va=s(62358),Qa=s(58860);const Ja=t.memo((function({subtitle:e,uri:a}){const{data:s}=(i={uri:a,strategy:Ia.N0.ContentOnly},(0,Na.I)(Pa,i,r));var i,r;const l=s?.seoRecommended.items,c=(0,t.useMemo)((()=>l?.slice(0,Math.min(l.length,5))),[l]),o=(0,t.useCallback)((e=>({uri:"uri"in e.data?e.data.uri:""})),[]),d=(0,t.useMemo)((()=>[Va.$C.TITLE_AND_ARTIST,Va.$C.ALBUM,Va.$C.DURATION]),[]),m=(0,t.useCallback)(((e,s)=>{if(!(0,Qa.g1)(e.data))return(0,O.jsx)(t.Fragment,{});const i=e.data;return(0,O.jsx)(Ha,{index:s,contextUri:a,uri:i.uri,name:i.name,totalMilliseconds:i.duration.totalMilliseconds,imgUrl:i.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:i.playability.playable,artists:i.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:i?.albumOfTrack?.uri||"",isExplicit:i.contentRating?.label===Ia.x7.Explicit,isMOGEFRestricted:i.contentRating?.label===Ia.x7.NineteenPlus,playcount:parseInt(i.playcount||"0",10)},`${s}-${i.uri}`)}),[a]);return l?.length?(0,O.jsxs)("div",{className:Ya,children:[(0,O.jsxs)("div",{className:$a,children:[(0,O.jsx)(n.E,{variant:"titleSmall",semanticColor:"textBase",children:u.R.get("playlist.extender.recommended.title")}),(0,O.jsx)(n.E,{variant:"bodySmall",paddingBottom:La.CD,children:e})]}),(0,O.jsx)(Va.S4,{ariaLabel:u.R.get("playlist.extender.recommended.title"),nrTracks:Math.min(l.length,5),rowPlaceholder:Va.qq,tracks:c,renderRow:m,resolveItem:o,columns:d},"internal-link-recommender-track-list")]}):null})),Xa=e=>{const{entityType:a}=e;return(0,O.jsx)(Wa.s,{onError:()=>{(0,Ca.fE)({metric_type:fa.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:a}})},children:(0,O.jsx)(Ja,{...e})})};var es=s(70305),as=s(46202);const ss=({album:e,index:a,artistURI:s})=>(0,O.jsx)(Ea.pZ,{value:"card",index:a,children:(0,O.jsx)(as.R,{index:a,latest:!1,showType:!0,...(0,es.mk)(e,s,e.name)})});var ts=s(67278);const is=({albums:e,artistName:a,artistId:s,artistUri:t,className:i})=>e?(0,O.jsx)(Ea.pZ,{value:"shelf/albums",children:(0,O.jsx)(ts.$,{total:e.totalCount,title:u.R.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,es.Dh)(s)}:discography:${Ia._m.Album.toLowerCase()}`,seeAllLabel:u.R.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,es.Ey)(e.items).map(((e,a)=>(0,O.jsx)(ss,{album:e,index:a,artistURI:t},e.uri)))})}):null;var rs=s(34295);const ls=({artistId:e,className:a,fansAlsoLike:s,title:t})=>(0,O.jsx)(Ea.pZ,{value:"shelf/fans-also-like",children:(0,O.jsx)(ts.$,{total:s.length,title:t??u.R.get("rich-page.fans-also-like"),seeAllUri:`${(0,es.Dh)(e)}:related`,className:a,children:s.map(((e,a)=>(0,O.jsx)(Ea.pZ,{value:"card",index:a,children:(0,O.jsx)(rs.a,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var ns=s(38806);const cs="ERm7dIKbVoqGwPb_lXPH",os=({artistName:e,artistUri:a,headerClassName:s,rowClassName:i,topTracks:r,topTracksTransformer:l,uri:c})=>{const o=(0,t.useMemo)((()=>r?.items.map((e=>l(e,c)))),[r?.items,l,c]),{usePlayContextItem:d}=(0,_.P)({uri:a},{featureIdentifier:"artist"});return o&&o.length>0?(0,O.jsxs)("div",{className:i,children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(n.E,{variant:"bodySmall",className:cs,children:u.R.get("rich-page.popular-tracks")}),(0,O.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:s,children:e})]}),(0,O.jsx)(ns.z,{nrTracks:o.length,initialTracks:o,usePlayContextItem:d})]}):null},ds=({artistName:e,artistId:a,artistUri:s,className:t,releases:i,artistImages:r})=>i?(0,O.jsx)(Ea.pZ,{value:"shelf/releases",children:(0,O.jsx)(ts.$,{total:10,title:u.R.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,es.Dh)(a)}:discography:${Ia._m.Album.toLowerCase()}`,seeAllLabel:u.R.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,listRowHeaderProps:r?{title:e,pretitle:u.R.get("artist-page.popular"),media:(0,ae.h)(r,{desiredSize:48})||""}:null,children:i.items.map(((e,a)=>(0,O.jsx)(ss,{album:e,index:a,artistURI:s},e.uri)))})}):null,us=({artistId:e,artistName:a,artistUri:s,className:t,singles:i})=>i?(0,O.jsx)(Ea.pZ,{value:"shelf/singles-and-eps",children:(0,O.jsx)(ts.$,{total:i.totalCount,title:u.R.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,es.Dh)(e)}:discography:${Ia._m.Single.toLowerCase()}`,seeAllLabel:u.R.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,children:(0,es.Ey)(i.items).map(((e,a)=>(0,O.jsx)(ss,{album:e,index:a,artistURI:s},e.uri)))})}):null;var ms=s(69400),hs=s(76839),ys=s(82220),gs=s(70210);const ps=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),xs=e=>(e||[]).map((e=>e.profile.name)),bs=({uri:e,track:a})=>{const s=(0,Te.n)(),i=(0,hs.V)(),l=(0,ms.W)({type:"locale",uri:e}),d=u.R.getLocaleForTranslation(),x=parseInt(a.playcount||"0",10),{firstArtist:R,otherArtists:L,albumOfTrack:f,duration:C,name:I}=a,A=f?.coverArt,N=f?.copyright.items,P=f?.courtesyLine,{date:w,precision:T}=f?.date?(0,se.mp)(f.date):{date:void 0,precision:void 0},S=A?.extractedColors?.colorRaw.hex,E=(A?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),F={uri:f?.uri||"",name:f?.name||""},M=xs(R.items),Z=xs(L.items),z=ps(R),Y=ps(L),$=[...z,...Y],G=R.items[0],K=a.albumOfTrack,H=K?.playability?.playable,W={artistId:G?.id,artistName:G?.profile?.name,artistUri:G?.uri},V=a.albumOfTrack?.coverArt?.sources,Q=(0,ae.h)(V||void 0,{desiredLabel:"large",desiredSize:600})??V?.[0]?.url??"",[X,ie]=(0,t.useState)(!1),le=(0,t.useCallback)((()=>{ie(!X)}),[X]),ne=L&&L.items.length>5,{spec:ce,logger:oe}=(0,ee.r)(o.createDesktopTrackEventFactory,{data:{uri:e}}),de=a.playability.playable,he=(0,re.J)(e),{togglePlay:fe,isPlaying:Ce,isActive:Ie}=(0,_.P)({uri:he},{featureIdentifier:"track"}),Ae=(0,t.useCallback)((()=>(0,q.rO)({i18n:u.R,trackArtistsList:[...M,...Z].join(u.R.getSeparator()),trackName:a.name,shouldLocalize:l})),[M,Z,l,a.name]),Ne=(0,t.useCallback)(((e,a)=>{oe.logInteraction(ce.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[oe,ce]),Pe=(0,t.useCallback)((()=>{const a=(0,j.$I)({isPlaying:Ce,isActive:Ie,spec:ce.actionBarFactory().playButtonFactory(),logger:oe,uri:e});fe({loggingParams:a})}),[Ie,Ce,oe,ce,fe,e]),we=K?.uri,Ue=(0,t.useMemo)((()=>[...R.items,...L.items].map((e=>({uri:e.uri,name:e.profile.name})))),[R.items,L.items]),Ee=(0,O.jsx)(h.P,{uri:e,albumUri:we,artists:Ue});return(0,O.jsxs)("section",{"data-testid":"track-page",children:[(0,O.jsx)(Ra.Q,{children:Ae()}),(0,O.jsxs)(y.z4,{backgroundColor:S,children:[(0,O.jsxs)(g.h,{children:[(0,O.jsx)(b.D,{size:"medium",onClick:Pe,disabled:!de,isPlaying:Ce,uri:e}),(0,O.jsx)(p.X,{text:I,dragUri:e,dragLabel:I})]}),(0,O.jsx)(m.hy,{menu:Ee,children:(0,O.jsx)(y.KU,{dragUri:e,images:E,name:I,placeholderType:"album"})}),(0,O.jsxs)(y.Y$,{children:[(0,O.jsx)(n.E,{variant:"bodySmallBold",children:u.R.get("song")}),(0,O.jsx)(m.hy,{menu:Ee,children:(0,O.jsx)(y.mm,{dragUri:e,dragLabel:I,children:I})}),(0,O.jsx)(y.tV,{creators:z,releaseDate:w,releaseDatePrecision:T,durationMilliseconds:C.totalMilliseconds,onCreatorClick:Ne,isTrack:!0,album:F,playcount:x})]})]}),(0,O.jsx)(Se,{uri:e,togglePlay:fe,isPlaying:Ce,isActive:Ie,spec:(0,t.useMemo)((()=>ce.actionBarFactory()),[ce]),logger:oe,backgroundColor:S,name:I,isPlayable:de,albumUri:we,artists:Ue}),(0,O.jsxs)(J,{children:[(0,O.jsxs)("div",{className:"contentSpacing",children:[(0,O.jsx)("div",{className:ue,children:(0,O.jsx)(k.E,{render:({columnCount:a})=>(0,O.jsx)(ka,{imageForLyricsRequest:Q,albumArtists:$,columnCount:a,uri:e,isPlayable:de})})}),(0,O.jsx)(Xa,{subtitle:u.R.get("internal-link-recommender.based-on-this-song"),uri:a.uri,entityType:U.c.TRACK}),(0,O.jsx)(os,{artistName:G.profile.name,artistUri:G.uri,headerClassName:ge,rowClassName:ue,topTracks:G.discography.topTracks,topTracksTransformer:ys.fX,uri:a.uri}),(0,O.jsx)(ds,{className:ye,releases:G?.discography?.popularReleasesAlbums,...W}),(0,O.jsx)(is,{albums:G?.discography?.albums,className:ye,...W}),(0,O.jsx)(us,{className:ye,singles:G?.discography?.singles,...W}),L&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:xe,children:L.items.map(((e,a)=>(0,O.jsx)(ds,{className:r()(pe,{[je]:a>4,[ve]:X&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),ne&&(0,O.jsx)(c.H,{onClick:le,className:ke,children:(0,O.jsx)(n.E,{as:"h2",variant:"bodySmallBold",children:X?u.R.get("show_less"):u.R.get("mwp.search.artists.all")})}),(0,O.jsx)(ls,{artistId:G.id,className:r()(ye,{[be]:L.items.length>0}),fansAlsoLike:G.relatedContent.relatedArtists.items,title:u.R.get("artist-page.fansalsolike")})]}),K&&(0,O.jsx)(B,{art:K.coverArt?.sources[0],disabled:!H||!s,LinkComponent:Ye.default,name:K.name,type:K.type,size:D.LARGE,uri:K.uri}),(0,O.jsx)(Le,{richTrack:a})]}),(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsxs)("div",{className:me,children:[w&&(0,O.jsx)(n.E,{as:"p",variant:"bodySmall",className:Re,children:(0,te.rh)((0,te.ad)(w),d,{year:"numeric",month:"long",day:"numeric"},T)}),(0,O.jsx)(v.Z,{copyrights:N||[],courtesyLine:P}),!i&&(0,O.jsx)(Be,{uri:e,imageForLyricsRequest:Q,isPlayable:de})]})})]})]})},js=(0,t.memo)((function(){const{trackId:e=""}=(0,l.g)(),a=(0,d.tR)(e).toURI(),s=(0,gs.J)({uri:a});return s.loading||s.error||"Track"!==s.data?.trackUnion?.__typename?(0,O.jsx)(x.A,{hasError:!s.loading,errorMessage:u.R.get("track-page.error")}):(0,O.jsx)(M.P,{surface:F.u.TRACK,uris:[a,s.data.trackUnion.albumOfTrack?.uri??null],children:(0,O.jsx)(bs,{uri:a,track:s.data.trackUnion})})}))},70210:(e,a,s)=>{s.d(a,{J:()=>l});var t=s(50578),i=s(34757);const r=new t.l("getTrack","query","ae85b52abb74d20a4c331d4143d4772c95f34757bfa8c625474b912b9055b5c0",null),l=(e,a)=>(0,i.I)(r,e,a)}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map