"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{95863:(e,a,s)=>{s.r(a),s.d(a,{default:()=>De});s(1137);var i=s(79474),r=s(85980),l=s(61343),t=s(88514),n=s(66123),o=s(25740),c=s(94080),d=s(20798),u=s(89551),m=s(46202),h=s(2940),g=s(99297),x=s(19935),b=s(4888),j=s(79698),p=s(52842),y=s(81891),f=s(12972),k=s(50578),v=s(34757);const C=new k.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var w=s(55195),R=s(92708),M=s(13274);const U=({albumName:e,albumURI:a})=>{const{data:s}=(i={uri:a},r={gcTime:5*v.i},(0,v.I)(C,i,r));var i,r;const l=s?.albumUnion&&"merch"in s.albumUnion?s?.albumUnion?.merch?.items:[];return l&&l?.length>0?(0,M.jsx)("div",{className:"contentSpacing",children:(0,M.jsx)("div",{className:R.A.albumMerch,children:(0,M.jsx)(w.q,{id:e,uri:a,merchItems:l,merchVariant:"Album page merch items"})})}):null};var I=s(24506),P=s(32449),A=s(51103),N=s(8788),z=s(8516),L=s(6944),S=s(48378),T=s(30020),B=s(52745),_=s(59611),E=s(81153),F=s(35243),D=s(68525),O=s(43083),V=s(14863),q=s(64280),Q=s(54594),H=s(9292),W=s(21066),Z=s(51057),$=s(60764),J=s(85905),X=s(94926),K=s(8661),Y=s(26756),G=s(93841),ee=s(47095),ae=s(59914);const se="album-albumPage-sectionWrapper",ie="zddjxV2lX9ukNM5QXloA",re="lVqlPjQLuQhK2flsxB78",le="O_EguRjsZ4uI1hHamkOA",te="jcaQQxoVnuuhtVwDJU1R",ne="x-album-releasesDropdown",oe="in4OjUTflcsoj9RUpf05",ce="vveb4Rn0dK_r8YUM7L_n",de=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:r,spec:l,logger:t,backgroundColor:n,name:o,artists:c,isPlayable:d,sharingInfo:m}){const x=(0,X.W)(),b=(0,K.n)(),j=(0,D.t)(),p=(0,i.useMemo)((()=>l.actionBarFactory()),[l]),[y,k]=(0,D.A)(e),v=(0,i.useCallback)((()=>{const i=(0,Y.$I)({isPlaying:s,isActive:r,spec:p.playButtonFactory(),logger:t,uri:e});a({loggingParams:i})}),[s,r,a,p,t,e]),C=(0,i.useCallback)((async()=>{let a;const s=p.saveButtonFactory();a=y?s.hitDislike({itemToBeDisliked:e}):s.hitLike({itemToBeLiked:e}),t.logInteraction(a),x({targetUri:e,intent:y?"unsave":"save",type:"click"});try{await k(!y)}catch{}}),[x,e,y,k,p,t]),w=(0,ae.X)(),R=(0,J.j)();return(0,M.jsx)(q.E,{backgroundColor:n,children:(0,M.jsxs)(Q.S,{children:[(0,M.jsx)(f.D,{onClick:v,disabled:!d,isPlaying:s,size:R,uri:e}),w&&(0,M.jsx)(O.r,{spec:p,children:(0,M.jsx)(ee.Y,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:R})}),(0,M.jsx)($.h,{uri:e,action:G.no.SAVE_ALBUM,children:(0,M.jsx)(H.M,{isAdded:!!y,onClick:C,disabled:!b&&!j?.getCapabilities().canModifyOffline,size:R})}),(0,M.jsx)(W.f,{uri:e,isFollowing:!!y,onClick:(a,s)=>(0,Y.Qv)(s,p.downloadButtonFactory(),t,e),onFollow:C,size:R}),(0,M.jsx)(h.bz,{onShow:()=>(0,Y.R2)(p,t),menu:(0,M.jsx)(g.h,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:m}),children:(0,M.jsx)(Z.e,{label:u.R.get("more.label.context",o),size:R})}),(0,M.jsx)("div",{className:ce,children:(0,M.jsx)(E.u,{property:V.mA,renderNewExperience:()=>(0,M.jsx)(F.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var ue=s(74794);const me=864e5,he=365.25*me;var ge=s(47850),xe=s(88202),be=s(69400),je=s(60327),pe=s(82383),ye=s(72232),fe=s(48624),ke=s(11533),ve=s(47177);const Ce="TCmZzqInstJMZjkHgnw3",we="PeNI572tTpqsN23o3QhJ",Re="oUsSfFiifMPXqW0kHjR6",Me="XKvEMQZlPfPncTqiitM5",Ue="GdbPVlmUCW0Q6ZZ0z0wh",Ie="Hu7O5y7x5c7wUYFbnIoS",Pe=i.memo((function(e){const{images:a,title:s,isOpen:r,onClose:l}=e,t=(0,i.useMemo)((()=>(0,ve.g)(a,{desiredSize:1e4})),[a]);return t?(0,M.jsx)(fe.A,{className:Ce,isOpen:r,onRequestClose:l,animation:{modal:{base:Me,afterOpen:Ue,beforeClose:Ie}},animated:!0,children:(0,M.jsxs)("div",{style:{"--image-width":`${t.width}px`,"--image-height":`${t.height}px`},className:we,children:[(0,M.jsx)(ke._,{loading:"eager",alt:s,src:t.url,className:Re}),(0,M.jsx)(ye.H,{onClick:l,semanticColor:"textBase",children:u.R.get("web-player.cover-art-modal.close")})]})}):null}));var Ae=s(63275),Ne=s(19606),ze=s(967);const Le=({releases:e})=>(0,M.jsx)(Ne.W,{children:e.map((e=>(0,M.jsx)(ze.D,{role:"menuitem",to:(0,Ae.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)))});var Se=s(26017),Te=s(16415),Be=s(22033);const _e=i.lazy((()=>s.e(679).then(s.bind(s,40679))));function Ee(e){switch(e){case Te._.Single:return u.R.get("single");case Te._.Ep:return u.R.get("ep");case Te._.Compilation:return u.R.get("compilation");case Te._.Audiobook:return u.R.get("card.tag.audiobook");case Te._.Album:default:return u.R.get("album")}}const Fe=({uri:e,album:a})=>{const s=(0,l.zy)(),{spec:y,logger:k,UBIFragment:v}=(0,B.r)(d.E,{data:{uri:e}}),C=(0,i.useMemo)((()=>y.trackListFactory()),[y]),w=(0,i.useMemo)((()=>y.moreByArtistShelfFactory()),[y]),R=a.moreAlbumsByArtist,z=parseInt(new URLSearchParams((0,l.zy)().search).get("index")||"0",10),L=(0,P.J)(e),{usePlayContextItem:E,togglePlay:F,isPlaying:D,isActive:O}=(0,S.P)({uri:L},{featureIdentifier:"album"}),V=(0,i.useCallback)(((e,a)=>{if(y){const e=y.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});k.logInteraction(e)}}),[k,y]),{isOpen:q,openModal:Q,closeModal:H}=(()=>{const[e,a]=(0,i.useState)(!1);return{isOpen:e,openModal:(0,i.useCallback)((()=>a(!0)),[]),closeModal:(0,i.useCallback)((()=>a(!1)),[])}})(),W=(0,c.NC)(je.WJ1,{loadingValue:!1})?{onClick:Q,ariaLabel:u.R.get("web-player.album.open_coverart_modal")}:{},Z=(0,i.useCallback)((()=>new URLSearchParams(s.search.slice(1)).get("highlight")||""),[s.search]),$=a.uri,J=a.name,X=a.albumType,K=a.release?.date,Y=a.release?.precision,G=a.nrTracks,ee=a.images,ae=a.extractedColors?.colorRaw.hex,ce=a.artists,ye=a.isPlayable,fe=a.isCatalogueRestricted,ke=a.copyright.items,ve=a.courtesyLine,Ce=a.duration.durationMs,we=a.duration.isEstimate,Re=Z(),Me=(0,r.d4)(pe.Ht),Ue=Me.overrides?.locale??u.R.getLocaleForTranslation(),Ie=(0,be.W)({uri:e,type:"locale"}),Ae=(0,T.qc)({albumName:J,albumType:X,albumArtists:ce.map((e=>e.name)).join(u.R.getSeparator()),shouldLocalize:Ie,i18n:u.R});(0,A.z6)(ae||null);const Ne=function(e){return(0,i.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),s=(new Date).getTime()-a.getTime(),i=s%he;return i<3.5*me||i>312552e5?Math.round(s/he):null}return null}),[e])}(a.release),{isCompactMode:ze}=(0,I.an)();return(0,M.jsxs)("section",{className:se,"data-testid":"album-page",children:[(0,M.jsx)(x.Q,{children:Ae}),null!==Ne?(0,M.jsx)(i.Suspense,{fallback:null,children:(0,M.jsx)(_e,{colorLight:a?.extractedColors?.colorLight.hex,colorDark:a?.extractedColors?.colorDark.hex,name:J,years:Ne})}):null,(0,M.jsxs)(b.z4,{backgroundColor:ae,children:[(0,M.jsxs)(j.h,{children:[(0,M.jsx)(f.D,{size:"medium",onClick:()=>F(),disabled:!ye,isPlaying:D,uri:e}),(0,M.jsx)(p.X,{text:J,dragUri:e,dragLabel:J})]}),(0,M.jsx)(h.hy,{menu:(0,M.jsx)(g.h,{uri:a.uri,artistUri:ce?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,M.jsx)(b.KU,{dragUri:$,images:ee,name:J,placeholderType:"album",...W})}),(0,M.jsxs)(b.Y$,{children:[(0,M.jsx)(ge.B,{children:Ee(X)}),(0,M.jsx)(h.hy,{menu:(0,M.jsx)(g.h,{uri:a.uri,artistUri:ce?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,M.jsx)(b.mm,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:b.tw,children:J})}),(0,M.jsx)(b.tV,{creators:ce,onCreatorClick:V,releaseDate:K,releaseDatePrecision:Y,totalItems:G,durationMilliseconds:Ce,isEstimatedDuration:we,hasTracks:!0})]})]}),(0,M.jsx)(de,{backgroundColor:ae,uri:e,togglePlay:F,isPlaying:D,isActive:O,spec:y,logger:k,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),fe?(0,M.jsxs)("div",{className:ie,children:[(0,M.jsx)(t.E,{as:"h2",variant:"bodyMediumBold",className:re,children:u.R.get("windowed.product-album-header")}),(0,M.jsx)("div",{className:le,children:u.R.get("windowed.product-album-description")})]}):null,(0,M.jsxs)("div",{className:"contentSpacing",children:[(0,M.jsx)(v,{spec:C,children:(0,M.jsx)(ue.F,{ariaLabel:J,nrTracks:(0,Be.Y)(a.discs)?a.discs.totalCount+G:G,discs:a.discs,albumUri:$,highlightUri:Re,scrollToIndex:z,usePlayContextItem:E,initalTracks:a.items,isCompactMode:ze})}),(0,M.jsxs)("div",{className:oe,children:[(0,M.jsxs)("div",{children:[K&&(0,M.jsx)(t.E,{as:"p",variant:"bodySmall",children:(0,_.rh)((0,_.ad)(K),Ue,{year:"numeric",month:"long",day:"numeric"},Y)}),(0,M.jsx)(N.Z,{copyrights:ke,courtesyLine:ve})]}),a.releases.items.length>0&&(0,M.jsx)(h.tz,{menu:(0,M.jsx)(Le,{releases:a.releases.items}),children:(e,s,i)=>(0,M.jsxs)("button",{ref:i,className:ne,type:"button",onClick:s,children:[(0,M.jsx)(t.E,{variant:"bodySmall",children:u.R.get("album-page.more-releases",a.releases.items.length)}),e?(0,M.jsx)(n.J,{size:"small"}):(0,M.jsx)(o.y,{size:"small"})]})})]})]}),(0,M.jsx)(U,{albumName:J,albumURI:$}),(0,M.jsx)(M.Fragment,{children:R?.length>0&&(0,M.jsx)("div",{className:"contentSpacing",children:(0,M.jsx)(v,{spec:w,children:(0,M.jsx)(xe.p,{index:0,id:"more-albums",className:te,title:u.R.get("album-page.more-by-artist",ce?.[0]?.name),total:R.length,seeAllUri:`${ce?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:u.R.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:R.map(((e,a)=>(0,M.jsx)(m.R,{index:a,artists:ce,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})})}),(0,M.jsx)(Pe,{title:Ae,isOpen:q,onClose:H,images:ee})]})},De=i.memo((function(){const{albumId:e}=(0,l.g)(),a=`spotify:album:${e}`,{loading:s,error:i,data:r,canLoadOffline:t}=(0,Se.$)(a);return s||!r?(0,M.jsx)(y.A,{hasError:null!==i,loadOffline:t,errorMessage:u.R.get("error.not_found.title.album")}):(0,M.jsx)(L.P,{surface:z.u.ALBUM,uris:[a],children:(0,M.jsx)(Fe,{uri:a,album:r})})}))},51103:(e,a,s)=>{s.d(a,{Hk:()=>r.H,z6:()=>i.z});s(18515);var i=s(4977),r=s(75995)}}]);
//# sourceMappingURL=xpui-routes-album.js.map