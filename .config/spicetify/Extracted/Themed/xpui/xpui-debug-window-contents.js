"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[983],{11130:(e,s,n)=>{n.d(s,{DebugWindowContents:()=>ua});n(62355),n(48117),n(1137);var t=n(79474),a=n(97500),r=n.n(a),l=n(2498),i=n(62219),o=n(77673),c=n(43230),d=n(94080),u=n(23246),m=n(12282),h=n(55959),p=n(59430),v=n(11928),x=n(18331),j=n(36945),g=(n(45689),n(152)),f=n(87323),y=n(11924);const b=(0,f.h)();window.abba={get:async function(e,s){const n=new g.EW((0,y.X)()),t=(await n.getValues(g.kM.fromPartial({}))).pairs;let a={},r="";if(t.abbaOverrides?r=t.abbaOverrides:t.abbaoverrides&&(r=t.abbaoverrides),r)try{a=JSON.parse(r)}catch(e){console.error(`error parsing value=${r}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(a,e))return console.warn(`Abba: Override for ${e} : ${a[e]}`),void setTimeout((()=>s(null,a[e])),0);b.post("sp://abba/v1/flags",{flags:[e]}).then((n=>{const{flags:t=[]}=n,a=t[0]&&t[0].featureName===e&&t[0].cell;s(null,a||null)})).catch((e=>{s(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),b.get("sp://abba/v1/all_flags").then((s=>{const{flags:n=[]}=s,t=n.reduce(((e,s)=>(e[s.featureName]=s.cell,e)),{});e(null,JSON.stringify(t,null,2))})).catch((s=>{e(s)}))},getRequestedFlagNames:function(e){b.get("sp://abba/v1/requested_flag_names").then((s=>{e(null,JSON.stringify(s.sort(),null,2))})).catch((s=>{e(s)}))}};var N=n(72586);const w="rh7v8PDNC0ke2OkkyRhk",C="L6pjHHt_x4tfksfQ4Pem",S="UZcGKrwobJ2tS5Ka06pD",A="Eve7a37F3JB6GI87kh6a",O="Kh0jtEAjRK83Z5A_IZRx";var k=n(13274);const E=()=>{const[e,s]=(0,t.useState)(60),[n,a]=(0,t.useState)("stream"),[r,l]=(0,t.useState)(""),[i,o]=(0,t.useState)({message:"",status:"success"}),[c,d]=(0,t.useState)(!1),g=({message:e,isError:s})=>{o({message:e,status:s?"error":"success"}),d(!0),setTimeout((()=>d(!1)),5e3)};return(0,k.jsxs)("div",{className:w,children:[(0,k.jsx)(u.qb,{colorSet:"error"===i.status?"negative":"brightAccent",showSnackbar:c,children:i.message}),(0,k.jsx)(m.Z,{as:"h1",variant:"forte",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,k.jsx)(m.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Increase Stream Time"}),(0,k.jsxs)(h.g,{label:"Click a tag or enter a number in seconds",children:[(0,k.jsxs)("div",{className:A,children:[(0,k.jsx)(p.v,{colorSet:"positive",onClick:()=>s(60),children:"1 min"}),(0,k.jsx)(p.v,{colorSet:"positive",onClick:()=>s(1200),children:"20 mins"}),(0,k.jsx)(p.v,{colorSet:"positive",onClick:()=>s(3600),children:"1 hour"})]}),(0,k.jsx)("div",{className:O,children:(0,k.jsx)(v.Z,{onChange:e=>s(e.currentTarget.value),placeholder:"seconds",value:e,type:"number",min:0})}),(0,k.jsx)(x.$,{size:"small",onClick:()=>{N.D.increaseStreamTime(e).then((()=>{g({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{g({message:`Error increasing stream time: ${e}`,isError:!0})}))},children:"ADD STREAM TIME"})]}),(0,k.jsx)(m.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Override Country"}),(0,k.jsxs)(h.g,{children:[(0,k.jsx)("div",{className:O,children:(0,k.jsxs)(j.F,{className:O,value:r,onChange:e=>{l(e.currentTarget.value)},children:[(0,k.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,k.jsx)("option",{value:"AU",children:"Australia"}),(0,k.jsx)("option",{value:"BR",children:"Brasil"}),(0,k.jsx)("option",{value:"JP",children:"Japan"}),(0,k.jsx)("option",{value:"SE",children:"Sweden"}),(0,k.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,k.jsx)("option",{value:"US",children:"USA"}),(0,k.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,k.jsx)("option",{value:"",children:"Clear"})]})}),(0,k.jsx)(x.$,{size:"small",onClick:()=>{N.D.overrideCountry(r).then((e=>{0===e.status?g({message:`${r} override successful`,isError:!1}):g({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,k.jsxs)("div",{className:C,children:[(0,k.jsx)("p",{children:"Clear ad in slot"}),(0,k.jsxs)("select",{value:n,onBlur:()=>{},onChange:e=>{a(e.target.value)},children:[(0,k.jsx)("option",{value:"stream",children:"STREAM"}),(0,k.jsx)("option",{value:"billboard",children:"BILLBOARD OVERLAY"}),(0,k.jsx)("option",{value:"promotedsong",children:"PROMOTED SONG"}),(0,k.jsx)("option",{value:"hpto",children:"HPTO"}),(0,k.jsx)("option",{value:"leaderboard",children:"LEADERBOARD"})]}),(0,k.jsx)("button",{className:S,onClick:()=>{N.D.clearSlot(n)},children:"Clear slot"}),(0,k.jsx)("p",{children:"Trigger ad in slot"}),(0,k.jsxs)("select",{value:n,onBlur:()=>{},onChange:e=>{a(e.target.value)},children:[(0,k.jsx)("option",{value:"stream",children:"STREAM"}),(0,k.jsx)("option",{value:"billboard",children:"BILLBOARD OVERLAY"}),(0,k.jsx)("option",{value:"promotedsong",children:"PROMOTED SONG"}),(0,k.jsx)("option",{value:"hpto",children:"HPTO"}),(0,k.jsx)("option",{value:"leaderboard",children:"LEADERBOARD"})]}),(0,k.jsx)("button",{className:S,onClick:()=>{N.D.triggerSlot(n)},children:"Trigger slot"})]}),(0,k.jsx)("button",{className:S,onClick:()=>{N.D.queueVideoAd()},children:"Queue Video Ad"})]})};var I=n(85980),P=n(74649),R=n(84064);const T="scaF2wOGtuiU5UBKJrGa",D="PjVBb0nlrIUasTrrFgCx",_="MjtdwpkzFFhhmzeyzOy2",L="uVClWczmJLRR5jfAENGP",M=[{label:"Production",value:"prod"},{label:"Development",value:"dev"}],V=()=>{const e=(0,I.wA)(),s=(0,I.d4)((e=>e.inAppMessaging.env)),n=(0,I.d4)((e=>e.inAppMessaging.message)),[a,r]=(0,t.useState)(""),[l,i]=(0,t.useState)(""),[o,c]=(0,t.useState)(!1);(0,t.useEffect)((()=>{n&&o&&c(!1)}),[n,o]);const d=!n&&o;return(0,k.jsx)("div",{className:T,children:(0,k.jsxs)("div",{className:D,children:[(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingEnv",children:"Mode (endpoint):"})}),(0,k.jsx)(P.C,{dir:"auto",value:s,id:"desktop.settings.inAppMessagingEnv",onSelect:function(s){"prod"!==s&&"dev"!==s||e((0,R.$h)(s))},children:M.map((({label:e,value:s})=>(0,k.jsx)("option",{value:s,children:e},s)))}),(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingCreativeId",children:"Creative Id:"})}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:_,placeholder:"(eg. 12123434)",id:"desktop.settings.inAppMessagingCreativeId",name:"Creative Id",type:"text",value:a,onChange:function(e){r(e.target.value),c(!1)}})}),(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingAppUri",children:"URI for Dynamic Content (optional):"})}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:_,placeholder:"(eg. spotify:artist:123)",id:"desktop.settings.inAppMessagingAppUri",name:"App Uri",type:"text",value:l,onChange:function(e){i(e.target.value),c(!1)}})}),(0,k.jsx)("div",{}),(0,k.jsx)("div",{}),(0,k.jsx)("div",{children:(0,k.jsx)(x.$,{colorSet:"invertedLight",onClick:function(s){s.preventDefault(),e((0,R.yR)(a,l)),c(!1),window.setTimeout((()=>{c(!0)}),1e3)},children:"Get Preview"})}),d&&(0,k.jsx)("div",{className:L,children:"No Messsage found"})]})})};var B=n(69986),U=n(19340),F=n(46022),H=n(62773),z=n(35066),$=n(89296),J=n(98816),G=n(20386),Y=n(7476),K=n(38599),q=n(85521),W=n(79029),Z=n(32741);const Q={tableContainer:"Oq75N3dIIFwLLxqhrTGw",collapsed:"Y1mIc_urBEFpW0IaPvTg",tableTitle:"A3f7b8Ykb8QaTHv9e6DV",tableToggle:"cN2yet80TrzvhUOVyNyJ",table:"w3RCrOKYvq_0htC6zhzd",tableHead:"viEusJyR3z4ijG1P7ji6",rowHeader:"qM20Y4j0mkUnh1qSFmb3",rowName:"PMJ_WnnsgiBd1d9yFIGf",rowValue:"zyDs7IcK71IYTnn2YfNJ",rowActions:"ofGd7aEjrX3mgVu0DbO8",propertyDescription:"WoXbezM6uoI1BhVP_Huq",rowAction:"zmgvPs6K0W0mLJ3xX1Uv",rowControl:"dPVfdc5bb3lNG2ybyp2a"},X=({title:e,titleExtra:s,rows:n,cols:a,canCollapse:l=!1,isCollapsedInitially:i=!1,renderHead:o=!1,renderRow:c})=>{const[d,u]=(0,t.useState)(!!l&&i);return(0,k.jsxs)(Y.K,{className:r()(Q.tableContainer,{[Q.collapsed]:d}),children:[e?(0,k.jsxs)("div",{className:Q.tableTitle,onClick:()=>{l&&u(!d)},children:[l?(0,k.jsx)("button",{className:Q.tableToggle,children:d?(0,k.jsx)(K.V,{size:"small"}):(0,k.jsx)(q.r,{size:"small"})}):null,(0,k.jsx)("h3",{children:e}),s]}):null,(0,k.jsxs)(W.X,{className:Q.table,children:[(0,k.jsx)("colgroup",{children:a.map(((e,s)=>(0,k.jsx)("col",{width:e.width,className:e.className},s)))}),o?(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{children:a.map(((e,s)=>(0,k.jsx)(Z.M,{className:Q.tableHead,children:e.name},s)))})}):null,(0,k.jsx)("tbody",{children:Array.isArray(n)?n.map((e=>c?c(e,a):null)):n})]})]})};function ee(){const e=(0,B.ox)();return(0,t.useMemo)((()=>e?new e.Function("value","if (value) { navigator.clipboard.writeText(value) }"):()=>{}),[e])}const se="ipHwQurO5v9UGSq71YmY",ne=()=>{const e=ee(),s=(0,G.Y)(),n=s.token?.accessToken??"Not authorized",t=new Date(s.token?.accessTokenExpirationTimestampMs??0);return(0,k.jsx)("div",{className:se,children:(0,k.jsx)(X,{title:"Authorization",rows:[{name:"Token",value:n},{name:"Expires At",value:t.toLocaleString()},{name:"Retry Attempt",value:s.retryAttempt?.toString()??"N/A"},{name:"Retry At",value:s.retryAt?.toLocaleString()??"N/A"}],cols:[{width:"30%"},{},{width:"16px"}],renderRow:({name:s,value:n})=>(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,highlight:!0,children:s}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,align:"right",children:n}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>e(n),children:(0,k.jsx)(J._,{size:"small"})})})]})})})};var te=n(51385);const ae="WT_NZ6JEU_dK03UPUjQm",re=({name:e,value:s})=>{const n=ee();return(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,highlight:!0,children:e}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>n(s),children:(0,k.jsx)(J._,{size:"small"})})})]})},le=({device:e})=>(0,k.jsx)(X,{title:e.name,rows:[{name:"Device",value:e?.name},{name:"Identifier",value:e.id},{name:"Type",value:e.type},{name:"Group",value:e.isGroup.toString()},{name:"Local",value:e.isLocal.toString()},{name:"Active",value:e.isActive.toString()},{name:"Connecting",value:e.isConnecting.toString()},{name:"Disabled",value:e.isDisabled.toString()},{name:"Volume",value:e.volume.toString()},{name:"HiFi",value:e.hifiSupport.deviceSupported.toString()}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(re,{...e}),canCollapse:!0,isCollapsedInitially:!0}),ie=()=>{const e=(0,te.T)(),s=e.devices;return(0,k.jsxs)("div",{className:ae,children:[(0,k.jsx)(X,{title:"Connect",rows:(0,k.jsx)(re,{name:"Status",value:e.connectionStatus}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),s.map((e=>(0,k.jsx)(le,{device:e},e.id)))]})};var oe=n(88514),ce=n(94398),de=n(11629),ue=n(55130),me=n(66999),he=n(89796),pe=n(34739),ve=n(93770),xe=n(5260),je=n(66144),ge=n(260),fe=n(40860),ye=n(48088),be=n(97903),Ne=n(34902),we=n(67970),Ce=n(36528);const Se=({view:e,className:s})=>{const n=(0,t.useCallback)((s=>{(0,fe.TS)(e,s.nativeEvent,"search-panel")&&s.preventDefault()}),[e]),a=(0,t.useCallback)((s=>{e.dispatch({effects:xe.Ri.of(new xe.L0({search:s}))})}),[e]),r=(0,t.useCallback)((()=>{(0,xe.jO)(e)}),[e]),l=(0,t.useRef)(null);return(0,t.useEffect)((()=>{e.dispatch({effects:xe.Ri.of(new xe.L0({search:""}))}),l.current?.select()}),[e]),(0,k.jsx)("div",{className:s,children:(0,k.jsx)(Ne.E,{iconLeading:(0,k.jsx)(we.C,{}),iconTrailing:(0,k.jsx)(Ce.M,{onClick:()=>r()}),children:(0,k.jsx)(v.Z,{ref:l,onKeyDown:e=>n(e),onChange:e=>a(e.currentTarget.value)})})})};var Ae=n(62615);n(68607);function Oe(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function ke(e,s,n=[]){let t=0;for(const a of Object.getOwnPropertyNames(e))s(e,a,n)?t++:Oe(e[a])&&(t+=ke(e[a],s,[a,...n]));return t}function Ee(e,s){return void 0===e[s]&&(e[s]={},!0)}function Ie(e,s){return!(!Array.isArray(e[s])||0!==e[s].length)&&(e[s]=[{}],!0)}function Pe(e,s){return!(!Array.isArray(e[s])||1!==e[s].length||!Oe(e[s][0])||0!==Object.getOwnPropertyNames(e[s][0]).length)&&(e[s]=[],!0)}function Re(e,s){return!(!Oe(e[s])||0!==Object.getOwnPropertyNames(e[s]).length)&&(e[s]=void 0,!0)}function Te(e,s,n){return!(!n.some((e=>/policy/i.test(e)))||!1!==e[s])&&(delete e[s],!0)}function De(e,s,n={}){let t=0;do{t=ke(s=e.fromPartial(s),Ee),t+=ke(s,Ie)}while(t>0);return ke(s,Re),ke(s,Pe),!0===n.cleanPolicies&&ke(s,Te),s}const _e=["spotify:artist:5INjqkS1o8h1imAzPqGZBb","spotify:album:79dL7FLiJFOO0EoehUHQBv","spotify:track:6K4t31amVTZDgR3sKmwUJJ","spotify:show:1OLcQdw2PFDPG1jo3s0wbp","spotify:episode:0VpyIy8Srg5IKQdRAbDDH1"],Le=Object.values(Ae.UH).filter((e=>"string"==typeof e)).map((e=>({name:e,value:(0,Ae.SP)(e)})));function Me(e,s){let n=0;const t=[];if(s.type.is("["))s.parent();else if(s.type.is("Property")){if(!s.firstChild())return[];t.unshift(e.sliceDoc(s.from+1,s.to-1)),s.parent()}for(;s.parent()&&!s.type.is("JsonText");){if(s.type.is("Array"))t.unshift("[]");else if(s.type.is("Property")){if(!s.firstChild())break;t.unshift(e.sliceDoc(s.from+1,s.to-1)),s.parent()}if(++n>1e4)break}return t}function Ve(e,s){for(const n of s)if("[]"===n){if(!Array.isArray(e)||0===e.length)return null;e=e[0]}else Object.hasOwn(e,n)&&(e=e[n]);return e}function Be(e={}){return(0,ue.yU)({activateOnTyping:!1,override:[s=>{const n=(0,pe.mv)(s.state).cursorAt(s.pos,-1);if(n.type.is("{")||n.type.is("Object")){const t=Me(s.state,n),a=function(e,s){return Object.getOwnPropertyNames(Ve(e,s))}(e,t);return{from:s.pos,options:a.map((e=>({type:"text",label:e,apply:`"${e}"`})))}}if(n.type.is("[")||n.type.is("Array")){const t=Me(s.state,n),a=Ve(e,t);return Array.isArray(a)&&Oe(a[0])?{from:s.pos,options:[{type:"text",label:"{ ... }",apply:JSON.stringify(a[0]),boost:1},{type:"text",label:"{}",boost:0}]}:/extension/i.test(t[t.length-1])?{from:s.pos,options:Le.map((({name:e,value:s})=>({type:"constant",label:e,apply:`${s}`})))}:{from:s.pos,options:_e.map((e=>({type:"text",label:`"${e}"`})))}}if(n.type.is("Property")){const t=Me(s.state,n),a=function(e,s){const n=Ve(e,s);return void 0===n?"null":Array.isArray(n)?"array":typeof n}(e,t),r=[];if("boolean"===a)r.push({type:"keyword",label:"true",boost:1}),r.push({type:"keyword",label:"false",boost:0});else if("null"===a)r.push({type:"keyword",label:"null",boost:1}),r.push({label:"{}",apply:"{}",boost:0});else if("string"===a){r.push({label:'""'});for(const e of _e)r.push({label:`"${e}"`})}else if("number"===a)if(/extension/i.test(t[t.length-1]))for(const{name:e,value:s}of Le)r.push({type:"constant",label:e,apply:`${s}`});else r.push({label:"0",apply:"0"}),r.push({label:"10",apply:"10"}),r.push({label:"100",apply:"100"});else"object"===a?r.push({label:"{}",apply:"{}"}):"array"===a&&r.push({label:"[]",apply:"[]"});return{from:s.pos,options:r}}return null}]})}const Ue=[ge.bM,(0,pe.y9)(ge.kS),(0,fe.$K)(),(0,fe.dz)(),(0,fe.Wu)(),(0,fe.VH)(),je.$t.allowMultipleSelections.of(!0),fe.w4.of([...me.pw,...me.cL,...ue.OO,...xe.Eo,me.Yc]),(0,xe.$P)({top:!0,createPanel:e=>{const s=e.dom.ownerDocument.createElement("div");return(0,ye.H)(s).render((0,k.jsx)(be.ID,{target:e.dom.ownerDocument.head,children:(0,k.jsx)(Se,{view:e})})),{dom:s,top:!0}}}),(0,pe.Lv)(),(0,he.Pq)()],Fe=[...Ue,(0,me.b6)(),(0,ve.bu)((0,he.cp)()),(0,pe.WD)(),(0,pe.SG)(),(0,ue.wm)()],He=[...Ue,je.$t.readOnly.of(!0)],ze=new je.xx,$e=({readOnly:e=!1,onChange:s,onDiagnostics:n,editorRef:a,className:r})=>{const l=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const t=new fe.Lz({parent:l.current,extensions:[...e?He:Fe,ze.of(Be({})),fe.Lz.updateListener.of((e=>{e.docChanged&&s?.(e.state.doc.toString());for(const s of e.transactions)for(const e of s.effects)e.is(ve._k)&&n?.(e.value)}))]});return void 0!==a&&(a.current=t),()=>{t.destroy()}}),[e,s,n,a]),(0,k.jsx)("div",{className:r,ref:l})};function Je({readOnly:e,className:s,onChange:n,onDiagnostics:a}){const r=(0,t.useRef)(),l=(0,t.useRef)(n),i=(0,t.useRef)(a);l.current=n,i.current=a;const o=(0,t.useCallback)((()=>{const e=r.current;return void 0!==e?e.state.doc.toString():null}),[]),c=(0,t.useCallback)((e=>{const s=r.current;void 0!==s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:e}})}),[]),d=(0,t.useCallback)((e=>{const s=r.current;void 0!==s&&s.dispatch({effects:ze.reconfigure(Be(e))})}),[]),u=(0,t.useCallback)((e=>{l?.current?.(e)}),[]),m=(0,t.useCallback)((e=>{i?.current?.(e)}),[]);return{Editor:(0,k.jsx)($e,{editorRef:r,readOnly:e,className:s,onChange:u,onDiagnostics:m}),getContent:o,setContent:c,setReference:d}}var Ge=n(60230),Ye=n(44951),Ke=n(90066),qe=n(62701),We=n(72701),Ze=n(28150),Qe=n(23101),Xe=n(45839),es=n(3262),ss=n(29549),ns=n(62171),ts=n(42581),as=n(48561),rs=n(24685),ls=n(44021),is=n(86553),os=n(80650),cs=n(58769),ds=n(38021),us=n(13379),ms=n(76),hs=n(96122),ps=n(76005),vs=n(71499),xs=n(74617),js=n(78992),gs=n(57620),fs=n(32718),ys=n(94876),bs=n(8617),Ns=n(58787),ws=n(58813),Cs=n(81932),Ss=n(73945),As=n(53703),Os=n(15772),ks=n(48300),Es=n(73579),Is=n(2273),Ps=n(13955),Rs=n(10744),Ts=n(58321),Ds=n(25380);const _s=[Ge.B,Ye.ve,Ke.Pc,qe.BM,We.CJ,Ze.NB,Qe.uC,Xe.RI,es.UF,ss.FY,ns.B3,ts.Dt,as.s,rs.Xk,ls.Yl,is.r,os.pt,cs.MI,ds.di,us.BO,ms.Pm,hs.Ww,ps._w,vs.rM,vs.A5,vs.qM,xs.hN,js.NI,gs.lb,fs.xo,ys.IU,g.EW,bs.oW,Ns.Gy,ws.LN,Cs.HG,Ss.Ag,As._,Os.y,ks.A,Es.xV,Is.hA,Ae.sp,Ps.GD,Rs.to1,Rs.hm7,Rs.hb0,Rs.Bl$,Rs.ZxE,Ts.aA,Ds.FZ].concat([]);function Ls(e){return JSON.parse(e,((e,s)=>null===s?void 0:s))}function Ms(e){return JSON.stringify(e,((e,s)=>void 0===s?null:"bigint"==typeof s?s.toString():s),2)}function Vs(){const{serviceMap:e,serviceNames:s}=(0,t.useMemo)((()=>{const e=function(e){return _s.sort(((e,s)=>e.SERVICE_ID.localeCompare(s.SERVICE_ID))).reduce(((s,n)=>(s[n.SERVICE_ID]={methods:n.METHODS,client:new n(e)},s)),{})}((0,y.X)());return{serviceMap:e,serviceNames:Object.keys(e)}}),[]),[n,a]=(0,t.useState)(s[0]),r=e[n].methods,l=e[n].client,i=Object.keys(r),[o,c]=(0,t.useState)(i[0]),d=r[o].requestType,u=r[o].isStreaming,m=l[o],h=(0,t.useCallback)(((s,n)=>{const t=s??Object.keys(e)[0],r=e[t].methods,l=n??Object.keys(r)[0];a(t),c(l)}),[e,a,c]),p=(0,t.useMemo)((()=>Ms(De(d,{},{cleanPolicies:!0}))),[d]),v=(0,t.useMemo)((()=>De(d,{})),[d]),x=(0,t.useCallback)((e=>{try{return Ms(De(d,Ls(e),{cleanPolicies:!0}))}catch(s){return e}}),[d]),j=(0,t.useCallback)((async(e,s)=>{const n=d.fromPartial(Ls(e));if(u)return m.call(l,n,(e=>{s(Ms(e))}));const t=await m.call(l,n);return s(Ms(t)),null}),[l,u,d,m]);return{services:s,methods:i,service:n,method:o,client:l,message:d,call:j,jsonReference:v,jsonString:p,prettify:x,update:h}}const Bs="gbcTqus4yhTHlzm2IETQ",Us="EHmr8C7kxkrYGyC7o3JO",Fs="JAHwAteJRJtwtczneeVN",Hs="nqOWuGeqweWJBgtLeohb",zs="tU2LEDqdrQPq3oDlpEOv",$s="gkuNSEZ7uAKsay3cfbMR",Js="nbQvEMLCjLpv4xnKSOIt",Gs=()=>{const{services:e,methods:s,service:n,method:a,call:r,jsonReference:l,jsonString:i,prettify:o,update:c}=Vs(),d=(0,t.useRef)(null),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)([]),v=h.length>0,{Editor:x,setContent:j,getContent:g,setReference:f}=Je({className:Js,onDiagnostics:e=>p(e)}),{Editor:y,setContent:b}=Je({className:Js,readOnly:!0}),N=(0,t.useCallback)((()=>{null!==d.current&&(d.current.cancel(),d.current=null,m(!1))}),[m]),w=(0,t.useCallback)((async()=>{N();const e=await r(g()??"{}",(e=>{b(e)}));null!==e&&(d.current=e,m(!0))}),[r,N,g,b]),C=(0,t.useCallback)((async()=>{const e=o(g()??"{}");j(e)}),[o,g,j]);(0,t.useEffect)((()=>{f(l),j(i),b(""),N()}),[f,l,j,i,b,N]);const S=[{label:"Core",options:e.filter((e=>-1===e.indexOf("desktop"))).map((e=>({label:e,value:e})))},{label:"Desktop",options:e.filter((e=>-1!==e.indexOf("desktop"))).map((e=>({label:e,value:e})))}],A=s.map((e=>({label:e,value:e})));return(0,k.jsxs)("div",{className:Bs,children:[(0,k.jsxs)("div",{className:Us,children:[(0,k.jsx)(oe.E,{as:"p",variant:"bodyMedium",children:"Endpoint"}),(0,k.jsx)(de.Ay,{value:{label:n,value:n},options:S,onChange:e=>{c(e?.value??void 0)},styles:{menuList:s=>({...s,minHeight:`min(60vh, ${50*e.length}px)`})}}),(0,k.jsx)(de.Ay,{value:{label:a,value:a},options:A,onChange:e=>c(n,e?.value??void 0),styles:{menuList:e=>({...e,minHeight:`min(60vh, ${50*s.length}px)`})}})]}),(0,k.jsxs)("div",{className:Fs,children:[(0,k.jsxs)("div",{className:zs,children:[(0,k.jsx)(oe.E,{as:"p",variant:"bodyMedium",children:"Request"}),(0,k.jsx)(ce.n,{className:$s,size:"small",disabled:v,onClick:C,children:"Prettify"}),(0,k.jsx)(ce.n,{className:$s,size:"small",disabled:v,onClick:u?N:w,children:u?"Cancel":"Send"})]}),x]}),(0,k.jsxs)("div",{className:Hs,children:[(0,k.jsx)("div",{className:zs,children:(0,k.jsx)(oe.E,{as:"p",variant:"bodyMedium",children:"Response"})}),y]})]})};var Ys=n(3043),Ks=n(58296),qs=n(51465),Ws=n(25779),Zs=n(76498),Qs=n(89909),Xs=n(64754),en=n(88903),sn=n(6734),nn=n(80472);var tn=n(88378),an=n(8092);var rn=n(30520),ln=n(10327),on=n(89744);const cn="bFE0oGWgZ40KJHjcBj12",dn="nzbIAA5MqUSD0hIKUuHg",un="hksYFxAm48XqAEbpcukQ",mn="UnO1u4VJB0B6pTtqWh1n",hn="xlSWVFMQmYmRK34yiPOA",pn="oKgZ0g8at59jN8nf8Bee",vn="Nodut0kqaRIc93iGqbbP",xn="dUIum8rPR6Msq9wot5ky",jn="QHO5pYBkfWBn6qyAh9dp";const gn=({size:e,ranges:s})=>{if(0===s.length)return(0,k.jsx)("div",{className:un,children:(0,k.jsx)("div",{className:mn})});const n=`linear-gradient(90deg, ${s.map((s=>{const n=100*s.fromByte/e,t=100*s.toByte/e;return`transparent ${n}%, ${Ys.pfM} ${n}%, ${Ys.pfM} ${t}%, transparent ${t}%`})).join(", ")})`;return(0,k.jsx)("div",{className:un,children:(0,k.jsx)("div",{className:mn,style:{background:n}})})},fn=({item:e,file:s})=>{const n=(0,rn.K)(),t=ee(),a=(function(e){let s,n,t=0;if(0===e.length)return t;for(s=0;s<e.length;s++)n=e.charCodeAt(s),t=(t<<5)-t+n,t|=0;return t}(`${s.format}${s.bitrate}${s.formatEnum}`)+180)%360;return(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,highlight:!0,children:(0,k.jsxs)("div",{className:hn,style:{background:`linear-gradient(180deg, hsl(${a}, 60%, 30%), hsl(${a}, 40%, 70%))`},children:[(0,k.jsx)("span",{className:pn,children:s.format}),(0,k.jsx)("span",{className:vn,children:yn(s)})]})}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,children:(0,k.jsxs)("div",{className:dn,children:[s.fileId,(0,k.jsx)(gn,{size:s.byteSize,ranges:s.byteRanges})]})}),(0,k.jsxs)($.n,{className:Q.rowActions,children:[(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>{n.play({uri:"spotify:internal:fileplayback",pages:[{items:[{...e,provider:"context",metadata:{"media.manifest":JSON.stringify({id:s.fileId,bitrate:s.bitrate,format:s.formatEnum,encryption:"aes"})}}]}]},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,k.jsx)(Ks.A,{size:"small"})}),(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>{t(s.fileId)},children:(0,k.jsx)(J._,{size:"small"})})]})]})};function yn(e){switch(e.formatEnum){case 16:return"16-bit";case 22:return"24-bit";default:return bn(e.bitrate,1e3,"k")}}function bn(e=void 0,s=1,n=""){if(void 0!==e&&-1!==e)return"string"==typeof e&&(e=Number.parseInt(e,10)),`${(Number(e)/s).toLocaleString("en",{maximumFractionDigits:10})}${n}`}function Nn(e=void 0){return!0===e?"Yes":"No"}function wn(e=void 0){if(void 0!==e)return(0,on.f)(Number(e))}const Cn=({name:e,value:s})=>{const n=ee();return(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,highlight:!0,children:e}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>n(s),children:(0,k.jsx)(J._,{size:"small"})})})]})},Sn=({terminalType:e,transportType:s,isDefaultDevice:n})=>{const t=n?"essentialPositive":"essentialBase",a=[];switch(e){case Ss.FI.TERMINAL_TYPE_SPEAKERS:a.push((0,k.jsx)(qs.r,{semanticColor:t,size:"small"}));break;case Ss.FI.TERMINAL_TYPE_HEADPHONES:a.push((0,k.jsx)(Ws.r,{semanticColor:t,size:"small"}));break;case Ss.FI.TERMINAL_TYPE_DISPLAY_DEVICE:a.push((0,k.jsx)(Zs.I,{semanticColor:t,size:"small"}))}switch(s){case Ss.Yg.TRANSPORT_TYPE_BUILT_IN:case Ss.Yg.TRANSPORT_TYPE_VIRTUAL:break;case Ss.Yg.TRANSPORT_TYPE_USB:a.push((0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{position:"relative",top:"3px",width:16,height:16,fill:(0,Qs.oj)(t)},children:(0,k.jsx)("path",{d:"m7.792.312-1.533 2.3A.25.25 0 0 0 6.467 3H7.5v7.319a2.5 2.5 0 0 0-.515-.298L5.909 9.56A1.5 1.5 0 0 1 5 8.18v-.266a1.5 1.5 0 1 0-1 0v.266a2.5 2.5 0 0 0 1.515 2.298l1.076.461a1.5 1.5 0 0 1 .888 1.129 2.001 2.001 0 1 0 1.021-.006v-.902a1.5 1.5 0 0 1 .756-1.303l1.484-.848A2.5 2.5 0 0 0 11.995 7h.755a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h.741a1.5 1.5 0 0 1-.747 1.142L8.76 8.99a2.584 2.584 0 0 0-.26.17V3h1.033a.25.25 0 0 0 .208-.389L8.208.312a.25.25 0 0 0-.416 0Z"})}));break;case Ss.Yg.TRANSPORT_TYPE_BLUETOOTH:a.push((0,k.jsx)(Xs.C,{semanticColor:t,size:"small"}));break;case Ss.Yg.TRANSPORT_TYPE_DISPLAY_DEVICE:a.push((0,k.jsx)(Zs.I,{semanticColor:t,size:"small"}))}return 0===a.length&&a.push((0,k.jsx)(en.N,{semanticColor:t,size:"small"})),(0,k.jsx)(k.Fragment,{children:a})},An=({name:e,id:s,isDefaultDevice:n,terminalType:t,terminalTypeRaw:a,transportType:r,transportTypeRaw:l})=>{const i=ee();return(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsxs)($.n,{className:Q.rowName,highlight:!0,children:[(0,k.jsx)(Sn,{terminalType:t,transportType:r,isDefaultDevice:n})," ",e]}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,children:s}),(0,k.jsx)($.n,{className:Q.rowValue,children:a}),(0,k.jsx)($.n,{className:Q.rowValue,children:l}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>i(s),children:(0,k.jsx)(J._,{size:"small"})})})]})},On=()=>{const e=(0,ln.o)((e=>e?.item??null)),s=function(){const[e,s]=(0,t.useState)(null),n=(0,nn.a)();return(0,t.useEffect)((()=>{let e=!0;return n.getPlaybackInfo().then((n=>{e&&s(n)})),()=>{e=!1}}),[n]),(0,an.F)(tn._.INFO,(({data:e})=>{s(e)})),e}(),n=function(e=null,s=null){const[n,a]=(0,t.useState)(null),r=(0,nn.a)();return(0,t.useEffect)((()=>{let n=!0,t=null;if(null===e)a(null);else{const l=async()=>{const s=await r.getFiles(e);n&&a(s)};l(),null!==s&&(t=window.setInterval(l,s))}return()=>{n=!1,null!==t&&window.clearInterval(t)}}),[r,e,s]),n}(e?.uri,500),a=(0,rn.K)(),[r,l]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const e=(0,y.X)(),s=new Ss.Ag(e).getAudioOutputDevices({},(e=>{l(e.devices.sort(((e,s)=>e.isDefaultDevice?-1:s.isDefaultDevice?1:e.name.localeCompare(s.name))))}));return()=>{s.cancel()}}),[]),null===e?(0,k.jsx)("div",{className:cn,children:"Nothing is currently playing."}):(0,k.jsxs)("div",{className:cn,children:[(0,k.jsxs)("div",{className:xn,children:[(0,k.jsx)(oe.E,{variant:"bodySmallBold",children:"Forced shuffle"}),(0,k.jsx)(sn.l,{id:"forced-shuffe",value:a.getForcedShuffle(),onSelected:e=>{a.setForcedShuffle(e)}})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:jn,onClick:()=>{a.play({uri:"invalid_context_uri"},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,k.jsx)("span",{children:"Clear context"})})}),(0,k.jsx)(X,{title:"Devices",rows:r,cols:[{name:"Name",width:"30%"},{name:"ID"},{name:"Terminal"},{name:"Transport"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(An,{...e}),canCollapse:!0}),(0,k.jsx)(X,{title:"Details",rows:[{name:"url"===s?.fileType?"URL":"File ID",value:s?.fileId},{name:"Type",value:s?.fileType},{name:"Codec",value:s?.codecName},{name:"Bitrate",value:bn(s?.fileBitrate,1e3,"k")},{name:"Strategy",value:s?.strategy},{name:"Target Bitrate",value:bn(s?.targetBitrate,1e3,"k")},{name:"Advisted Bitrate",value:bn(s?.advisedBitrate,1e3,"k")},{name:"Target File Available",value:Nn(s?.targetFileAvailable)},{name:"Duration (hh:mm)",value:wn(s?.lengthMs)},{name:"Duration (ms)",value:bn(s?.lengthMs,1," ms")},{name:"Speed",value:bn(s?.playbackSpeed)},{name:"Gain Adjustment",value:bn(s?.gainAdjustment)},{name:"Loudness",value:s?.hasLoudness?bn(s?.loudness):void 0}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(Cn,{...e}),canCollapse:!0}),(0,k.jsx)(X,{title:"Files",rows:n??[],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:s=>(0,k.jsx)(fn,{item:e,file:s},s.fileId),canCollapse:!0,isCollapsedInitially:!0})]})};var kn=n(12892),En=n(9516),In=n(9818),Pn=n(50124);function Rn(e,s){const n=(0,Pn.Q)();(0,t.useEffect)((()=>{const t=n.getEvents();return t.addListener(e,s),()=>{t.removeListener(e,s)}}),[e,s,n])}var Tn=n(6697),Dn=n(39137),_n=n(72033);const Ln="X2I_RYWYpxMLnNlZS4pC",Mn="SeONzyUTUcSX69dLCXjf",Vn="a6zsfAU_4iY1od9MSoF4",Bn=({name:e,value:s})=>{const n=ee();return(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,highlight:!0,children:e}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>n(s),children:(0,k.jsx)(J._,{size:"small"})})})]})},Un=()=>{const e=(()=>{const e=(0,Pn.Q)(),[s,n]=(0,t.useState)(e.getSubscriptions()),a=(0,t.useCallback)((()=>{n(e.getSubscriptions())}),[e,n]);return Rn(In.K.SUBSCRIBE,a),Rn(In.K.CANCEL,a),Rn(In.K.REFRESH,a),s})(),s=ee(),n=Object.entries((0,Dn.$)(e,(e=>`${e.ident}${e.isPrefix?"*":""}`)));return(0,k.jsx)(X,{title:"Subscriptions",rows:n,cols:[{name:"Ident"},{name:"Actions",width:"16px"}],renderRow:([e,n])=>(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsxs)($.n,{className:Q.rowValue,truncate:!0,children:[e," (",n.length,")"]}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>s(e),children:(0,k.jsx)(J._,{size:"small"})})})]},e),canCollapse:!0})};function Fn(e){if(e.ident.endsWith("/json"))return!0;if(0===e.payloads.length)return!1;const s=(0,Tn.dI)(e.payloads[0]);return s.length>0&&"{"===s[0]}const Hn=({message:e})=>{const[s,n]=(0,t.useState)(!1),{Editor:a,setContent:r}=Je({readOnly:!0});return(0,t.useEffect)((()=>{if(0!==e.payloads.length)if(Fn(e)){const s=JSON.parse((0,Tn.dI)(e.payloads[0]));r(JSON.stringify(s,void 0,2))}else{const s=(0,Tn.U5)(e.payloads[0]);r(JSON.stringify(s,void 0,2))}}),[e,r]),(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,children:new Date(e.timestamp).toLocaleString()}),(0,k.jsx)($.n,{className:Q.rowName,children:e.ident}),(0,k.jsxs)($.n,{className:Q.rowName,children:[(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>n(!s),children:(0,k.jsx)(kn.W,{size:"small"})}),(0,k.jsx)(_n.M,{isOpen:s,className:Vn,onRequestClose:()=>n(!1),shouldCloseOnEsc:!0,shouldCloseOnBackdropClick:!0,animated:!0,children:a})]})]})},zn=()=>{const e=(0,Pn.Q)(),[s,n]=(0,t.useState)(0),[a,r]=(0,t.useState)(!0);Rn(In.K.MESSAGE,(()=>{n(s+1)}));const l=a?e.getMessages().filter(Fn):e.getMessages();return(0,k.jsx)(X,{title:"Messages",titleExtra:(0,k.jsxs)("div",{className:Mn,children:[(0,k.jsx)(En.c,{id:"json-only",size:"small",checked:a,onChange:()=>r(!a)}),(0,k.jsx)(oe.E,{as:"label",htmlFor:"json-only",variant:"marginal",children:"JSON only"})]}),rows:l,cols:[{name:"Time",width:"200px"},{name:"Ident"},{name:"Payload",width:"16px"}],renderRow:(e,s)=>(0,k.jsx)(Hn,{message:e},`${s}-${e.ident}-${e.timestamp}`),canCollapse:!0})},$n=()=>{const e=(()=>{const e=(0,Pn.Q)(),[s,n]=(0,t.useState)(null);(0,t.useEffect)((()=>{e.getConnectionId().then((e=>n(e)))}),[e,n]);const a=(0,t.useCallback)((e=>n(e.data.connectionId)),[n]);return Rn(In.K.CONNECTION,a),s})();return(0,k.jsxs)("div",{className:Ln,children:[(0,k.jsx)(X,{title:"PubSub",rows:(0,k.jsx)(Bn,{name:"Connection ID",value:e??"-"}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),(0,k.jsx)(Un,{}),(0,k.jsx)(zn,{})]})};var Jn=n(98678),Gn=n(42847),Yn=n(9081),Kn=n(40048),qn=n(85878),Wn=n(28506),Zn=n(99970),Qn=n(2578),Xn=n(83909),et=n(8773),st=n(49036),nt=n(41324),tt=n(13761),at=n(96568),rt=n(43166);const lt=36e5;const it="HnpguQ3rtX44hdThdwy9",ot="y1gsL5scUuLOArVrFYRl",ct="Ni7focuLC626smvmOnLP",dt="W5wjtyjHTJPGX5j7_WOp",ut="gbwwwTt68IMGNnwRJ7x7",mt=({property:e,value:s,onOverride:n,isOverridden:t})=>{if("int"===e.type||"internal"===e.type)throw Error("Invalid property type for dropdown!");const a="bool"===e.type?["true","false"]:e.values;return(0,k.jsx)(j.F,{id:`${e.name}-dropdown`,value:(s??e.default).toString(),onChange:s=>{var t;n(e.name,(t=s.currentTarget.value,"bool"===e.type?"true"===t:t))},className:r()({[dt]:t}),children:a.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))})},ht=({property:e,value:s,onOverride:n,isOverridden:a})=>{if("int"!==e.type)throw Error("Invalid property type for dropdown!");const[l,i]=(0,t.useState)(s??e.default),o=(0,Jn.YQ)((s=>{n(e.name,s)}),500);return(0,k.jsx)(v.Z,{type:"number",min:e.lower,max:e.upper,value:l,onChange:e=>{i(e.currentTarget.value),o(Number.parseInt(e.currentTarget.value,10))},className:r()({[dt]:a})})},pt=({property:e,localValue:s,remoteValue:n,experimentUrl:t,isRemoteUserSpecificOverride:a,onOverride:r,filter:l})=>{const i=s!==n,o=e.default.toString(),c=n?.toString();let d=(t||o!==c?c:null)??null;return d&&t&&(d=(0,k.jsxs)("a",{href:t,target:"_blank",className:ut,children:[c,a&&(0,k.jsx)(Gn.o,{size:"small"})]}),a&&(d=(0,k.jsx)(Kn.Zp,{label:"This value comes from a user-specific override in the linked experiment.",children:d}))),(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsxs)($.n,{className:Q.rowName,title:e.name,highlight:!0,children:[(0,k.jsx)("a",{href:`https://sites.spotify.net/s/hyperlink?path=property-experiments&property=${e.name}`,rel:"noopener noreferrer",target:"_blank",children:l?(0,k.jsx)(Xn.M,{searchWords:[l??""],textToHighlight:e.name}):e.name}),(0,k.jsx)("div",{className:Q.propertyDescription,children:e.description})]}),(0,k.jsx)($.n,{className:Q.rowValue,children:o}),(0,k.jsx)($.n,{className:Q.rowValue,children:d}),(0,k.jsx)($.n,{className:Q.rowValue,children:"bool"===e.type||"enum"===e.type?(0,k.jsx)(mt,{property:e,value:s,onOverride:r,isOverridden:i}):"int"===e.type?(0,k.jsx)(ht,{property:e,value:s,onOverride:r,isOverridden:i}):null})]})},vt="debugPanelRemoteConfigLastChangedAtByPropertyName",xt=({properties:e,localConfiguration:s,remoteConfiguration:n,setOverrides:a,clearOverrides:r})=>{const{filter:l}=(0,t.useContext)(et.gM),i=(0,U.qg)(),o=()=>{const e=i.getItem(vt);return e instanceof Wn.m||e instanceof Zn.Y?{}:e},c=(e,s)=>{a(Yn.Vk.fromJSON({[e]:s})),i.setItem(vt,{...o(),[e]:Date.now()})},d=(0,t.useRef)(o()),u=e.sort(((e,s)=>(d.current[s.name]??0)-(d.current[e.name]??0)||e.name.localeCompare(s.name))),m=function(){const e=(0,rt.d)(),s=(0,tt.k)(),n=(0,at.C)()?.username,a=(0,t.useMemo)((()=>Yn.mA.getPropertySetId({clientId:e.remote_config_client_id},(0,Yn.v6)(),[])),[e.remote_config_client_id]),r=(0,t.useMemo)((()=>{if(!e||!s.data||!n)return null;const t="web-player"===e.remote_config_client_id||"1"===s.data.employee;return{data:{platform:"WEB",clientId:e.remote_config_client_id,country:s.data.country,propertySetKey:a,clientVersion:e.event_sender_context_information?.client_version_string??"",installationId:e.event_sender_context_information?.installation_id??"",oauthClientId:e.event_sender_context_information?.client_id??"",employee:t,catalogue:s.data.catalogue,originPlatform:e.app_platform,originVersion:e.os_version??"",userName:n}}}),[n,e,s.data,a]),{data:l}=(0,st.I)({queryKey:["traceback-config"],queryFn:()=>(0,nt.V)().request("https://remote-configuration-resolver.spotify.net/debug/traceback-config",{method:"POST",responseType:"json",headers:{"content-type":"application/json"},payload:JSON.stringify(r)}).then((e=>{const s=e.body;return Object.fromEntries(s.data.map((e=>[e.name,e])))})),staleTime:5e3,gcTime:lt,refetchInterval:lt,refetchOnWindowFocus:!1,enabled:!!r});return l??{}}();return(0,k.jsxs)("div",{className:ot,children:[(0,k.jsxs)("div",{className:ct,children:[(0,k.jsx)(ce.n,{size:"small",onClick:()=>{r(),i.clearItem(vt)},children:"Clear local overrides"}),(0,k.jsx)(Qn.S,{placeholder:"Find",alwaysExpanded:!0})]}),(0,k.jsx)(Y.K,{children:(0,k.jsxs)(W.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{})]}),(0,k.jsxs)("tbody",{children:[(0,k.jsxs)(z.H,{children:[(0,k.jsx)(Z.M,{className:Q.rowHeader,children:"Name"}),(0,k.jsx)(Z.M,{className:Q.rowHeader,children:"Default"}),(0,k.jsx)(Z.M,{className:Q.rowHeader,children:"Remote"}),(0,k.jsx)(Z.M,{className:Q.rowHeader,children:"Local"})]}),u.filter((e=>-1!==e.name.toLowerCase().indexOf(l.toLowerCase()))).map((e=>(0,k.jsx)(pt,{property:e,localValue:s.getValue(e.name),remoteValue:n.getValue(e.name),experimentUrl:m?.[e.name]?.experimentRef?.experimentUrl,isRemoteUserSpecificOverride:m?.[e.name]?.isOverride??!1,onOverride:c,filter:l},e.name)))]})]})})]})},jt=()=>{const e=[...(0,Yn.v6)()],{localConfiguration:s,remoteConfiguration:n,setOverrides:t,clearOverrides:a}=(0,qn.g)();return(0,k.jsx)("div",{className:it,children:(0,k.jsx)(et.si,{uri:"spotify:internal:debug:remote-config-properties",children:(0,k.jsx)(xt,{properties:e,localConfiguration:s,remoteConfiguration:n,setOverrides:t,clearOverrides:a})})})};var gt=n(61343),ft=n(63275);const yt="mHtMWLOMN_lZh6Eq1lBe",bt="MNRz4Pg1lZNyfjDZ3N6M",Nt=()=>{const e=(0,gt.zy)(),s=(0,gt.Zp)(),n=e=>{const n=(0,ft.o_)(e);n&&s(n.toURLPath(!0),{state:{preventMoveFocus:!0}})},t=(0,ft.o_)(e.pathname);return(0,k.jsxs)("div",{className:yt,children:[(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=new FormData(e.target).get("navigateTo").toString(),t=new URL(s,"https://open.spotify.com");t.hostname&&t.pathname?n(t.pathname):n(s)},className:bt,children:[(0,k.jsx)("label",{htmlFor:"navigate-input",children:"Navigate to"}),(0,k.jsx)(oe.E,{variant:"bodySmall",as:"input",style:{color:Ys.Ql9},name:"navigateTo",id:"navigate-input",type:"text",placeholder:"ex. /search/nirvana",onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.stopPropagation()}})]}),(0,k.jsx)("h2",{children:"Current location:"}),(0,k.jsxs)("ul",{children:[(0,k.jsxs)("li",{children:["Location: ",e.pathname]}),e.search&&(0,k.jsxs)("li",{children:["Search params: ?",e.search]}),e.hash&&(0,k.jsxs)("li",{children:["Hash params: #",e.hash]}),t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("li",{children:["URL: ",t.toURL()]}),(0,k.jsxs)("li",{children:["URI: ",t.toURI()]})]}):(0,k.jsx)("li",{children:"Not parseable as a Spotify URI!"}),(0,k.jsxs)("li",{children:["Location state: ",(0,k.jsx)("pre",{children:JSON.stringify(e.state,null,2)})]})]})]})};var wt=n(47405),Ct=n(36848),St=n(79339),At=n(1164),Ot=n(63174),kt=n(85235),Et=n(95109),It=n(87846),Pt=n(75675),Rt=function(e){return e.IPL="IN_PERSON",e.RGS="REMOTE",e}(Rt||{});var Tt=n(40129),Dt=n(72232),_t=n(69049);function Lt({obj:e}){return(0,k.jsx)(W.X,{children:(0,k.jsx)("tbody",{children:Object.entries(e).map((e=>(0,k.jsx)(Mt,{name:e[0],value:e[1]},e[0])))})})}function Mt({name:e,value:s}){const n=ee();let t;return"string"==typeof s||"number"==typeof s?t=s:"boolean"==typeof s?t=(0,k.jsx)(Tt.X,{defaultChecked:s,isActive:!1,onClick:e=>{e.preventDefault()}}):"object"==typeof s&&(t=(0,k.jsx)(Lt,{obj:s})),(0,k.jsxs)(z.H,{hover:!0,children:[(0,k.jsx)($.n,{className:Q.rowName,highlight:!0,children:e}),(0,k.jsx)($.n,{className:Q.rowValue,truncate:!0,align:"right",children:t}),(0,k.jsx)($.n,{className:Q.rowActions,children:(0,k.jsx)("button",{className:Q.rowAction,onClick:()=>{void 0!==s&&n("object"==typeof s?JSON.stringify(s):s.toString())},children:(0,k.jsx)(J._,{size:"small"})})})]})}const Vt=[{title:"Current Session",Component:()=>{const{currentSession:e,refreshCurrentSession:s}=(0,Pt.D)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Dt.H,{iconOnly:_t.H,onClick:()=>{s()}}),(0,k.jsx)(Y.K,{children:e&&(0,k.jsxs)(W.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{width:"16px"})]}),(0,k.jsx)("tbody",{children:Object.entries(e).map((e=>(0,k.jsx)(Mt,{name:e[0],value:e[1]},e[0])))})]})})]})}},{title:"Create New Session",Component:()=>{const{createSession:e}=(0,Pt.D)(),[s,n]=(0,t.useState)(null),[a,r]=(0,t.useState)(Rt.IPL),l=(0,I.wA)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:"Create a new session as your current user (does nothing if you already have a session)"}),(0,k.jsxs)("div",{className:Q.rowControl,children:[(0,k.jsxs)(P.C,{id:"sessionTypeDropdown",value:a,onSelect:e=>{switch(e){case Rt.IPL:r(Rt.IPL);break;case Rt.RGS:r(Rt.RGS);break;default:r(Rt.IPL)}},children:[(0,k.jsx)("option",{value:Rt.IPL,children:Rt.IPL},Rt.IPL),(0,k.jsx)("option",{value:Rt.RGS,children:Rt.RGS},Rt.RGS)]}),(0,k.jsx)(x.$,{onClick:async s=>{s.preventDefault();const t=await e();n(t)},children:"Create"})]}),(0,k.jsx)(ce.n,{onClick:()=>{l((0,Et.A9)(It.EL.INVITE))},style:{marginTop:Ot.WG},children:"Open invitation modal"}),null!==s&&(0,k.jsx)(kt.h,{value:JSON.stringify(s,null,2),readOnly:!0})]})}},{title:"Leave Current Session",Component:()=>{const{leaveSession:e,currentSession:s}=(0,Pt.D)(),[n,a]=(0,t.useState)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:Q.rowName,children:"Leave your current session"}),(0,k.jsxs)("div",{className:Q.rowControl,children:[(0,k.jsx)(v.Z,{value:s?.sessionId??"",readOnly:!0}),(0,k.jsx)(x.$,{onClick:async n=>{if(n.preventDefault(),!s)return;const t=await e();a(t)},children:"Leave"})]}),null!==n&&(0,k.jsx)(kt.h,{value:JSON.stringify(n,null,2),readOnly:!0})]})}},{title:"Delete Current Session",Component:()=>{const{currentSession:e,deleteSession:s}=(0,Pt.D)(),[n,a]=(0,t.useState)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:Q.rowName,children:"Delete your current session"}),(0,k.jsxs)("div",{className:Q.rowControl,children:[(0,k.jsx)(v.Z,{value:e?.sessionId??"",readOnly:!0}),(0,k.jsx)(x.$,{onClick:async n=>{if(n.preventDefault(),!e)return;const t=await s();a(t)},children:"Delete"})]}),null!==n&&(0,k.jsx)(kt.h,{value:JSON.stringify(n,null,2),readOnly:!0})]})}},{title:"Join Session as Guest",Component:()=>{const[e,s]=(0,t.useState)(""),n=(0,I.wA)(),a=(0,gt.Zp)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:Q.rowName,children:"Join somebody else's session (paste join token or join URI)"}),(0,k.jsxs)("div",{className:Q.rowControl,children:[(0,k.jsx)(v.Z,{value:e,onChange:e=>s(e.currentTarget.value)}),(0,k.jsx)(x.$,{onClick:async s=>{s.preventDefault();const t=(0,ft.o_)(e);t&&(0,ft.cr)(t)?a(t.toURLPath(!0)):n((0,Et.A9)(It.EL.JOIN,e))},children:"Join"})]})]})}}],Bt=()=>{const[e,s]=(0,t.useState)(-1);return(0,k.jsxs)("div",{className:yt,children:[(0,k.jsx)("h1",{children:"Social Connect!"}),(0,k.jsx)(wt.n,{children:Vt.map(((n,t)=>(0,k.jsxs)(Ct.A,{children:[(0,k.jsx)(St.J,{className:Q.rowHeader,onClick:n=>{n.preventDefault(),s(t===e?-1:t)},isExpanded:t===e,children:n.title}),(0,k.jsx)(At.u,{isExpanded:t===e,children:n.Component&&(0,k.jsx)(n.Component,{})})]},`${t}-item`)))})]})};var Ut=n(14957);const Ft="EpKDeW2JglvI1Jul9PDh",Ht="g2miUZeGB9MKVvwZBLXH",zt=()=>{const{value:e,setValue:s,clearStoredKeyValue:n,clearSessionStorage:t}=(0,Ut.useSessionStorage)("eligibility"),{value:a,setValue:r,clearStoredKeyValue:l}=(0,Ut.useSessionStorage)("datetime");return(0,k.jsxs)("div",{className:Ft,children:[(0,k.jsx)("h1",{children:"Premium Page Debug"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"Override Eligiiblity"}),(0,k.jsxs)("select",{className:Ht,value:e,onChange:e=>s(e.target.value),children:[(0,k.jsx)("option",{}),(0,k.jsx)("option",{value:"INTRO_ELIGIBLE",children:"INTRO_ELIGIBLE"}),(0,k.jsx)("option",{value:"NON_INTRO_ELIGIBLE",children:"NON_INTRO_ELIGIBLE"}),(0,k.jsx)("option",{value:"WINBACK",children:"WINBACK"})]}),(0,k.jsx)(x.$,{className:Ft,size:"small",onClick:()=>n("eligibility"),children:"Remove Eligiblity Override"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"Override Date"}),(0,k.jsx)("input",{className:Ht,type:"datetime-local",value:a,onChange:e=>r(e.target.value)}),(0,k.jsx)(x.$,{size:"small",onClick:()=>l("datetime"),children:"Remove Date/Time Override"})]}),(0,k.jsx)(x.$,{size:"small",onClick:t,children:"Remove All Overrides"})]})};var $t=n(60327),Jt=n(50474),Gt=n(90348),Yt=n(61561),Kt=n(495),qt=n(50578);n(34757);const Wt=new qt.l("lookupDebug","query","ace48d394bcb9dbf8d0fd07b246f2cceab838a096df70d95a1d072f1cdb2676b",null);var Zt=n(65440),Qt=n(33840);const Xt="u52EO0zzXPDFTTlWPw5O",ea="xj_2z64kLq0lRP2TaIXN";function sa(e){return Boolean(e)}function na(e){return(0,Zt.yr)(e)}const ta=()=>{const{request:e}=(0,t.useContext)(Gt.jH),[s,n]=(0,Kt.x)(Qt.P,[]),[a,r]=(0,t.useState)(""),l=async()=>{if(!function(e){const s=(0,ft.o_)(e);return!(!s||(0,ft.Z0)(s)||s?.id===ft.NQ.COLLECTION||!(!s||(0,ft._T)(s)||(0,ft.ec)(s)||(0,ft.gH)(s)||(0,ft.AP)(s)||(0,ft.U_)(s)||(0,ft.WB)(s)||(0,ft.nu)(s)))}(a))return;const t=await(0,Yt.c)(e,Wt,{uris:[a]}),r=t?.data?.lookup.map(na).filter(sa)||[];n(r.concat(s))};return(0,k.jsxs)("div",{className:Xt,children:[(0,k.jsx)("h1",{children:"Home"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{children:"Shortcuts override"}),(0,k.jsxs)(h.g,{label:"Entity URI to add",labelFor:"shortcut_to_add",children:[(0,k.jsx)(v.Z,{id:"shortcut_to_add",type:"text",placeholder:"spotify:episode:123123",value:a,onChange:e=>r(e.currentTarget.value)}),(0,k.jsxs)(Jt.N,{children:["Right now we only allow: Artist, Album, Audiobook, Podcast, Track, User, Playlist, Episode and Chapter.",(0,k.jsx)("br",{})," For more info check the HomeV2ShortcutsShelf logic."]})]}),(0,k.jsx)(x.$,{size:"small",className:ea,disabled:0===a.length,onClick:()=>{l()},children:"Add to Shortcuts"}),(0,k.jsx)(x.$,{size:"small",className:ea,onClick:()=>{n([])},children:"Clear all overrides"})]})]})};var aa=n(93041);const ra="wjncHEmBUc7V8RZYdENw",la="uyHngn_fJez61BsFl3tA",ia="J2KhtXbDovVMDOMzv1Jy",oa="h5nLocSUS3w2NB53IdWQ",ca="debugWindowActiveTabGroup",da="debugWindowActiveTabIndex",ua=()=>{const e=(0,nn.a)().getCapabilities().canGetFiles,s=(0,F.M)(),n=(0,B.ZY)(),a=(0,d.NC)($t.PH);(0,t.useEffect)((()=>{n&&(n.title="Spotify Debug Window")}),[n]);const u=(0,t.useMemo)((()=>Object.fromEntries(Object.entries({Page:[null].filter(H.P),Authorization:[{label:"Access Token",Panel:ne}],Playback:[e?{label:"Playback",Panel:On}:null,{label:"Connect",Panel:ie},s?{label:"Social Connect",Panel:Bt}:null].filter(H.P),"Data Fetching":[{label:"Esperanto",Panel:Gs},{label:"PubSub",Panel:$n},null].filter(H.P),UI:[{label:"Routing",Panel:Nt}].filter(H.P),Other:[{label:"Remote Config",Panel:jt},{label:"Ads",Panel:E},{label:"In-App Messaging",Panel:V},{label:"Your DJ",Panel:aa.fW},{label:"Home",Panel:ta},{label:"Premium Page",Panel:zt}].filter(H.P)}).filter((([e,s])=>s.length>0)))),[e,s]),m=Object.keys(u),h=(0,U.qg)(),p=h.getItem(ca),v="string"==typeof p&&p in u?p:m[0],[x,j]=(0,t.useState)(v),g=h.getItem(da),f="number"==typeof g&&g in u[x]?g:0,[y,b]=(0,t.useState)(f),N=u[x][y].Panel;return(0,k.jsx)("div",{className:r()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":a}),children:(0,k.jsxs)("div",{className:ra,children:[(0,k.jsx)(l.V,{className:la,children:(0,k.jsx)(i.r,{flexMobile:!0,children:m.map((e=>(0,k.jsxs)(t.Fragment,{children:[(0,k.jsx)(o.D,{children:e}),u[e].map(((s,n)=>(0,k.jsx)(c.a,{active:x===e&&y===n,label:s.label,onClick:()=>{j(e),h.setItem(ca,e),b(n),h.setItem(da,n)},className:ia,children:s.label},s.label)))]},e)))})}),(0,k.jsx)("div",{className:oa,children:(0,k.jsx)(N,{})})]})})}},96568:(e,s,n)=>{n.d(s,{C:()=>r});n(1137);var t=n(85980),a=n(25973);const r=()=>{const e=(0,t.d4)((e=>e.session?.user));return e?{type:a.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:s,height:n})=>({url:e,width:s||void 0,height:n||void 0})))}:null}}}]);
//# sourceMappingURL=xpui-debug-window-contents.js.map