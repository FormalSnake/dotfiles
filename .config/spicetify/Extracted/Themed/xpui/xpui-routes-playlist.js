"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3878],{10455:(e,i,a)=>{a.d(i,{j:()=>d});var n=a(50959),t=a(44250),l=a(93709),s=a(48439),r=a(11527);const d=n.memo((function({uri:e,size:i=l.q.md,className:a,onClick:d,canDownload:o}){const[c,m]=(0,t.Z)(e),u=(0,s.o)(),k=(0,n.useCallback)((()=>{u({targetUri:e,intent:c?"unsave":"save",type:"click"}),m(!c)}),[u,e,c,m]);return(0,r.jsx)(l.o,{className:a,isFollowing:c,onFollow:k,onClick:d,uri:e,size:i,canDownload:o})}))},85258:(e,i,a)=>{a.d(i,{T:()=>u});var n=a(50959),t=a(82187),l=a.n(t),s=a(73798),r=a(10992),d=a(44680),o=a(69260);const c="pvGZ831aNzHTQMZ8CA_u";var m=a(11527);const u=(0,n.memo)((function({onClick:e=(()=>{}),size:i,className:a,uri:t,sharingInfo:u,interactionData:k,ariaLabel:p=r.ag.get("mwp.list.item.share")}){const{onCopyLink:v}=(0,o.y)({sharingInfo:u,uri:t,interactionData:k}),y=(0,n.useCallback)((()=>{v(),e()}),[e,v]);return(0,m.jsx)(d.E,{ariaLabel:p,size:i,onClick:y,className:l()(c,a),icon:s.M,condensed:!0})}))},68279:(e,i,a)=>{a.r(i),a.d(i,{ThisIsTourCard:()=>c,default:()=>c,useThisisPlaylistExtensionQuery:()=>k});var n=a(97018),t=a(81909),l=a(10992),s=a(44288),r=a(81085),d=a(34806),o=a(11527);const c=e=>{const{artistImageUrl:i,artistName:a,artistConcertsUri:c,spec:m}=e,u=(0,r.$P)(),k=(0,r.Wi)(m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}));return i&&a&&c?(0,o.jsxs)("section",{ref:k,className:"contentSpacing",children:[(0,o.jsx)(n.x,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,o.jsx)("div",{className:d.Z.cards,children:(0,o.jsxs)("div",{className:d.Z.tourCard,"data-testid":"on-tour-card",children:[(0,o.jsx)("img",{className:d.Z.cardImage,src:i,alt:""}),(0,o.jsxs)("div",{className:d.Z.cardContent,children:[(0,o.jsx)(n.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:d.Z.subtitle,children:l.ag.get("concerts_on_tour")}),(0,o.jsx)(n.x,{as:"h1",variant:"bodyMediumBold",className:d.Z.title,semanticColor:"textBase",children:a}),(0,o.jsx)(s.default,{to:c,className:d.Z.cardLink,children:(0,o.jsx)(t.P,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:c});u.logInteraction(e)},className:d.Z.cardButton,children:l.ag.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(27642);const u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"concerts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConcertV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"startDateIsoString"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"location"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"city"}},{kind:"Field",name:{kind:"Name",value:"country"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]},k=(e,i)=>(0,m.a)(u,e,i)},30340:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Ut});a(56743),a(98205),a(8627),a(11900),a(20143),a(15706),a(7242),a(63961),a(21164),a(57483),a(38910);var n=a(50959),t=a(35869),l=a(28150),s=a(97018),r=a(12737),d=a(56044),o=a(55147),c=a(10992),m=a(64221),u=(a(20761),a(90618)),k=a(11527);const p=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),v=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:l,logoUrl:r,advertiserName:d,creativeId:o,lineItemId:m})=>{const v=(0,t.I0)(),[y,g]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(v((0,u.Vw)()),v((0,u.kh)(p("event_viewed",o,m))),()=>{v((0,u.AG)())})),[v,o,m]),(0,k.jsxs)("div",{className:"sponsor-container",children:[(0,k.jsx)(s.x,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:c.ag.get("playlist.presented_by",d)}),(0,k.jsxs)("div",{className:"sponsor-logo",children:[(0,k.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{v((0,u.kh)(p("event_clicked",o,m))),g(!0)},children:(0,k.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:d,"data-ta-id":"sponsor-logo"})}),(0,k.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),a&&(0,k.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),y&&(0,k.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,u.fd)(e))}),[i,e,a]),a?(0,k.jsx)("div",{children:(0,k.jsx)(v,{...a})}):null},g=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,u.z8)())}),[i,a]);const s=l||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return s?(0,k.jsx)(y,{playlistUri:e}):null};var S=a(5189),h=a(39189),N=a(2005),x=a(95264),b=a(44250);const f="hOOwEKqNuXrNvOCB1SgZ",C="csEdkIN9z2LjJIuZraqz",F=({uri:e})=>{const[i,a]=(0,b.Z)(e),t=(0,l.s0)(),r=(0,n.useCallback)((()=>{a(!1),t("/",{replace:!0})}),[t,a]);return(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)(N.l,{size:"xxlarge"}),(0,k.jsxs)("div",{className:C,children:[(0,k.jsx)(s.x,{as:"p",variant:"titleSmall",children:c.ag.get("forbidden-page.title")}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("forbidden-page.description")})]}),i&&(0,k.jsx)(x.D,{colorSet:"invertedLight",onClick:r,children:c.ag.get("remove_from_your_library")})]})};var j=a(30760),T=a(42964),I=a(51769),R=a(99634),A=a(1949),E=a(49558),D=a(68823),L=a(68279),P=a(71707),_=a(93019),w=a(37959),U=a(53571),V=a(23055),M=a(92718);const O=e=>e.seoExperiment,B=(0,V.P1)(O,(e=>e?.uri)),Z=((0,V.P1)(O,(e=>e?.[M.p.TRACK])),(0,V.P1)(O,(e=>e?.[M.p.ALBUM])),(0,V.P1)(O,(e=>({...e?.[M.p.PLAYLISTV2],...e?.[M.p.PLAYLIST]}))));var K=a(48439),W=a(73745),z=a(72162),Q=a(81037),H=a(47200),J=a(10732),q=a(27816),G=a(38914),Y=a(73196),X=a(82298),$=a(53885);const ee=({context:e,shouldFire:i})=>{const a=(0,J.g)(),l=(0,t.v9)($.n5),s=(0,t.v9)(X.rZ),d=(0,r.W6)(Y.kye),o=(0,q.s4)(),c=(0,n.useCallback)((()=>{const i={category:"rpp_exposures",action:"playlist_page_visit",variant:d,label:"dwp",os:(0,G.y)(),context:e,country:l?s:"",sp_t:(0,H.vQ)("sp_t")};a?o.send((0,Q.k)(i)):o.send((0,z.x)(i))}),[d,e,l,s,a,o]);(0,n.useEffect)((()=>{i&&c()}),[c,i])};var ie=a(25025),ae=a(41570),ne=a(86343),te=a(30386),le=a(67415),se=a(27642),re=a(79287),de=a(56850),oe=a(96833),ce=a(66634),me=a(78880);var ue=a(41496),ke=a(64518),pe=a(22516),ve=a(81085),ye=a(82869),ge=a(3839);a(36480);let Se=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),he=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var Ne=a(80700),xe=a(75390);const be=[],fe=(e,i)=>{const a=[];let n=e,t=i;for(;n>0;){const i=Math.ceil(n/t);a.push({first:e-n,nrItems:i}),n-=i,t--}return a},Ce=e=>{const{itemsInNode:i,renderItem:a,renderPlaceholder:n,estimatedHeight:t,scrollNodeRef:l,nrRowsOverscan:s=10,nrInitialInView:r=0,firstIndex:d,heights:o,fanOut:c=2}=e,{ref:m,inView:u,entry:p}=(0,xe.YD)({root:l.current,rootMargin:s*t+"px 0px",initialInView:d<r}),v=`${d}-${i}`;o[v]??=t*i,p?.boundingClientRect?.height&&(o[v]=p.boundingClientRect.height);const y=o[v];return 0===i?null:u?1===i?(0,k.jsx)("div",{ref:m,role:"presentation",children:a(d,y)}):(0,k.jsx)("div",{ref:m,role:"presentation",children:fe(i,c).map((({first:i,nrItems:a},n)=>(0,k.jsx)(Ce,{...e,itemsInNode:a,firstIndex:d+i},n)))}):(0,k.jsx)("div",{ref:m,role:"presentation",children:n(`${y}px`)})},Fe=e=>{const i=(e=>{const i=be.find((i=>i.key===e))?.heights||{},a=(0,n.useCallback)((i=>{if(!e)return;const a=be.findIndex((i=>i.key===e));-1===a?be.push({key:e,heights:i}):(be[a].heights=i,be.push(be.splice(a,1)[0])),be.length>10&&be.shift()}),[e]),t=(0,n.useRef)({...i});return(0,n.useEffect)((()=>()=>{a(t.current)}),[a]),t.current})(e.persistanceKey);return(0,k.jsx)(Ce,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:i,nrInitialInView:e.nrInitialInView})};var je=a(4727),Te=a(38669),Ie=a(11991),Re=a(82187),Ae=a.n(Re),Ee=a(95146),De=a(81909),Le=a(94509),Pe=a(7720),_e=a(431),we=a(57304),Ue=a(44288),Ve=a(69918),Me=a(13814),Oe=a(51335),Be=a(48545),Ze=a(14842),Ke=a(36162),We=a(74791),ze=a(67736),Qe=a(93688);var He=a(30721),Je=a(38010),qe=a(85427);const Ge="JgxVj0lHUDTf9MS1jJpk",Ye="m5NcxNs6qkNbc9Wdxed7",Xe=({isExplicit:e,children:i})=>(0,k.jsxs)("div",{className:Ge,children:[e&&(0,k.jsx)(qe.N,{}),(0,k.jsx)(s.x,{variant:"bodySmall",className:Ye,children:i})]});var $e=a(3021),ei=a(29037);const ii="small",ai="_2sJPwAAp1wY1Ftke6iFe",ni="yuNzasMLs7hvemHI4d8Q",ti="ci11tAmTK1LnxThQkXPy",li="GOcKQxqNMhGzbGiAXBig",si=(0,n.memo)((function(e){const{breakpoint:i,className:a,...n}=e;return(0,k.jsx)($e.w,{className:Ae()(a,ti),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:i===ii?"regular":"wide",hoverAnimationDuration:"0ms",...n})}));var ri=a(73474),di=a(51219);const oi=({description:e,children:i})=>(0,k.jsxs)("div",{children:[e&&(0,k.jsx)(ri.o,{lineClamp:2,as:"div",dir:"auto",children:(0,k.jsx)(di.w,{asTextContent:!0,html:e})}),i]});var ci=a(73467);const mi=({isPlaying:e,onClickPlay:i,name:a,authorName:n,isLocked:t,children:l})=>(0,k.jsxs)("div",{className:li,children:[(0,k.jsx)("div",{className:ai,children:l}),(0,k.jsx)(ci.f,{size:"small",version:ci.u.secondary,onClick:i,isPlaying:e,ariaPlayLabel:c.ag.get("tracklist.a11y.play",a,n),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",a,n),locked:t})]});var ui=a(77401),ki=a(18373),pi=a(1846);const vi=({images:e,breakpoint:i,type:a,name:n})=>{const t=(0,pi.TJ)();return(0,k.jsx)(ui.O,{fadeIn:!0,images:t(e,48),shape:ui.K.ROUNDED_CORNERS,size:i===ii?ki.m$.SIZE_64:ki.m$.SIZE_112,iconSize:i===ii?"medium":"xlarge",type:a,title:n,loadingMode:"eager"})};var yi=a(89963);const gi=({children:e})=>(0,k.jsx)(yi.g,{lineClamp:2,as:"div",dir:"auto",children:e});var Si=a(85509),hi=a(10455),Ni=a(66562),xi=a(85258);const bi="WdYB8aMUe06dOu4TmYik",fi="b1X4Ya4bp35IsN6tPGZw",Ci="aCdPMQVcvScaa22utIJM",Fi=(0,n.memo)((function({book:e,contextUri:i,featureIdentifier:a,sharingInfo:t,uid:r,rating:d,isRecommendation:m=!1,canRemove:u=!1,...p}){const{name:v,description:y,isLocked:g,isExplicit:S,images:h,type:N,uri:x,authorName:f,consumptionCapExplanation:C,durationMs:F,topics:j=[],signifierText:T}=e,I=(0,ve.$P)(),{spec:R}=(0,ve.fU)(_e.F,{data:{position:0,uri:x}}),{isPlaying:A,isActive:E,togglePlay:D}=(0,re.n)({uri:x},{featureIdentifier:a}),L=(0,l.s0)(),P=(0,o.EC)(x).toURLPath(!0),{addItems:_}=(0,de.Yv)(i),w=(0,ei.jh)()===ei.Uo.SMALL?"small":"large",U=(e=>{const i=(0,We.z)(),a=(0,Ze.NL)(),t=(0,n.useRef)(null),l=(0,n.useRef)(0),s=(0,ze.Y)((i=>i?.context.uri===e?i?.item?.uri??null:null)),[r]=(0,Qe.z)(1e4,(e=>e?.item?.uri===s)),{data:d}=(0,Ke.a)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const a=i.getShowPlayedState(e);return l.current=r,a},refetchOnWindowFocus:!1});return(0,n.useEffect)((()=>{t.current&&s!==t.current&&a.invalidateQueries({queryKey:["useShowPlayedState",e]}),t.current=s}),[s,a,e]),(0,n.useMemo)((()=>d&&i.capabilities.canGetShowPlayedState?{state:d.state,playPositionMilliseconds:d.playPositionMilliseconds+r-l.current}:null),[d,i,r])})(x),[V,M]=(0,b.Z)(x),O=(0,Be._)(x),B=w===ii?"small":"medium",Z=(0,n.useCallback)((()=>{I.logInteraction(R.addButtonFactory().hitAddToPlaylist({playlist:i,itemToBeAdded:x})),_([x],{after:"end"})}),[I,R,i,x,_]),K=(0,n.useCallback)((()=>{if(g&&!C)L(P);else{const e=(0,ne.aK)({isPlaying:A,isActive:E,spec:R.playButtonFactory(),logger:I,uri:x});D({loggingParams:e})}}),[C,E,g,A,I,L,R,D,x,P]),W=(0,n.useCallback)((()=>{I.logInteraction(R.genreLinkFactory({uri:j[0].uri??""}).hitUiNavigate({destination:j[0].uri??""}))}),[I,R,j]),z=(0,k.jsx)(gi,{children:v}),Q=(0,k.jsx)(oi,{description:y,children:(0,k.jsxs)(Xe,{isExplicit:!!S,children:[!0===d?.showAverage&&void 0!==d.average&&(0,k.jsxs)("span",{children:[(0,k.jsx)(Ee.u,{size:"xsmall",className:bi}),c.ag.formatNumber(d.average,{maximumFractionDigits:1})]}),j.at(0)?.title&&(0,k.jsx)(Ue.Link,{className:fi,to:j[0].uri??"",onClick:W,children:j[0].title}),F&&(0,k.jsx)(Je.E,{isPlaying:!1,fullyPlayed:U?.state===He._N.Completed,durationMs:F,position:U?.playPositionMilliseconds})]})}),H=(0,k.jsx)(we.X,{uri:x,uid:r,contextUri:i,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:u}),J=!g&&!!!C,q=m?null:(0,k.jsxs)(mi,{isPlaying:A,onClickPlay:K,isLocked:g&&!C,name:v,authorName:f,children:[(0,k.jsx)(Si.H,{className:Ae()({[ni]:V}),isAdded:V,onClick:()=>{V?I.logInteraction(R.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:x})):I.logInteraction(R.saveToLibraryButtonFactory().hitLike({itemToBeLiked:x})),M(!V)},size:B,isAudiobook:!0}),(0,k.jsx)(hi.j,{className:Ae()({[ni]:(0,Oe.y)(O)}),uri:x,onClick:(e,i)=>{i===Me.mc.ADD&&I.logInteraction(R.downloadButtonFactory().hitDownload({itemToDownload:x}))},size:B,canDownload:J}),(0,k.jsx)(xi.T,{uri:x,sharingInfo:t??null,interactionData:{intent:"share",type:"click"},size:B,onClick:()=>{I.logInteraction(R.shareButtonFactory().hitShare({entityToBeShared:x,shareId:t?.shareId??""}))}}),(0,k.jsx)(Ve.yj,{menu:H,children:(0,k.jsx)(Ni.z,{label:c.ag.get("more.label.context",v),size:B,onClick:()=>{I.logInteraction(R.contextMenuButtonFactory().hitUiReveal())}})})]}),G=(0,k.jsx)(vi,{images:h,name:v,type:N,breakpoint:w}),Y=T?(0,k.jsx)(s.x,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:T}):null,X=m?(0,k.jsx)(De.P,{size:"small",onClick:Z,children:c.ag.get("playlist.extender.button.add")}):null,$=(0,k.jsxs)(Le.l,{hasTextSeparator:!0,children:[(0,k.jsxs)(k.Fragment,{children:[m&&g&&(0,k.jsx)(Pe.Z,{semanticColor:"textSubdued",title:c.ag.get("mwp.header.content.unavailable"),size:"xsmall",className:Ci}),c.ag.get("card.tag.audiobook")]}),f]});return(0,k.jsx)(Ve._P,{menu:H,onShow:()=>{I.logInteraction(R.secondaryHitUiReveal())},children:(0,k.jsx)(si,{breakpoint:w,id:`book-${x}`,media:G,pretitle:Y,title:z,body:Q,subtitle:$,footer:q,trailing:X,onClick:()=>{I.logInteraction(R.hitUiNavigate({destination:x})),L(P)},...p})})}));var ji=a(13174),Ti=a(17997);const Ii=(0,n.createContext)({getReference:()=>null,setReference:()=>{}}),Ri=({children:e})=>{const i=(0,n.useRef)(null),a=(0,n.useCallback)((()=>i.current),[]),t=(0,n.useCallback)((e=>{i.current=e}),[]);return(0,k.jsx)(Ii.Provider,{value:{getReference:a,setReference:t},children:e})};const Ai=(e,i,a)=>{const{name:l,uri:s,uid:r}=e,{sortState:d}=(0,n.useContext)(A.Gb),o=d.order!==Ti.kn.NONE,c=(0,_.O)({itemIds:[r],itemUris:[s],itemMimeTypes:[ji.RN.AUDIOBOOKS],dragLabelText:l,contextUri:i}),{setReference:u,getReference:k}=(0,n.useContext)(Ii),p=(0,n.useCallback)((e=>{u({uri:s,uid:r}),c(e)}),[c,u,r,s]),v=(0,t.I0)(),y=(0,n.useContext)(de.ZF),g=(0,n.useCallback)(((e,a)=>{const n=e[ji.RN.AUDIOBOOKS];if(!n)return;const t=k();t?a===Ie.Pw.BEFORE?y.move(i,[t],{before:{uri:s,uid:r}}):y.move(i,[t],{after:{uri:s,uid:r}}):a===Ie.Pw.BEFORE?v((0,m.jV)(i,n,{before:{uri:s,uid:r}})):v((0,m.jV)(i,n,{after:{uri:s,uid:r}})),u(null)}),[i,v,k,y,u,r,s]),S=a&&!o?[ji.RN.AUDIOBOOKS]:[];return{...(0,Ie.WB)({uri:s,id:r,allowedMimeTypesByDropPosition:{[Ie.Pw.BEFORE]:S,[Ie.Pw.AFTER]:S},onDrop:g}),onDragStart:p}},Ei="bg5inM_sdkHpYWiFf7Id",Di="DyW2LAm9YDcCkcdM0eeP",Li=()=>(0,k.jsx)("div",{className:Di}),Pi=(0,n.memo)((function({item:e,contextUri:i,canEdit:a=!1,canRemove:n=!1,index:t}){const{className:l,dropPosition:s,...r}=Ai(e,i,a);return(0,k.jsxs)(Ne.B,{className:l,"aria-posinset":t,children:[s===Ie.Pw.BEFORE&&(0,k.jsx)(Li,{}),(0,k.jsx)(Fi,{book:e,contextUri:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:n,className:l,draggable:!0,...r}),s===Ie.Pw.AFTER&&(0,k.jsx)(Li,{})]})}));var _i=a(45930);const wi=({contextUri:e,initialItems:i,nrItems:a,canEdit:t,canRemove:s,ariaLabel:r})=>{const d=(0,n.useContext)(de.ZF),o=(0,te.Mi)(),{filter:c}=(0,n.useContext)(R.fo),{sortState:m}=(0,n.useContext)(A.Gb),{contentsOptions:u}=(0,_i.d)(m,c),[,p]=(0,E.d4)(),v=(0,n.useCallback)((async(i,a)=>{const n=await d.getContents(e,{...u,offset:i,limit:a}),t=n.items.map((e=>null===e?null:(0,Te.yD)(e)?e:null));return{...n,items:t}}),[d,u,e]),{getItem:y,nrValidItems:g,invalidateCache:S}=(0,je.Q)({nrItems:a,fetch:v,limit:50,initialItems:i});(0,n.useLayoutEffect)((()=>{p(g)}),[g,p]),(0,de.rZ)(e,S);const h=(0,n.useCallback)((e=>(0,k.jsx)("div",{style:{height:e}})),[]),N=(0,n.useCallback)(((i,a)=>{const n=y(i);return n?(0,k.jsx)(Pi,{contextUri:e,item:n,canEdit:t,canRemove:s,index:i},n.uri):h(`${a}px`)}),[t,s,e,y,h]),x="POP"===(0,l.ur)()?0:10;return(0,k.jsx)("div",{className:Ei,children:(0,k.jsx)(Ne.l,{firstInteractiveIsWrapper:!0,"aria-label":r,"aria-rowcount":g,"aria-colcount":5,children:(0,k.jsx)(Ri,{children:(0,k.jsx)(Fe,{totalCount:g,estimatedHeight:200,renderItem:N,renderPlaceholder:h,scrollNodeRef:o,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:x})})})})};var Ui=a(58045),Vi=a(26132),Mi=a(453),Oi=a(61517),Bi=a(20704);const Zi={column:null,order:Ti.kn.NONE},Ki=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,scrollToUid:t,usePlayContextItem:l,tracklistDomRef:s,sortableColumns:r,isCompactMode:d=!1}){const o=(0,n.useContext)(de.ZF),{filter:c,setFilter:m}=(0,n.useContext)(R.fo),u=(0,n.useRef)(null),p=(0,n.useCallback)((()=>{u.current&&u.current.update()}),[]);(0,Oi.r)(a,p);const{sortState:v,setSortState:y}=(0,n.useContext)(A.Gb),g=(0,n.useCallback)((e=>{y((0,I.VK)(e,v))}),[v,y]);(0,n.useEffect)((()=>{y(Zi),m("")}),[a,m,y]),(0,n.useEffect)((()=>{u.current&&t&&u.current.scrollToItem({uid:t})}),[t]);const S=(0,n.useCallback)((async(e,i)=>{const n=await o.getContents(a,{offset:e,limit:i,sort:(0,I._j)(v),filter:c,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,o,v,c]),h=(0,n.useCallback)(((e,i)=>{const n=(0,Bi.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,k.jsx)(Ti.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:l,isCompactMode:d},i+e.uri)}),[a,l,d]),N=(0,Ui.v)(),x=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,k.jsx)(Mi.JL,{value:"chart-tracklist",children:(0,k.jsx)(Ti.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:N,sortableColumns:r,sortState:v,onSort:g,renderRow:h,resolveItem:x,nrTracks:i,fetchTracks:S,limit:100,canFetchAllTracks:o.getCapabilities().canFetchAllTracks,outerRef:u,outerDomRef:s,columnPersistenceKey:"chart-tracklist",isCompactMode:d,className:Vi.Z.chartTrackList},a)})}));var Wi=a(9705),zi=a(93709),Qi=a(42327),Hi=a(11129),Ji=a(11665),qi=a(88724),Gi=a(17207),Yi=a(19686),Xi=a(71932),$i=a(48241),ea=a(3557),ia=a(86515),aa=a(85310),na=a(61529),ta=a(42624),la=a(4488);const sa={bottomEnd:la.LR.topStart,top:la.LR.bottom},ra=({visible:e,onHide:i,placement:a,children:n,label:t})=>(0,k.jsx)(na.x,{placement:a,withPortal:!0,overlay:e&&(0,k.jsx)("div",{className:"encore-dark-theme encore-layout-themes",children:(0,k.jsx)(ta.J,{arrow:sa[a],colorSet:"announcement",onClose:i,children:t})}),children:n});var da=a(15625),oa=a(90765);let ca=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const ma=({uri:e,label:i,onClick:a,size:n=ca.md})=>{const{onCopyLink:t}=(0,oa.l)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:l,setToggleActivationVisible:s}=(0,da.I)();return(0,k.jsx)(ra,{visible:l,onHide:()=>s(!1),label:c.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,k.jsx)(aa.ws,{label:i,children:(0,k.jsx)(ea.o,{onClick:e=>{a?.(e),t?.()},iconOnly:ia.V,size:n,"aria-hidden":"true","aria-label":i,condensed:!0})})})};var ua=a(95559),ka=a(31661),pa=a(15362);const va=n.memo((({metadata:e,tracklistDomRef:i,sortableColumns:a})=>{const{hasSpotifyAudiobooks:t}=e,l=t||!1,{spec:s,logger:r}=(0,ve.fU)(ua.createDesktopSearchBarEventFactory,{}),d=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().keyStrokeFilter())}),[r,s]),o=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().hitClearFilter())}),[r,s]);return(0,k.jsxs)("div",{className:T.Z.searchBoxContainer,children:[(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(ka.K,{placeholder:c.ag.get("playlist.search_in_playlist"),onFilter:d,onClear:o,clearOnEscapeInElementRef:i})}),(0,k.jsx)(pa.l,{columns:[...a],isBooklist:l})]})}));var ya=a(13392),ga=a(9566),Sa=a(28548),ha=a(28497),Na=a(37100),xa=a(18823),ba=a(94313);const fa="Uw4gqTFuHRLn4VKga_bJ",Ca="SdECNwBCnmkKl0Q0mJff",Fa="HLkGXLclDq_7guCiD1Xq",ja="vWR6alsFpTlgXUckErqF",Ta="EbHQLci0cfLjHmS0AKp2",Ia="HzYFPEbZdd6fQW4jfcz4",Ra="SQEgwtR2aj51qFj6cMNZ",Aa="aaNtMSjjJ4cClWoe6K0k",Ea="BhtBJTnsM9AotmyN0MPr",Da="FwoyMQocCMLEafLlvAk5",La="xcn0geYcJliTHbvcds12",Pa="KptBBI16DBjQBjvPQtlH";function _a(e){const i=(0,n.useRef)(null);return(0,k.jsx)(ga.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,k.jsx)(Sa.l,{className:fa,"aria-label":"Example showing onClose property",body:(0,k.jsxs)("div",{className:Ea,children:[(0,k.jsx)(ea.o,{size:"medium","aria-label":"IconX",iconOnly:ha.k,onClick:e.onClose,className:La}),(0,k.jsx)(ea.o,{size:"medium","aria-label":"IconArrowLeft",iconOnly:xa.D,className:Da}),(0,k.jsx)("div",{className:Ca,children:(0,k.jsxs)("div",{className:Fa,children:[(0,k.jsx)("div",{className:Ta,children:(0,k.jsxs)("div",{className:Ia,children:[(0,k.jsx)(ya.E,{className:Ra,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,k.jsx)(ya.E,{className:Aa,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,k.jsxs)("div",{className:ja,children:[(0,k.jsxs)(s.x,{as:"p",variant:"marginalBold",children:[(0,k.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,k.jsxs)(s.x,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,k.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,k.jsx)("div",{className:Ta,children:(0,k.jsx)(ba.V,{size:"xlarge"})})]})}),(0,k.jsx)("div",{className:Pa,children:(0,k.jsx)(x.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const wa="nTTPGZGk721M6gfldG43",Ua="BFYSUcA4ifYvgDzOQX5Q",Va="el9_37CCpYKxCRKDDyww",Ma="FB376b7R1M_0YQZ_SahS",Oa="srPBn9_CV0NzQEEzW9f6",Ba="te8Z8OuKxZx1gbjb7_ua",Za=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[i&&(0,k.jsx)(_a,{onClose:()=>{a(!1)}}),(0,k.jsx)(ga.Y,{center:!0,withPortal:!0,children:(0,k.jsx)(Sa.l,{colorSet:"overMedia","aria-label":"Title",body:(0,k.jsx)("div",{children:(0,k.jsx)(s.x,{as:"p"})}),dialogTitle:(0,k.jsxs)("div",{className:wa,children:[(0,k.jsxs)("div",{className:Va,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(ya.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,k.jsx)(ya.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsx)(s.x,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,k.jsxs)("div",{className:Ua,children:[(0,k.jsx)(ea.o,{iconOnly:ha.k,onClick:()=>e(!1),className:Oa}),(0,k.jsx)(ea.o,{iconOnly:Na.o,className:Ba,onClick:()=>{a(!0)}})]}),(0,k.jsx)("div",{className:Ma,children:(0,k.jsx)(s.x,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),Ka="__97AKHEfxNtqFsLai1b",Wa="pzFwHV7jvPlWTI6cG5TV",za="iZu1aH8cr2cw98gqmTeo",Qa="JRvbfJh7eAZ_1FrQukej";function Ha(){const[e,i]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[e&&(0,k.jsx)(Za,{setuserView:i}),(0,k.jsxs)("button",{className:Ka,onClick:()=>i(!0),children:[(0,k.jsxs)("div",{className:Wa,children:[(0,k.jsx)(ya.E,{className:za,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(ya.E,{className:za,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(ya.E,{className:za,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsxs)("div",{className:Qa,children:[(0,k.jsx)(s.x,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var Ja=a(58249),qa=a(3532);const Ga=n.memo((function({playlist:e,capabilities:i,spec:a,isPlaying:t,isActive:l,togglePlay:s,isBooklist:d,isConcert:o=!1,backgroundColor:m,tracklistDomRef:u,sortableColumns:p}){const{metadata:{uri:v,name:y,unfilteredTotalLength:g,isOwnedBySelf:S,canPlay:h,isPublished:N,totalLength:x}}=e,f=(0,W.k)(),C=(0,ve.$P)(),F=(0,n.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),j=i.canFilter&&g>0,I=i.canSort&&g>0,R=g>0,A=(0,r.W6)(Y.v8$),E=(0,r.W6)(Y.MF8,{loadingValue:!1}),D=(0,qa.Q)(),[L,P]=(0,b.Z)(v),_=(0,K.o)(),w=(0,n.useCallback)((async()=>{_({targetUri:v,intent:L?"unsave":"save",type:"click"});try{await P(!L)}catch{}}),[L,_,P,v]),U=(0,n.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:v,shareId:""});C.logInteraction(e)}),[a,C,v]),V=(0,n.useCallback)((()=>{let e;const i=a.heartButtonFactory();e=L?i.hitUnfollow({itemToBeUnfollowed:v}):i.hitFollow({itemToBeFollowed:v}),C.logInteraction(e),w()}),[a,w,L,C,v]),M=(0,Xi.j)(),O=j&&I;return(0,k.jsxs)(Wi.o,{backgroundColor:m,children:[(0,k.jsxs)(Wi.F,{children:[h&&!d?(0,k.jsx)(qi.$,{onClick:s,isPlaying:t,size:M,uri:v,ariaPlayLabel:c.ag.get("playlist.a11y.play",y),ariaPauseLabel:c.ag.get("playlist.a11y.pause",y)}):null,D&&x>0&&!d&&(0,k.jsx)(ve.Nh,{spec:F,children:(0,k.jsx)(Yi.K,{shuffleContext:Ja.W.playlistActionBar,entityName:y,contextUri:v,isActive:l,activationPlacement:"bottomEnd",size:M})}),S?null:(0,k.jsx)(Hi.r,{children:(0,k.jsx)(Si.H,{isAdded:!!L,onClick:V,size:M})}),!d&&(0,k.jsx)(zi.o,{uri:v,isFollowing:!!L,canDownload:R,onClick:(e,i)=>(0,ne.l7)(i,a.downloadButtonFactory(),C,v),onFollow:w,size:M}),(0,k.jsx)(Ji.F,{property:Y.bMb,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&f&&(!d||E)?(0,k.jsx)(ma,{onClick:U,label:c.ag.get("permissions.invite-collaborators",y),uri:v,size:M}):null}),(o||d)&&(0,k.jsx)(xi.T,{uri:v,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:o?"concerts-near-you/share":"booklist/share"},onClick:U,size:M}),(0,k.jsx)($i.y,{onShow:()=>(0,ne.qq)(a,C),menu:(0,k.jsx)(Qi.X,{uri:v,isPublished:N}),children:(0,k.jsx)(Ni.z,{label:c.ag.get("more.label.context",y),size:M})}),O?(0,k.jsx)(ve.Nh,{spec:a,children:(0,k.jsx)(va,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:p})}):(0,k.jsx)("div",{className:T.Z.leadingSlot,children:(0,k.jsx)(Ji.F,{property:Y.FMs,renderNewExperience:()=>(0,k.jsx)(Gi.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),A&&(0,k.jsx)(Ha,{})]})}));var Ya=a(75678);const Xa=e=>{const i=(0,ve.$P)(),a=(0,n.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),t=(0,ve.Wi)(a);return(0,k.jsxs)("div",{className:T.Z.concertsFooter,children:[(0,k.jsx)(Ue.default,{to:"/concerts",className:T.Z.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});i.logInteraction(e)},children:(0,k.jsxs)("div",{className:T.Z.promoRow,ref:t,children:[(0,k.jsx)(s.x,{as:"h2",variant:"bodyMediumBold",className:T.Z.promoTitle,children:c.ag.get("concerts.find_more")}),(0,k.jsx)(Ya.A,{as:"span",selected:!0,children:c.ag.get("concerts.find_nearby")}),(0,k.jsx)("img",{className:T.Z.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,k.jsx)("div",{className:T.Z.disclaimerContainer,children:(0,k.jsx)(s.x,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:c.ag.get("concerts_near_you.playlist_disclaimer")})})]})};var $a=a(43467),en=a(50929),an=a(89541);const nn="multiUserAttributionDisplayNamesV2";function tn(e){return(0,Te.MW)(e)||(0,Te.JF)(e)}function ln(e){return(0,Te.MW)(e)||(0,Te.JF)(e)||(0,Te.yD)(e)}const sn=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:l,isMixedMedia:s,isLive:d,isBlend:u,isConcert:p,isBooklist:v,canEdit:y,scrollToUid:g,feedbackPath:S,deleteFeedbackPath:h,usePlayContextItem:N,tracklistRef:x,tracklistDomRef:b,canRemove:f,spec:C,initialItems:F,isCompactMode:j=!1,sortableColumns:T,hasSpotifyAudiobooks:D}){const L=(0,ve.$P)(),P=(0,r.W6)(Y.Kpm),_=(0,n.useContext)(de.ZF),{filter:w}=(0,n.useContext)(R.fo),{sortState:U,setSortState:V}=(0,n.useContext)(A.Gb),M=(0,n.useRef)((()=>{})),[O,B]=(0,n.useState)([]),Z=(0,t.I0)(),K=(0,Ui.v)(),W=(0,n.useCallback)((()=>{x?.current&&x.current.update()}),[x]);(0,de.rZ)(a,W);const z=(0,n.useCallback)(((e,i)=>{V((0,I.VK)(e,U)),L.logInteraction(C.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[V,U,L,C]),Q=(0,n.useCallback)((e=>{M.current(),_.remove(a,e)}),[_,a]),H=(0,n.useCallback)(((e,i,a=!1)=>{f&&(M.current=i,e.length>1&&!a?B(e):Q(e))}),[f,Q]);(0,n.useEffect)((()=>{x?.current&&g&&x.current.scrollToItem({uid:g})}),[g,x]);const J=(0,n.useCallback)((async(e,i)=>{const n=await _.getContents(a,{offset:e,limit:i,sort:(0,I._j)(U),filter:w,decorateFormatListData:!!S||d||u});return{items:n.items,totalLength:n.totalLength}}),[a,_,U,w,S,d,u]),q=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(L.logInteraction(C.dragSort()),n===an.W.Before?_.move(a,e,{before:t}):_.move(a,e,{after:t}))}),[x,L,C,_,a]),G=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(L.logInteraction(C.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===an.W.Before?Z((0,m.jV)(a,e,{before:{uri:t.uri,uid:t.uid}})):Z((0,m.jV)(a,e,{after:{uri:t.uri,uid:t.uid}})))}),[x,L,C,a,Z]),X=(0,n.useCallback)((()=>{_.resync(a)}),[_,a]),$=(0,n.useCallback)(((e,i)=>{let n,t=null;(0,Te.JF)(e)?(t=e.show,n=e.images.concat(e.show?.images||[])):(0,Te.MW)(e)?(t=e.album,n=e.album?.images):(0,Te.yD)(e)&&(n=e.images);const r=(0,Bi.X)(n,{desiredSize:40,desiredLabel:"small"});let d=[];y&&U.order===Ti.kn.NONE&&(d=v?[ji.RN.AUDIOBOOKS]:[ji.RN.TRACKS,ji.RN.LOCAL_TRACKS,ji.RN.EPISODES,...D?[ji.RN.AUDIOBOOKS]:[]]);const c="1"===e?.formatListAttributes?.["dislike-feedback-selected"],m=!!(0,Te.JF)(e)&&e.podcastSubscription.isUserSubscribed;let g=!1;(0,Te.JF)(e)&&e.podcastSubscription.isPaywalled&&!m?g=!0:tn(e)?g=e.isPlayable&&!c:(0,Te.yD)(e)&&(g=!0);let x=!1;(0,Te.JF)(e)&&e.podcastSubscription.isPaywalled?x=!0:(0,Te.yD)(e)&&(x=e.isLocked&&!e.isOutOfMarket);const b=u&&((e,i)=>{const a=[];if(!i)return a;const n=i[nn]?nn:"multiUserAttributionDisplayNames",t=i?.[n]?.split(","),l=i?.multiUserAttributionImages?.split(",");if(!t||!l)return a;const s=i?.multiUserAttributionUsernamesV2?.split(",")||[],r=i?.multiUserAttributionType?.split(",")||[],d=t.length;for(let e=0;e<d;e++){const i=s[e],n=i&&(0,o.QK)(i).toURI();a.push({username:i,uri:n,displayName:t[e],images:(c=l[e],c.length>1?[{url:c}]:[]),recsplanation:r[e]})}var c;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;tn(e)?C=e.duration.milliseconds:(0,Te.yD)(e)&&(C=e.durationMs||0);let F="";return ln(e)&&(F=e.name),(0,k.jsx)(Ti.dx,{isCompactMode:j,index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:g,duration_ms:C,isPaywalled:x,isUserSubscribed:m,name:F,artists:(0,Te.MW)(e)?e.artists:void 0,albumOrShow:t,isExplicit:(ln(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Te.MW)(e)&&e.hasAssociatedVideo&&P)??!1,isMixedMedia:s,isLocal:(0,Te.MW)(e)&&e.isLocal,addedBy:b,hasDecoratedAddedBy:_.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Te.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,Te.MW)(e)||(0,Te.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:q,onInsert:G,usePlayContextItem:N,allowedDropTypes:d,feedbackPath:S,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:h,isDisliked:c,isBlend:u,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:f,onFeedbackClick:X,playlistName:l,isConcert:p,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:(0,Te.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,Te.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Te.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:y},i+e.uri)}),[y,v,U.order,u,j,a,P,s,_,q,G,N,S,h,f,X,l,p,D]),ee=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ie]=(0,E.d4)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Mi.JL,{value:"playlist-tracklist",children:(0,k.jsx)(Ti.Pv,{isCompactMode:j,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:K,sortableColumns:T,sortState:U,onSort:z,onRemove:H,renderRow:$,resolveItem:ee,nrTracks:i,fetchTracks:J,limit:100,canFetchAllTracks:_.getCapabilities().canFetchAllTracks,outerRef:x,outerDomRef:b,tracks:F,isConcertPlaylist:p,onNrValidItemsChange:ie,columnPersistenceKey:"playlist-tracklist"},a)}),(0,k.jsx)(en.h,{title:c.ag.get("playlist.remove_from_playlist",l),isOpen:O.length>0,tracks:O,onClose:e=>{e.stopPropagation(),B([])},onRemove:Q})]})}));var rn=a(79630),dn=a(3834),on=a(97553),cn=a(9129),mn=a(88475);const un={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"audiobookMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescriptionPlain"}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shortName"}},{kind:"Field",name:{kind:"Name",value:"destinationUri"}},{kind:"Field",name:{kind:"Name",value:"contextualName"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"averageRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"average"}},{kind:"Field",name:{kind:"Name",value:"showAverage"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUserMemberOfAtLeastOneGroup"}},{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"ctaUrl"}},{kind:"Field",name:{kind:"Name",value:"dismiss"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"signifier"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}}]}},{kind:"Field",name:{kind:"Name",value:"unlockedBy"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareId"}},{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]},kn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAudiobooksMetadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcasts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}},...un.definitions]},pn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},vn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...pn.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},yn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2Booklists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}}]}}]}}]}}]}}]}},...un.definitions]},gn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...pn.definitions]},Sn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...pn.definitions]};var hn=a(88832);function Nn(e){return{type:M.p.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(c.ag.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,hn.P2)(e.accessInfo),isExplicit:e.contentRating?.label===He.KS.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var xn=a(99146),bn=a(10246),fn=a(45084),Cn=a(54329);function Fn(e){return{type:M.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,bn.NS)(e.coverArt)}}function jn(e){if("Album"!==e.data.__typename)return null;return Fn(e.data)}function Tn(e){const i=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(i??[]).map((e=>jn(e))).filter(fn.K)||[]}function In(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:M.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,bn.NS)(i.visuals.avatarImage)}}function Rn(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:M.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,bn.NS)(i.coverArt),isExplicit:i.contentRating?.label===xn.KS.Explicit,is19PlusOnly:i.contentRating?.label===xn.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function An(e){const i=(0,bn.NS)(e.albumOfTrack?.coverArt||null);return{type:M.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===xn.KS.Explicit,is19PlusOnly:e.contentRating?.label===xn.KS.NineteenPlus}}function En(e){if("Track"!==e.data.__typename)return null;return An(e.data)}function Dn(e){return(e?.itemsV2??[]).map((e=>{const i=(0,bn.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return jn(i);case"ArtistResponseWrapper":return In(i);case"EpisodeResponseWrapper":return Rn(i);case"TrackResponseWrapper":return En(i);default:return(0,Cn._)(i),null}})).filter(fn.K)||[]}function Ln(e){return(e?.itemsV2??[]).map((e=>{const i=(0,bn.U2)(e,"item");return"AudiobookResponseWrapper"===i.__typename&&"Audiobook"===i.data.__typename?Nn(i.data):null})).filter(fn.K)||[]}const Pn=async(e,i,a,n=0,t=10,l=10)=>{const s={term:i,offset:n,limit:t,numberOfTopResults:l};if(a){const a=await e(yn,s),n=a?.data?.searchV2;return n?(r=i,{albums:[],artists:[],episodes:[],tracks:[],topResults:Ln(n.topResultsV2)??[],query:r}):null}var r;const d=await e(vn,s),o=d?.data?.searchV2;return o?function(e,i){return{albums:Tn(e.albumsV2)??[],artists:(t=e.artists,((t?.items??[]).map((e=>In(e))).filter(fn.K)||[])??[]),episodes:(n=e.episodes,((n?.items??[]).map((e=>Rn(e))).filter(fn.K)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>En(e.item))).filter(fn.K)||[])??[]),topResults:Dn(e.topResultsV2)??[],query:i};var a,n,t}(o,i):null},_n=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(gn,t),s=l?.data?.albums;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>An(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Cn._)(i),null}}(s):null},wn=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Sn,t),s=l?.data?.artists;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>Fn(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>An(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Cn._)(i),null}}(s):null};var Un=a(49857),Vn=a(83314);const Mn="playlist-inlineSearchBox-filterInputContainer",On="playlist-inlineSearchBox-filterInput",Bn="playlist-inlineSearchBox-overlay",Zn="playlist-inlineSearchBox-searchIconContainer",Kn="playlist-inlineSearchBox-searchIcon",Wn="playlist-inlineSearchBox-clearButton",zn=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,l]=(0,n.useState)(""),r=(0,n.useRef)(null),d=(0,Un.y1)((e=>{i(e)}),200),o=(0,n.useCallback)((e=>{const i=e.currentTarget.value;l(i),d(i)}),[l,d]),m=(0,n.useCallback)((()=>{r.current&&r.current.focus(),l(""),i("")}),[l,i]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&m()}),[t,m]);return(0,k.jsxs)("div",{className:Mn,role:"search",children:[(0,k.jsx)(s.x,{as:"input",variant:"bodySmall",ref:r,className:Ae()(On),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:o,onKeyDown:u,onFocus:a,value:t}),(0,k.jsxs)("div",{className:Bn,children:[(0,k.jsx)("span",{className:Zn,children:(0,k.jsx)(Vn.j,{size:"small",className:Kn,"aria-hidden":"true"})}),t&&(0,k.jsx)("button",{className:Wn,onClick:m,"aria-label":c.ag.get("search.a11y.clear-input"),children:(0,k.jsx)(ha.k,{size:"small"})})]})]})})),Qn=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("search.title.all"),renderRow:a,rowPlaceholder:Ti.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Hn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD]}),Jn=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===M.p.TRACK)),n=i.filter((e=>e.type===M.p.ALBUM));return(0,k.jsxs)("div",{children:[(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:T.Z.artistResultListTitle,children:c.ag.get("playlist.curation.popular_songs")}),(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD]}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:T.Z.artistResultListTitle,children:c.ag.get("playlist.curation.albums")}),(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD]})]})},qn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD]}),Gn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD]}),Yn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ti.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADD]});var Xn=a(41241);const $n="G2t3w2AAeb5OXp0_GeWs",et="saVjTFMyWYUz975_tkQm",it="thi8fNCkEhutRkDC90c0",at="pHVlkChuJpEnBQyU3ADv",nt="ENWs3JxcqtD98_8fbPz2",tt="L8IUKEJL6JiTyE_qUVCc",lt="XcyjdXgsNX0DBt72tfiD",st="VhJnuS7UcUPfIlzD8dlU",rt="He29vQ5anFj_bJ5iEaI2",dt=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(Xn.RX,{className:nt,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:rt,onClick:n,children:[(0,k.jsxs)(Xn.id,{columnIndex:0,className:tt,children:[void 0!==t?(0,k.jsx)("img",{className:it,src:t,alt:e.name}):null,(0,k.jsxs)("div",{className:lt,children:[(0,k.jsx)(s.x,{as:"p",className:at,variant:"bodyMedium",children:e.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("album")})]})]}),(0,k.jsx)(Xn.id,{columnIndex:1}),(0,k.jsx)(Xn.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:st,onClick:n,children:a?(0,k.jsx)(on.e,{}):(0,k.jsx)(dn.V,{})})})]})})};var ot=a(38452);const ct=({size:e})=>(0,k.jsx)("div",{className:et,children:(0,k.jsx)(ot.a,{size:e})}),mt=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(Xn.RX,{className:nt,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:rt,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,k.jsxs)(Xn.id,{columnIndex:0,className:tt,children:[void 0!==t?(0,k.jsx)("img",{className:$n,src:t,alt:e.name}):(0,k.jsx)(ct,{size:"small"}),(0,k.jsxs)("div",{className:lt,children:[(0,k.jsx)(s.x,{as:"p",className:at,variant:"bodyMedium",children:e.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("artist")})]})]}),(0,k.jsx)(Xn.id,{columnIndex:1}),(0,k.jsx)(Xn.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:st,onClick:n,children:a?(0,k.jsx)(on.e,{}):(0,k.jsx)(dn.V,{})})})]})})},ut=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Ti.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),kt=({label:e,index:i,isRTL:a,onClick:n})=>(0,k.jsx)(Xn.RX,{className:nt,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":e,className:rt,onClick:n,children:[(0,k.jsx)(Xn.id,{columnIndex:0,className:tt,children:(0,k.jsx)(s.x,{as:"p",className:at,variant:"bodyMedium",children:e})}),(0,k.jsx)(Xn.id,{columnIndex:1}),(0,k.jsx)(Xn.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:st,onClick:n,children:a?(0,k.jsx)(on.e,{}):(0,k.jsx)(dn.V,{})})})]})}),pt=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Ti.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let vt=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const yt=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:vt.SEARCH,term:i.term,title:""}]}),e),gt=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:r,term:d,isBooklist:m})=>{let u=e;const p=(e=>e.map((e=>{if(e.type===M.p.TRACK||e.type===M.p.EPISODE){const{uri:i,id:a}=e;return{type:(0,o.wj)(i)?M.p.TRACK:M.p.EPISODE,uri:i,uid:a,provider:null}}return null})).filter(fn.K))(e),v=(0,_.O)(),{usePlayContextItem:y}=(0,re.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(d)}:${i?.navType??0}`,pages:[{items:p}]},{featureIdentifier:"search"}),g=(0,n.useCallback)(((e,i)=>(0,k.jsx)(kt,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:d,title:e.label})}},e.uri)),[a,l,d]),S=(0,n.useCallback)(((e,i)=>e.type===M.p.ARTIST?(0,k.jsx)(mt,{isRTL:a,index:i,searchResult:e,onClick:()=>{r({navType:vt.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===M.p.EPISODE?(0,k.jsx)(ut,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===M.p.TRACK?(0,k.jsx)(pt,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===M.p.ALBUM?(0,k.jsx)(dt,{index:i,isRTL:a,searchResult:e,onClick:()=>{r({navType:vt.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,k.jsx)(Fi,{book:e,featureIdentifier:"playlist_recommendations",contextUri:t,isRecommendation:!0},e.uri)),[a,r,t,y]);if(""===d)return(0,k.jsx)("div",{className:T.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,k.jsxs)("div",{className:T.Z.emptyStateContainer,children:[(0,k.jsx)(s.x,{as:"h1",variant:"titleSmall",children:c.ag.get("search.empty-results-title",d)}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("search.empty-results-text")})]});if(i?.navType===vt.SEARCH){const i=[{type:vt.ARTISTRESULTS,label:c.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:vt.ALBUMRESULTS,label:c.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:vt.TRACKRESULTS,label:c.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return u=e,m?(0,k.jsx)(k.Fragment,{children:u.map(((e,i)=>e&&e.type===M.p.AUDIOBOOK?(0,k.jsx)(Fi,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:!0,onDragStart:i=>{v(i,{itemUris:[e.uri],itemMimeTypes:[ji.RN.AUDIOBOOKS],dragLabelText:e.name})}},i):null))}):(0,k.jsx)(Qn,{renderRow:S,searchResults:u,renderSeeAllRow:g,seeAllXList:i})}return i?.navType===vt.ALBUM?(0,k.jsx)(Hn,{renderRow:S,searchResults:u}):i?.navType===vt.ARTIST?(0,k.jsx)(Jn,{renderRow:S,searchResults:u}):i?.navType===vt.ALBUMRESULTS?(0,k.jsx)(qn,{renderRow:S,searchResults:u}):i?.navType===vt.TRACKRESULTS?(0,k.jsx)(Gn,{renderRow:S,searchResults:u}):i?.navType===vt.ARTISTRESULTS?(0,k.jsx)(Yn,{renderRow:S,searchResults:u}):null},St=({playlistUri:e,onCurationModeChange:i,isBooklist:a})=>{const[t,l]=(0,n.useState)([]),[r,d]=(0,n.useState)(),o=(0,cn.S)(),{level:m,changeTerm:u,goBack:p,navToEntity:v,navToResults:y,term:g}=(()=>{const[e,i]=(0,n.useReducer)(yt,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:S}=(0,n.useContext)(mn.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(m)switch(m.navType){case vt.SEARCH:try{if(!r||r.query!==g&&""!==g){const i=await Pn(S,g,a);e&&d(i)}else""===g&&l([])}catch{l([])}r&&l(r.topResults);break;case vt.ARTISTRESULTS:r&&l(r?.artists);break;case vt.ALBUMRESULTS:r&&l(r?.albums);break;case vt.TRACKRESULTS:r&&l(r?.tracks);break;case vt.EPISODERESULTS:r&&l(r?.episodes);break;case vt.ALBUM:try{const i=await _n(S,m.uri,100,0);e&&i&&l(i.tracks)}catch{l([])}break;case vt.ARTIST:try{const i=await wn(S,m.uri,100,0);e&&i&&l([...i.albums,...i.tracks])}catch{l([])}}})(),()=>{e=!1}}),[m,g,r,S,a]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("section",{className:T.Z.playlistInlineCurationSection,children:[(0,k.jsxs)("div",{className:T.Z.playlistInlineCurationWrapper,children:[(0,k.jsx)(s.x,{as:"h1",className:T.Z.playlistInlineCurationTitle,variant:"titleSmall",children:c.ag.get("playlist.curation.title")}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(zn,{placeholder:a?c.ag.get("playlist.curation.search_placeholder-booklists"):c.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{u(e)}})})]}),(0,k.jsx)("button",{className:T.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,k.jsx)(ha.k,{"aria-label":c.ag.get("close")})})]}),null!==m&&m.navType!==vt.SEARCH?(0,k.jsxs)("button",{className:T.Z.playlistInlineCurationBackButton,onClick:()=>p(),children:[o?(0,k.jsx)(dn.V,{"aria-label":c.ag.get("navbar.go-back"),className:T.Z.icon}):(0,k.jsx)(on.e,{"aria-label":c.ag.get("navbar.go-back"),className:T.Z.icon}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",children:m.title})]}):null,(0,k.jsx)("div",{className:T.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,k.jsx)(gt,{playlistUri:e,term:g,level:m,resultList:t,navToEntity:v,navToResults:y,isRTL:o,isBooklist:a})})]})};var ht=a(6722),Nt=(a(73338),a(73850)),xt=a(57586),bt=a(11369),ft=a(15757);const Ct=3e5;function Ft(e,i){return["list-extender",e,i]}const jt=(e,i,a=10,t)=>{const l=2*a,s=3*a,r=(0,Ze.NL)(),o=(0,n.useRef)(0),[c,m]=(0,n.useState)(e),[u,k]=(0,n.useState)((()=>r.getQueriesData({queryKey:Ft(e,i),stale:!1}).at(0)?.[1]??[])),p=(0,n.useRef)(u.map((e=>e.uri??""))),{spec:v,logger:y}=(0,ve.fU)(d.T,{data:{uri:e}}),g=(0,n.useMemo)((()=>v.recommendedFactory()),[v]);(0,ft.F)(bt.XL.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===bt.If.ADD?k((e=>e.filter((e=>a.uris.every((i=>i!==e.uri)))))):a.operation===bt.If.REMOVE&&k((e=>e.filter((e=>a.items.every((i=>i.uri!==e.uri)))))),a.operation!==bt.If.ADD&&a.operation!==bt.If.REMOVE||r.invalidateQueries({queryKey:Ft(e,i)}))}));const S=(0,n.useRef)(!0);(0,n.useEffect)((()=>(S.current||(k([]),m(e),p.current=[],o.current=o.current+1),S.current=!0,()=>{o.current=o.current+1})),[e]),(0,n.useEffect)((()=>{if(u.length<l){const e=Math.min(l,s-u.length),a=o.current,n=Ft(c,i),d=S.current&&0===p.current.length;(d?r.fetchQuery({queryKey:n,queryFn:()=>t(c,[],e),staleTime:Ct,gcTime:Ct}):t(c,p.current,e)).then((i=>{if(a!==o.current||!i)return;const t=i.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));i.length<e&&p.current.length?p.current=[]:p.current=[...p.current,...t],k((e=>[...e,...i])),d&&r.setQueryData(n,i)}))}S.current=!1}),[l,s,c,u.length,r,t,i]);const h=(0,n.useCallback)((()=>{if(v){const e=g.refreshButtonFactory().hitRefreshContent();y.logInteraction(e)}k((e=>e.slice(a)))}),[y,g,v,a]);return{recommendations:u.slice(0,a),_bufferedRecommendations:u.slice(a),refresh:h}},Tt=n.memo((function({uri:e}){const{recommendations:i,refresh:a}=((e,i=10)=>{const a=(0,n.useContext)(Nt.Z),{request:t}=(0,n.useContext)(mn.Ax),l=(0,n.useCallback)((async(e,i,n)=>{const l=await a.getRecommendedBookUris(e,i,n),s=await t(kn,{uris:l});return s?.data?.podcasts.map((e=>"Audiobook"===e.__typename?Nn(e):null)).filter(fn.K)??[]}),[a,t]);return jt(e,"book",i,l)})(e),t=(0,_.O)(),l=(0,ht.s)();return l?i?.length&&i.length>0?(0,k.jsxs)("div",{className:T.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:T.Z.top,children:(0,k.jsxs)("div",{className:T.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:T.Z.subtitle,children:c.ag.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,k.jsxs)(k.Fragment,{children:[i.map(((i,a)=>i?(0,k.jsx)(Fi,{contextUri:e,featureIdentifier:"playlist_recommendations",book:i,sharingInfo:i.sharingInfo,isRecommendation:!0,draggable:!0,onDragStart:e=>{t(e,{itemUris:[i.uri],itemMimeTypes:[ji.RN.AUDIOBOOKS],dragLabelText:i.name})}},a):null)),(0,k.jsx)(ea.o,{className:T.Z.refreshButton,onClick:a,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:T.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:T.Z.top,children:(0,k.jsxs)("div",{className:T.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:T.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),It=n.memo((function({playlistUri:e,canEdit:i,tracks:a}){const{usePlayContextItem:t}=(0,re.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:M.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),l=(0,n.useCallback)(((a,n)=>{const l=a.duration;return(0,k.jsx)(Ti.cp,{index:n,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!a.isMOGEFRestricted,name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:t,durationMs:l,shouldRenderDuration:!i,internalLink:!0},`${n}-${a.uri}`)}),[e,t,i]),s=(0,n.useMemo)((()=>[Ti.QD.TITLE_AND_ARTIST,Ti.QD.ALBUM,Ti.QD.ADDED_AT,Ti.QD.ADD]),[]),r=(0,n.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),d=(0,n.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,k.jsx)(Ti.Pv,{ariaLabel:c.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Ti.hU,tracks:d,renderRow:l,resolveItem:r,columns:s},`${e}-recommended`)})),Rt=n.memo((function({playlistUri:e,playlistLength:i,canEdit:a}){const{recommendations:t,refresh:l}=((e,i=10)=>{const a=(0,n.useContext)(Nt.Z),t=(0,n.useCallback)((async(e,i,n)=>{const t=i.map((e=>xt.o.from(e).id??""));return a.getRecommendedTracks(e,t,n)}),[a]);return jt(e,"track",i,t)})(e),r=!i||0===i,d=(0,ht.s)(),o=`${e}|${m=t,m?m.map((e=>e.uri)):[]}`;var m;ee({context:o,shouldFire:!!t.length});const u=r?c.ag.get("playlist.extender.title.in.playlist"):c.ag.get("playlist.extender.songs.in.playlist");return d?t.length>0?(0,k.jsxs)("div",{className:T.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:T.Z.top,children:(0,k.jsxs)("div",{className:T.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:T.Z.subtitle,children:u})]})}),d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(It,{playlistUri:e,canEdit:a,tracks:t}),(0,k.jsx)(ea.o,{className:T.Z.refreshButton,onClick:l,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:T.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:T.Z.top,children:(0,k.jsxs)("div",{className:T.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:T.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),At=n.lazy((()=>a.e(7427).then(a.bind(a,93558)))),Et=n.lazy((()=>Promise.resolve().then(a.bind(a,68279)))),Dt=n.lazy((()=>a.e(1021).then(a.bind(a,9085)))),Lt=n.lazy((()=>a.e(5457).then(a.bind(a,87516)))),Pt=new Set([]),_t=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:u,images:p,totalLength:v,unfilteredTotalLength:y,isOwnedBySelf:N,hasEpisodes:x,canAdd:b,canRemove:f,formatListData:C,hasDateAdded:F,collaborators:j,isPublished:V,hasSpotifyAudiobooks:M,hasSpotifyTracks:O},contents:{items:z}}=e,{spec:Q,logger:H,UBIFragment:J}=(0,ve.fU)(d.T,{data:{uri:a}}),q=(0,W.k)(),G=(0,r.W6)(ye.OC,{loadingValue:!1}),X=(0,r.W6)(ye.MF,{loadingValue:!1}),le=(0,r.W6)(Y.OBF,{loadingValue:!1}),{isCompactMode:ue}=(0,P.mJ)(),Ne=n.useMemo((()=>Q.headerFactory()),[Q]),xe=n.useMemo((()=>Q.tracklistFactory()),[Q]),be=n.useMemo((()=>Q.actionBarFactory()),[Q]),fe="chart"===C?.type,Ce="concerts-near-you"===C?.type&&G,Fe="live-streams"===C?.type,je=["blend","celebrity-blend","friends-mix"].indexOf(C?.type||"")>-1,Te=[O,x,M].filter(Boolean).length>1,Ie=!Te&&!!M&&(0,rn.V)(z),Re="artistsets"===C?.type||"this-is"===C?.attributes["editorial.series"],Ae=C?.attributes||{},Ee=Ae.header_image_url_desktop||Ae.image_url||null,De=b&&f,{inlineCurationModeIsOn:Le,handleInlineCurationModeChange:Pe}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)(te.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(De&&(!Ie||X&&le),y),{productState:_e}=(0,t.v9)($.Gg),we=!!_e&&parseInt(_e.ads,10)>0,Ue="spotify"===e.metadata.owner.username,Ve=(0,t.I0)(),Me=(0,l.ur)(),Oe=(0,l.TH)(),Be=(0,r.W6)(Y.XPU,{loadingValue:!1}),Ze=(0,r.W6)(Y.wAP,{loadingValue:!1}),Ke=(0,r.W6)(Y.bys,{loadingValue:!1}),We=(0,L.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*se.y,enabled:Re}).data?.playlistV2,ze="Playlist"===We?.__typename?We.artistsOnTour?.[0]:null,Qe=Ke&&"Playlist"===We?.__typename?We.concerts?.items.map((e=>e.data)):null,He=Qe?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const i=[e.location.name,e.location.city].join(c.ag.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:i,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url}})),Je="POP"!==Me?new URLSearchParams(Oe.search).get("uid"):null,qe=(0,K.o)(),{filter:Ge}=(0,n.useContext)(R.fo),{sortState:Ye}=(0,n.useContext)(A.Gb),Xe=(0,n.useContext)(de.ZF),$e=(0,n.useRef)(null),ei=(0,n.useRef)(null),[ii]=p,ai=(0,ie.Z)(null!==Ee?Ee:ii?.url||null),{isPlaying:ni,isActive:ti,togglePlay:li,usePlayContextItem:si}=(0,re.n)(function(e,i,a){const n={uri:e};return(0,oe.R)(n,i),(0,ce.I)(n,(0,me.cj)(a)),n}(a,(0,I._j)(Ye),Ge),{featureIdentifier:"playlist"}),ri=(0,n.useCallback)((()=>{const e=(0,ne.aK)({isPlaying:ni,isActive:ti,spec:be.playButtonFactory(),logger:H,uri:a});li({loggingParams:e})}),[ni,ti,li,be,H,a]),di=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,o.EC)(e))).filter((e=>null!==e&&((0,o.wj)(e)||(0,o.hn)(e)||(0,o.dB)(e))));if(i.length>0&&b){const e=i.map((e=>e.toURI())),n=$e.current?.getSelected()?.slice(-1)?.[0],t={after:n??"end"};Ve((0,m.jV)(a,e,t))}}),[b,Ve,a]);(0,ae.aw)(di);const oi=(0,n.useCallback)(((e,i)=>{const n=[...i[_.a[o.JM.TRACK]]||[],...i[_.a[o.JM.LOCAL_TRACK]]||[],...i[_.a[o.JM.EPISODE]]||[],...i[_.a[o.JM.ALBUM]]||[]];n.length>0&&b&&(H.logInteraction(Q.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Ve((0,m.jV)(a,n)),qe({targetUri:a,intent:"add",type:"drop"}))}),[b,H,Q,a,Ve,qe]),ci=(0,ke.vI)(ge.k.RichPlaylistPages,Oe),mi=(0,o.EC)(a)?.id;(e=>{const i=(0,t.I0)(),a=(0,w.E)(),l=(0,t.v9)(B);(0,n.useEffect)((()=>{a&&e!==l&&i((0,U.jZ)(e))}),[e,l,i,a])})(a);const ui=(0,t.v9)(Z),ki=(({treatment:e,entityId:i,experimentId:a,treatmentVariation:n})=>{if(e&&e[i]){const t=e[i].find((e=>e.experimentId===a));return t?.treatment===n}return!1})({treatment:ui||{},entityId:mi||"",experimentId:Se.RPP,treatmentVariation:he.VARIANT});const pi=!Ue&&(ci||ki)&&0!==y,vi=!Ie&&q&&(De&&!Le||pi),yi=Ie&&X&&le&&q&&(De&&!Le||pi),gi=(!Ie||X&&le)&&N&&q;ee({context:a,shouldFire:!vi});const Si=j?.count??1,[hi]=(0,E.d4)(),Ni="plays"===Ae.rank_type,xi=(0,n.useMemo)((()=>(0,I.RG)({isMixedMedia:Te,hasEpisodes:x,hasSpotifyAudiobooks:M,hasDateAdded:F,isLive:Fe,isConcert:Ce,isBlend:je,nrCollaborators:Si,isBooklist:Ie,isCompactMode:ue,isChart:fe,showPlayCount:Ni})),[Te,x,M,F,Fe,Ce,je,Si,Ie,ue,fe,Ni]),bi=(0,n.useMemo)((()=>{let e;return e=Xe.getCapabilities().canSort?Ie?new Set(A.i1):new Set((0,I.yj)(xi)):Pt,e}),[xi,Ie,Xe]),fi=le&&Ie&&!ue;return(0,k.jsxs)(n.Suspense,{fallback:null,children:[(0,k.jsx)(h.$,{children:(0,pe.T5)({playlistName:u,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Ue})}),(0,k.jsx)(S.Z,{types:b&&!Ie?[_.a[o.JM.TRACK],_.a[o.JM.LOCAL_TRACK],_.a[o.JM.EPISODE],_.a[o.JM.ALBUM]]:[],onDrop:oi,children:(0,k.jsxs)("section",{role:"presentation",className:T.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,k.jsx)($a.s,{metadata:e.metadata,isPlaying:ni,isPublished:V,totalItems:hi,togglePlay:ri,backgroundColor:ai,spec:Ne}),(0,k.jsxs)("div",{className:T.Z.playlistContent,children:[(0,k.jsx)(Ga,{playlist:e,capabilities:i,spec:be,isPlaying:ni,isActive:ti,togglePlay:ri,isBooklist:Ie,backgroundColor:ai,tracklistDomRef:ei,isConcert:Ce,sortableColumns:bi}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(At,{formatListData:e.metadata.formatListData})}),!Ke&&ze?.upcomingEventsCount?(0,k.jsx)(Et,{artistConcertsUri:ze.uri||"",artistImageUrl:ze.imageUrl||"",artistName:ze.title||"",spec:Q}):null,Ke&&!!ze&&He&&He.length>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Dt,{liveEvents:He,artistConcertsUri:ze.uri||"",artistName:ze.title||"",spec:Q})}),(0,k.jsxs)("div",{className:"contentSpacing",children:[we?(0,k.jsx)(g,{playlistUri:a}):null,Be&&we&&Ue?(0,k.jsx)(Lt,{uri:a,playlistName:u}):null,e.metadata.hasSpotifyAudiobooks&&Ze&&(0,k.jsxs)("div",{className:T.Z.noBooklistSupportContainer,children:[(0,k.jsx)(s.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:c.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,k.jsx)(s.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:c.ag.get("web-player.playlist.booklist-not-supported.message")})]}),v>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:fi?(0,k.jsx)(wi,{initialItems:z,contextUri:a,nrItems:v,canEdit:De,canRemove:f,ariaLabel:u}):(0,k.jsx)(J,{spec:xe,children:(0,k.jsx)(D.a,{columns:xi,children:fe?(0,k.jsx)(Ki,{ariaLabel:u,nrTracks:v,playlistUri:a,scrollToUid:Je,usePlayContextItem:si,tracklistDomRef:ei,sortableColumns:bi,isCompactMode:ue},a):(0,k.jsx)(sn,{ariaLabel:u,nrTracks:v,playlistUri:a,playlistName:u,isMixedMedia:Te,isLive:Fe,isConcert:Ce,isBlend:je,isBooklist:Ie,canEdit:De,scrollToUid:Je,feedbackPath:Ae["dislike-endpoint"],deleteFeedbackPath:Ae["delete-endpoint"],usePlayContextItem:si,tracklistRef:$e,tracklistDomRef:ei,canRemove:f,spec:xe,initialItems:z,isCompactMode:ue,sortableColumns:bi,hasSpotifyAudiobooks:M??!1},a)})})}),gi&&(0,k.jsx)(n.Suspense,{fallback:null,children:Le?(0,k.jsx)(St,{playlistUri:a,onCurationModeChange:Pe,isBooklist:Ie}):(0,k.jsx)("button",{className:T.Z.seeMore,onClick:()=>{Pe(!0)},children:(0,k.jsx)(s.x,{as:"div",variant:"bodySmallBold",children:c.ag.get("playlist.curation.find_more")})})}),vi?(0,k.jsx)("div",{"data-testid":"recommended-track",children:(0,k.jsx)(Rt,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:De})}):null,yi?(0,k.jsx)(Tt,{uri:a}):null]})]}),Ce&&(0,k.jsx)(Xa,{spec:Q.footerSectionFactory()})]})})]})})),wt=n.memo((function({uri:e}){const i=(0,n.useContext)(de.ZF).getCapabilities(),{filter:a}=(0,n.useContext)(R.fo),{sortState:t}=(0,n.useContext)(A.Gb),{metadataOptions:l,contentsOptions:s}=(0,_i.d)(t,a),{data:r,isLoading:d,isError:o}=(0,ue.Z)(e,l,s);return!r||d?(0,k.jsx)(j.h,{hasError:o,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline}):r.metadata.permissions&&!r.metadata.permissions.canView?(0,k.jsx)(F,{uri:e}):(0,k.jsx)(_t,{playlist:r,capabilities:i})})),Ut=()=>{const{playlistId:e}=(0,l.UO)(),i=(0,o.FW)((e||"").split("&")[0]).toURI();return(0,k.jsx)(le.fd,{surface:le.Tg.PLAYLIST,uris:[i],children:(0,k.jsx)(A.kz,{uri:i,children:(0,k.jsx)(R.hz,{uri:i,children:(0,k.jsx)(E.Y4,{children:(0,k.jsx)(wt,{uri:i})})})})})}},64518:(e,i,a)=>{a.d(i,{vI:()=>n});a(38910);const n=(e,i)=>{const a=i?new URLSearchParams(i.search):void 0;return"1"===a?.get(e)}},3839:(e,i,a)=>{a.d(i,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e}({})},34806:(e,i,a)=>{a.d(i,{Z:()=>n});const n={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map