"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1963],{69187:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>Oe,TEST_IDS:()=>De});var r=i(50959),l=i(82187),n=i.n(l),a=i(27443),o=i(12737),s=i(1448),c=i(10992),u=i(69111);const d="AFZj_hxk7gFsvDDwhsHA",m="UJwngpM5puDW7Frkha4F",x="fZA1mqxFFXYzdoCs87uS",k="hVA5A4j0Jk84rRzVPic6",g="IAd52FjnzrHlY7BuFfXL",f="x34LUemkmouEY9yiADrQ",h="Xu6ZnDJTHWNZ4oCozM1c",p="ktiXGqfcVuegTncUQJim",y="u7pi5kPx9ekghoqH8RcS",C="EzVSQ6md_ZPcpGd373uw",A="xM5DXnNVIBKl0D8KmkKr",v="xZLIxv5s2tm_tmFk3WK8",j="X_fBDy8Kj2NkVB4npQT3",b="yMMglN43dvX2QKTUoivA",S="DfXLVYiuXV0cy_BuUJl5",N="D0BU1OBnl1EjBDosrWXn",w="tKfqdd6glswVG49yHgiT",B="Hbbk972I34uVuWeqBn2Q",T="C6EYDB6Ad1ITBH4MMhyM",P="xI3ObXOh1ql5ZWoAUyff",R="transparent";var E=i(64366),M=i(73196),F=i(45968),V=i(91845),I=i(33904),L=i(47858),_=i(11527);const D=()=>{const{item:e,context:t}=(0,u.x)()??{},i=(0,r.useMemo)((()=>(0,L.o)(e?.images??void 0,{desiredSize:640})),[e?.images,640]),{isPlayingRemotely:l}=(0,I.H)(),a=(0,o.W6)(M.YZd),{isYourDJNarrator:s}=(0,E.NV)();if(!e||!t)return null;if(s)return(0,_.jsx)("div",{className:n()(b,S),children:(0,_.jsx)(E.r_,{})});const c=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e);let d=!c;return!c||!l&&a||(d=!0),d?(0,_.jsx)(V.Ee,{className:b,src:i,loading:"eager",testid:De.COVER_ART,children:(0,_.jsx)("div",{className:N,children:(0,_.jsx)(F.t,{size:"xlarge",type:e.type,"data-testid":De.COVER_ART_PLACEHOLDER})})}):null};i(69380),i(78136);var O=i(89907),z=i(8495),U=i(81085),H=i(97018),W=i(82694),Y=i(83117),q=i(75152),X=i(86192),Z=i(27324),G=i(76482);const K="gXC4vnPDiiiiawwnDN6i",Q="HGOZPJuKeigRY5I0vqQw",J="AZLdtyFhMa1Aqml2YhF2",$="QfiWYSeXiPwGYmKED38q";const ee=({item:e,onClick:t,className:i})=>{const r=(0,Y.QR)(e),l=(0,z.k6)(e)?r?.title:e.name,a=(0,z.k6)(e)?r?.subtitle:e.name,o=(0,W.G)(),s="SMALL"===(c=o.vertical)?{title:"bodySmall",subtitle:"marginal"}:"MEDIUM"===c?{title:"bodyMedium",subtitle:"bodySmall"}:{title:"titleSmall",subtitle:"bodySmall"};var c;return(0,_.jsxs)("div",{className:n()(K,i),children:[(0,_.jsx)("div",{className:Q,children:(0,_.jsx)(Z.R,{title:l,children:(0,_.jsx)(H.x,{"data-testid":"context-item-info-title",as:"div",variant:s.title,className:Q,dir:"auto",children:(0,_.jsx)(X.b,{item:e,onClick:t,adUrl:r?.url,children:l})})},e.uri)}),(0,_.jsx)(G.t,{className:$,item:e}),(0,_.jsx)("div",{className:J,children:(0,_.jsx)(Z.R,{title:a,children:(0,_.jsx)(H.x,{"data-testid":"context-item-info-subtitles",as:"div",variant:s.subtitle,className:J,semanticColor:"textSubdued",children:(0,_.jsx)(q._,{item:e,onClick:t,adSubtitle:a,adBlurbUri:r?.blurbUri,adUrl:r?.url?r?.url:void 0})})},e.uri)})]})};var te=i(95264),ie=i(65341),re=i(13129),le=i(24839);const ne="yGrUaUzhqIFvdg5zlVYX",ae="NSayKQ_soKzuAAg2YhAq",oe="eF7BXmqMaY8xVdOtoH1Z",se="UgnljPH_Vf14LZWb1jBu",ce={title:"bodyMediumBold",subtitle:"bodySmall"},ue={title:"titleSmall",subtitle:"bodyMedium"},de=r.memo((()=>{const{openURLWithSessionTransfer:e}=(0,re.e)(),t="SMALL"===(0,W.G)().vertical?ce:ue,i=(0,le.d)("loggedin_upgrade_button"),l=(0,r.useCallback)((()=>{e(i(ie.IT),"_blank")}),[i,e]);return(0,_.jsx)("div",{className:ne,children:(0,_.jsxs)("div",{className:n()("encore-dark-theme","encore-layout-themes",ae),children:[(0,_.jsx)(H.x,{variant:t.title,dir:"auto",className:oe,children:c.ag.get("web-player.pip-mini-player.upsell.title")}),(0,_.jsx)(H.x,{variant:t.subtitle,semanticColor:"textSubdued",children:c.ag.get("web-player.pip-mini-player.upsell.subtitle")}),(0,_.jsx)("div",{className:se,children:(0,_.jsx)(te.D,{onClick:l,size:"small",children:c.ag.get("web-player.pip-mini-player.upsell.cta-button")})})]})})}));var me=i(28497),xe=i(42871),ke=i(54690),ge=i(82610);const fe=r.memo((()=>"SMALL"!==(0,W.G)().vertical?(0,_.jsxs)("svg",{className:k,width:"14",height:"6",viewBox:"0 0 14 6",fill:"none",children:[(0,_.jsx)("circle",{cx:"1",cy:"5",r:"1",transform:"rotate(-90 1 5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"1",cy:"1",r:"1",transform:"rotate(-90 1 1)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"5",cy:"5",r:"1",transform:"rotate(-90 5 5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"5",cy:"1",r:"1",transform:"rotate(-90 5 1)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"9",cy:"5",r:"1",transform:"rotate(-90 9 5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"9",cy:"1",r:"1",transform:"rotate(-90 9 1)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"13",cy:"5",r:"1",transform:"rotate(-90 13 5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"13",cy:"1",r:"1",transform:"rotate(-90 13 1)",fill:"#A7A7A7"})]}):(0,_.jsxs)("svg",{className:k,width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",children:[(0,_.jsx)("circle",{cx:"4.5",cy:"10.5",r:"0.75",transform:"rotate(180 4.5 10.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"1.5",cy:"10.5",r:"0.75",transform:"rotate(180 1.5 10.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"4.5",cy:"7.5",r:"0.75",transform:"rotate(180 4.5 7.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"1.5",cy:"7.5",r:"0.75",transform:"rotate(180 1.5 7.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"4.5",cy:"4.5",r:"0.75",transform:"rotate(180 4.5 4.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"1.5",cy:"4.5",r:"0.75",transform:"rotate(180 1.5 4.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"4.5",cy:"1.5",r:"0.75",transform:"rotate(180 4.5 1.5)",fill:"#A7A7A7"}),(0,_.jsx)("circle",{cx:"1.5",cy:"1.5",r:"0.75",transform:"rotate(180 1.5 1.5)",fill:"#A7A7A7"})]}))),he=({className:e})=>{const{setVideoPlayerUIFlag:t}=(0,xe.l)(),{onClick:i}=(0,ke.r)({}),l=(0,r.useCallback)((()=>{t(ge.x.documentPip,!1),i()}),[t,i]);return(0,_.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:n()(e,x),children:[(0,_.jsx)("button",{className:g,onClick:l,children:(0,_.jsx)(me.k,{size:"xsmall",className:f})}),(0,_.jsx)(fe,{}),(0,_.jsx)("div",{className:h})]})};var pe=i(42957),ye=i(49857),Ce=i(73343),Ae=i(944),ve=i(36680),je=i(26702),be=i(39852),Se=i(49613),Ne=i(30678),we=i(64546),Be=i(54329);function Te(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,we.k)(e)??-1,totalContentMs:e.duration??-1}}function Pe(e){return Math.floor(100*e)}const Re="E7rR1kkQFoqCTrZAxs8l",Ee="I2v17dp_FDztHzG7CZy9",Me="H5VJw6yCxUOoh88LJ42y",Fe=r.memo((({item:e,spec:t,logger:i})=>{const l=e.uri,{onClickPlayPause:n,onClickLike:a,onClickSkipPrevious:o,onClickSkipNext:s,onClickRepeat:c,onClickShuffle:u,onClickVolumeButton:d,onClickVolumeBar:m,onDragVolumeBar:x,onClickSeekBack:k,onClickSeekForward:g}=(({uri:e,spec:t,logger:i})=>{const l=(0,r.useRef)(e);l.current=e;const n=(0,Ne.g)(),a=(0,r.useMemo)((()=>t.playerControlsFactory()),[t]),o=(0,r.useCallback)((e=>{let t=null;l.current&&("pause"===e?t=a.playPauseButtonFactory().hitPause({itemToBePaused:l.current}):"resume"===e&&(t=a.playPauseButtonFactory().hitResume({itemToBeResumed:l.current})),t&&i.logInteraction(t))}),[i,a]),s=(0,r.useCallback)((e=>{if(!l.current)return;const t=a.likeButtonFactory(),r=e?t.hitLike({itemToBeLiked:l.current}):t.hitRemoveLike({itemNoLongerLiked:l.current});i.logInteraction(r)}),[i,a]),c=(0,r.useCallback)((()=>{const e=n.getState();if(!e)return;const t=a.previousButtonFactory().hitSkipToPrevious(Te(e));i.logInteraction(t)}),[i,n,a]),u=(0,r.useCallback)((()=>{const e=n.getState();if(!e)return;const t=a.nextButtonFactory().hitSkipToNext(Te(e));i.logInteraction(t)}),[i,n,a]),d=(0,r.useCallback)((e=>{const t=a.repeatButtonFactory();let r=null;switch(e){case z.zq.REPEAT_TRACK:r=t.hitRepeatOneEnable();break;case z.zq.REPEAT_CONTEXT:r=t.hitRepeatEnable();break;case z.zq.REPEAT_NONE:r=t.hitRepeatDisable();break;default:(0,Be._)(e)}r&&i.logInteraction(r)}),[i,a]),m=(0,r.useCallback)((e=>{if(!l.current)return;const t=e?"shuffle":"linear",r=e?"linear":"shuffle",n=a.shuffleButtonFactory({uri:l.current}).hitSelectShuffleMode({previousMode:r,selectedMode:t});i.logInteraction(n)}),[i,a]),x=(0,r.useCallback)((e=>{const t=a.volumeMuteButtonFactory();i.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,a]),k=(0,r.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:Pe(e)}))}),[i,a]),g=(0,r.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:Pe(e)}))}),[i,a]),f=(0,r.useCallback)((e=>{const t=a.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]);return{onClickSeekForward:(0,r.useCallback)((e=>{const t=a.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]),onClickSeekBack:f,onClickPlayPause:o,onClickLike:s,onClickSkipPrevious:c,onClickSkipNext:u,onClickRepeat:d,onClickShuffle:m,onClickVolumeButton:x,onClickVolumeBar:k,onDragVolumeBar:g}})({uri:l,spec:t,logger:i}),f=(0,W.G)(),h=(0,ye.y1)(x,500,{leading:!1,trailing:!0});if(!l)return null;const p=(0,Ae.G)(e),y=(0,Ce.i)(e),C=function(e){if((0,Ce.i)(e)||(0,z.G7)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e),A="SMALL"===f.horizontal,v="SMALL"===f.vertical,j="MEDIUM"===f.vertical;return v?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(be.IF,{onClick:n}),C?(0,_.jsx)(be.Of,{onClick:g}):(0,_.jsx)(be.C$,{onClick:s})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:Re,children:[p&&(0,_.jsx)(je.B,{uri:l,onClick:a,className:Ee}),y&&(0,_.jsx)(ve.w,{uri:l,onClick:a,className:Ee})]}),C?(0,_.jsx)(be.FP,{onClick:k}):(0,_.jsx)(be.P4,{onClick:u}),(0,_.jsx)(be.Wu,{onClick:o}),(0,_.jsx)(be.IF,{iconSize:A||j?"small":"medium",onClick:n,className:Me}),(0,_.jsx)(be.C$,{onClick:s}),C?(0,_.jsx)(be.Of,{onClick:g}):(0,_.jsx)(be.$Z,{onClick:c}),(0,_.jsx)(Se.h,{mode:Se.R.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:h})]})}));var Ve=i(9958);var Ie=i(48140);function Le(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}var _e=i(67736);const De={HOVER_CONTAINER:"document-pip-hover-element",COVER_ART:"document-pip-cover-art",COVER_ART_PLACEHOLDER:"document-pip-cover-art-placeholder"},Oe=r.memo((()=>{const{item:e,context:t}=(0,u.x)()??{},[i,l]=(0,r.useState)(!1),x=640,k=(0,o.W6)(M.nN2),g=(0,r.useMemo)((()=>(0,L.o)(e?.images??void 0,{desiredSize:x})),[e?.images,x]),f=(0,O.b)(g,R),h=(0,o.W6)(M.YZd);((e,t)=>{const i=(0,_e.Y)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),l=(0,r.useMemo)((()=>(0,L.o)(i?.images??void 0,{desiredSize:e})),[i?.images,e]);(0,O.b)(l,t)})(x,R);const{spec:b,logger:S}=(0,U.fU)(s.O,{});(({spec:e,logger:t})=>{const i=(0,Ve.zY)(),l=(0,r.useRef)(null);null===l.current&&(l.current=Le(i)),(0,Ie.a)((()=>{const r=Le(i);null!==r&&null!==l.current&&(t.logInteraction(e.dragUiResize2d({startWidthPx:l.current.width,startHeightPx:l.current.height,endWidthPx:r.width,endHeightPx:r.height})),l.current=r)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:S,spec:b}),(({spec:e,logger:t,pipWindow:i})=>{(0,r.useEffect)((()=>{if(!i)return;const r=r=>{if(r.currentTarget===i){const i=e.windowControlsFactory().closeButtonFactory().hitUiHide();t.logInteraction(i)}};return i.addEventListener("pagehide",r),()=>{i.removeEventListener("pagehide",r)}}),[t,i,e])})({logger:S,spec:b,pipWindow:window.documentPictureInPicture?.window??null});const{setVideoPlayerUIFlag:N}=(0,xe.l)(),[E,F]=(0,r.useState)("");(0,r.useLayoutEffect)((()=>{F(m)}),[]);const V=function(){const e=(0,Ve.zY)(),[t,i]=(0,r.useState)(!1);return(0,Ie.a)((()=>{const t=Le(e);null!==t&&(t.width<=300&&t.height<=300?i(!0):i(!1))}),{throttleTime:500,leading:!1,trailing:!0}),t}();(0,r.useEffect)((()=>{h&&N(ge.x.documentPip,!0)}),[h,N]);const I=(0,r.useCallback)((e=>{var t;(t=e.target)&&"object"==typeof t&&"nodeName"in t&&"A"===t.nodeName&&"_blank"!==e.target.target&&("showMainWindow"in window?window.showMainWindow?.():l(!0))}),[]);((e,t)=>{const i=(0,Ve.zY)(),l=t??i;(0,r.useEffect)((()=>{e&&l&&(l.document.title=e)}),[e,l])})(c.ag.get("web-player.pip-mini-player.window-title")),(0,r.useEffect)((()=>{if(i){const e=setTimeout((()=>{l(!1)}),3e3);return()=>{clearTimeout(e)}}}),[i]);const H=(0,r.useRef)(null),[W,Y]=(0,r.useState)(!1),q=(0,r.useRef)(null),X=(0,r.useRef)(null),Z=(0,r.useCallback)((()=>{Y(!0),q.current&&clearTimeout(q.current),q.current=setTimeout((()=>{Y(!1);const e=Number((getComputedStyle(H.current).getPropertyValue("--mouse-active-over-controls-fadeout-timeout")||"300ms").replace("ms",""));X.current&&clearTimeout(X.current),X.current=setTimeout((()=>{X.current=null}),e)}),1e3)}),[]),G=(0,r.useCallback)((()=>{X.current||Y(!1)}),[]);if(!e||!t)return null;const K={"--background-color":f,"--background-image-url":`url(${g})`,"--background-image-width":"640px","--background-image-height":"640px",display:"var(--mini-player-display)"},Q=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e),J=(0,z.k6)(e);return!k&&!J&&V?(0,_.jsx)(de,{}):(0,_.jsxs)("div",{ref:H,className:n()("encore-dark-theme","encore-layout-themes",d),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,_.jsx)(he,{}),(0,_.jsxs)("div",{className:n()(p,y),style:K,children:[(0,_.jsx)("div",{className:n()(A,{[v]:!Q}),"data-testid":"pip-hover-element",children:(0,_.jsx)("div",{className:j,id:"document-pip-main-container",children:(0,_.jsx)(D,{})})}),(0,_.jsx)(ee,{item:e,className:P,onClick:I}),(0,_.jsx)("div",{className:n()("encore-over-media-set",w,{[T]:W,[B]:!(0,z.k6)(e)}),dir:"ltr","data-testid":De.HOVER_CONTAINER,onMouseEnter:Z,onMouseMove:Z,onMouseLeave:G,children:(0,_.jsx)(Fe,{item:e,spec:b,logger:S})})]}),(0,_.jsx)("div",{className:E,children:(0,_.jsx)(pe.E,{fadeIn:!1})}),(0,_.jsx)(a.A9,{colorSet:"invertedLight",showSnackbar:i,className:C,children:c.ag.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")})]})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map