"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{38109:(e,t,s)=>{s.d(t,{p:()=>c,q:()=>n.q});var i=s(50959),a=s(16254),n=s(76999),r=s(28528),o=s(11527);const l=i.memo((function({uri:e,size:t=n.q.md,className:s,onClick:l,showUpsell:c}){const[d,u]=(0,a.Z)(e),p=(0,r.o)(),m=(0,i.useCallback)((()=>{p({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),u(!d)}),[p,e,d,u]);return(0,o.jsx)(n.o,{className:s,isFollowing:d,onFollow:m,onClick:l,uri:e,size:t,showUpsell:c})})),c=i.memo((function(e){return(0,o.jsx)(l,{...e})}))},48621:(e,t,s)=>{s.d(t,{o:()=>n});var i=s(29611),a=s(90343);function n(){return{version:(0,i.W6)(a.GEN)?2:1}}},42580:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Et});s(55330);var i=s(50959),a=s(3733),n=s(76917),r=s(218),o=s(32581),l=s(90880),c=s(5701),d=s(8968),u=s(24889),p=s(77864),m=s(65537),h=s(29611),x=s(90343),y=s(48621),g=s(71215),k=s(11527);const j=(0,i.lazy)((()=>s.e(9098).then(s.bind(s,69098)))),b=(0,i.lazy)((()=>s.e(6741).then(s.bind(s,26741))));function C(e){const t=(0,g.m)(),s=(0,h.W6)(x.XKk,{loadingValue:!1}),a=(0,y.o)();return t?s?e.uri?(0,k.jsx)(i.Suspense,{fallback:!0,children:(0,k.jsx)(b,{uri:e.uri})}):null:(0,k.jsx)(i.Suspense,{fallback:!0,children:(0,k.jsx)(j,{reason:"Episode page",...a,...e})}):null}const P="dpN5ViPOceUWNB5EQPHN",T="fBEA27lLw_sc60Zjd_qw",f="vBcxPq3E2okwgXOkVPEM",I="CxoSYuAjlcCDSOWnnbJe",S="HCCBXwdFvq6omWW2hR0N",v="bJOPO5Zo7dpjSVDwEpSw",E="TXdDDpokVTyJzDEDWHHf",U="tvj001zNcrC5VUZmTt9c",N="PC5kR03GYecc7syeoC0q",w="YldGldlfaI9myEGXQf9g",D="qJHVIpJn1vLPWsAKfTEZ",L="wSIzjkVlr0Zdy7di2vRm",A="hYS_K1NATGyWt6tCSRqQ",R="hVVaM4pF9arpQ8Nvn2a1",M="zf0Eac1LugsHUacz74Zf",B="TnNaqxbaI0hzhBQZ7wE0",F="zSw1lG1TNe_xm6KTqtCv",O="MlEQDkXnjdKKJueJ9kkB",z="jg0xlyD1yjh0DPNG6eOg",_="QiHXpFb4dLZNOFe5gpp3";var $=s(88798),H=s(8823),W=s(59242),K=s(60820),Z=s(24723);const V=({cardHeaderText:e,cardBodyText:t,buttonText:s,buttonTarget:i})=>(0,h.W6)(x.XdP)?(0,k.jsxs)("div",{className:w,children:[(0,k.jsxs)("div",{className:D,children:[(0,k.jsx)($.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,k.jsx)($.x,{semanticColor:"textBase",children:t})]}),(0,k.jsx)(K.D,{size:"small",colorSet:"invertedLight",href:(0,l.EC)(i).toURLPath(!0),component:Z.Z,children:s})]}):null,q=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:a,htmlDescription:n,onExpanded:r,onTimeStampClick:o,playability:l,showHeader:d=!0,spec:u})=>{const p=(0,W.$P)(),m=(a||t)&&d,y=(0,i.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]),g=(0,h.W6)(x._nP,{loadingValue:!1});return(0,k.jsxs)(k.Fragment,{children:[m&&(0,k.jsx)($.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:S,children:c.ag.get("episode.description-title")}),t&&(0,k.jsx)(V,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),a&&(0,k.jsx)(H.o,{className:f,onTimeStampClick:o,maxLines:4,onExpanded:y,content:(s||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:l.playable,enableAutomaticLinkification:g&&e&&!!n})]})};var Y=s(84875),Q=s.n(Y),X=s(75390),G=s(62849),J=s(55230),ee=s(44009),te=s(95248),se=s(56522),ie=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(ie||{});const ae=i.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:s,spec:a}){const n=(0,W.$P)(),[r,o]=(0,i.useState)(ie.DESCRIPTION),l=(0,se.Mi)(),{ref:d,inView:u}=(0,X.YD)({threshold:[1],root:l.current,rootMargin:`-${te.K1+1}px 100000px 0px 100000px`}),p=(0,i.useRef)(null),m=(0,i.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,i.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const s=e-te.K1;t.scrollTop>s&&t.scrollTo({top:s})}),[l,r]),(0,k.jsx)(G.l,{list:(0,k.jsxs)(J.F,{className:Q()(O,{[z]:!u}),ref:m,children:[(0,k.jsx)(ee.c,{label:c.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===ie.DESCRIPTION,onClick:()=>{const e=a.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(ie.DESCRIPTION)},className:Q()(_,{[L]:r===ie.DESCRIPTION})}),(0,k.jsx)(ee.c,{label:c.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===ie.TRANSCRIPT,onClick:()=>{const e=a.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(ie.TRANSCRIPT)},className:Q()(_,{[L]:r===ie.TRANSCRIPT})})]}),children:null===e||r===ie.DESCRIPTION?t:s})}));var ne=s(84576),re=s(30336),oe=s(22038),le=s(78602);const ce=(0,i.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:s}){const{spec:i,logger:a}=(0,W.fU)(ne.m,{data:{uri:s}}),{isPlaying:n}=(0,oe.n)({uri:s},{featureIdentifier:"episode"}),r=i.timestampLinkFactory();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:R,children:(0,k.jsx)($.x,{variant:"bodySmall",semanticColor:"textBase",children:c.ag.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,i)=>{const o=`transcript-section-${i}`;return(0,k.jsxs)("div",{className:A,children:[(0,k.jsx)("button",{className:M,onClick:()=>{t(e.startMs,o),a.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:s}))},children:(0,k.jsx)(re.D,{id:o,targetURI:(0,l.EC)(s),fadeOut:!0,children:(0,k.jsx)($.x,{variant:"marginalBold",semanticColor:"textSubdued",className:B,children:(0,le.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,k.jsx)($.x,{variant:"bodySmall",semanticColor:"textBase",className:F,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));s(14534),s(82063);var de=s(55377),ue=s(41812),pe=s(14106),me=s(86506),he=s(74476),xe=s(51537),ye=s(73806),ge=s(8516),ke=s(14246),je=s(19320),be=s(69767),Ce=s(76685);const Pe="OYehkMWcGJRKPkByp46K",Te="uc1bXkrZqrCz0CMK4lBb",fe="qZeibBbA3SVClzEueYND",Ie=({episodeUri:e,index:t,duration:s,start:a,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,ke.k)({episodeUri:e,start:a,stop:n}),x=(0,i.useCallback)(((e,t)=>{h(t)}),[h]),{spec:y}=(0,W.fU)(he.r,{data:{position:t,reason:"",uri:o}});return(0,k.jsx)(be.JL,{value:"row",index:t,children:(0,k.jsx)(je.xV,{trigger:"right-click",action:"open",menu:(0,k.jsx)(xe.$,{uri:o}),children:(0,k.jsxs)(ge.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:x,isActive:p,isPlayable:u,spec:y,children:[(0,k.jsxs)(ye.vZ,{ariaColIndex:0,children:[(0,k.jsx)(ye.Du,{uri:o,playAriaLabel:c.ag.get("tracklist.a11y.play",r,l?.[0].name),onClick:x,isPlaying:m,isActive:p,spec:y,children:(0,k.jsx)(ye.km,{children:(0,k.jsx)("img",{className:Te,src:d.image,alt:d.name})})}),(0,k.jsxs)(ye.vm,{children:[(0,k.jsx)(ye.Wh,{titleText:r,children:r}),(0,k.jsx)(ye.K9,{children:(0,k.jsx)(ye.T6,{artists:l,spec:y})})]})]}),(0,k.jsx)(ye.UA,{ariaColIndex:1,children:(0,k.jsx)(ye.BM,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,k.jsxs)(ye.mU,{ariaColIndex:2,children:[(0,k.jsx)(Ce.f,{uri:o,spec:y}),(0,k.jsx)(ye.A$,{duration:s}),(0,k.jsx)(ye.Zv,{spec:y,menu:(0,k.jsx)(xe.$,{uri:o,artists:l}),label:c.ag.get("more.label.track",r,l?.[0].name)})]})]})})})};function Se(e,t,s){return e.reduce(((e,i,a)=>((a>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===i.type?e.push(function(e,t,s){return{type:"MUSIC",index:t,uri:s.uri,episodeUri:e,start:s.start,stop:s.stop,duration:s.duration,name:s.track.name,artists:s.track.artists,album:s.track.album,playable:s.track.playable}}(s,a,i)):"TALK"===i.type&&e.push(function(e,t,s){return{type:"TALK",index:t,uri:e,title:s.title,subtitle:s.subtitle,start:s.start,stop:s.stop,duration:s.duration,showUri:s.show.uri,showName:s.show.name}}(s,a,i)),e)),[])}const ve=({uri:e,segmentCount:t})=>{const s=(0,pe.G)(),a=(0,i.useCallback)((async(i,a)=>{const n=Math.ceil(i/2);try{return{items:Se(await s.getSegments(e,n,a),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,s,e]),n=(0,i.useCallback)((t=>{switch(t.type){case"SPACER":return(0,k.jsx)("div",{className:fe},t.id);case"MUSIC":return(0,k.jsx)(Ie,{...t},`${e}-${t.index}`);case"TALK":return(0,k.jsx)(de.t,{...t},`${e}-${t.index}`);default:return(0,me.U)(t)}}),[e]),r=(0,i.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.ag.get("music_and_talk.in_this_episode");return(0,k.jsxs)("div",{children:[(0,k.jsx)($.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Pe,children:o}),(0,k.jsx)(ue.Pv,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:ue.hU,columns:[ue.QD.TITLE_AND_ARTIST,ue.QD.ALBUM_OR_SHOW,ue.QD.DURATION],renderRow:n,fetchTracks:a,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var Ee=s(82575);const Ue=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:s,hasDescription:a,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:d,playability:u,segmentCount:p,showUrl:h,transcript:x,uri:y,spec:g})=>{const j=(0,W.$P)(),b=(0,i.useMemo)((()=>g.descriptionSectionFactory()),[g]),P=(0,i.useMemo)((()=>b.trackListFactory()),[b]),[T,f]=(0,i.useState)(null),I=(0,i.useCallback)((async e=>{const t=await(0,Ee.l)(e);f(t)}),[]);(0,i.useEffect)((()=>{x&&x.length>0&&I(x[0].cdnUrl)}),[I,x]);const S=i=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(q,{hasDescription:a,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:s,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:i,spec:b}),n&&(0,k.jsx)(W.Nh,{spec:P,children:(0,k.jsx)(ve,{segmentCount:p,uri:y})}),h&&(0,k.jsx)(m.P,{size:"small",className:v,href:h,component:Z.Z,onClick:()=>{j.logInteraction(b.allEpisodesLinkFactory().hitUiNavigate({destination:h}))},children:c.ag.get("episode.see_all_episodes")}),(0,k.jsx)(C,{uri:y})]});return(0,k.jsx)(k.Fragment,{children:x&&x?.length>0?(0,k.jsx)(ae,{transcriptSections:T,descriptionContent:S(!1),transcriptContent:(0,k.jsx)(ce,{transcriptSections:T||[],onTimeStampClick:d,episodeUri:y}),spec:g}):S(!0)})};var Ne=s(60081),we=s(84726),De=s(71751),Le=s(4704);const Ae="activation-trigger-mme",Re=({episodeUri:e,showUri:t,isLocked:s,isPlaying:i,isPlayDisabled:a,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,Le.E)();if((0,we.g)())return(0,k.jsx)(De.f,{size:c,onClick:o,isPlaying:i,disabled:a,locked:s,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,k.jsx)(Ne.l,{showUri:t,enabled:s,renderInline:!1,children:(0,k.jsx)(De.f,{size:c,onClick:o,isPlaying:i,disabled:a,locked:s,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,k.jsx)(re.D,{id:Ae,targetURI:(0,l.EC)(e),fadeOut:!0,children:u}):u};var Me=s(28528),Be=s(55220),Fe=s(6473),Oe=s(49225),ze=s(11765),_e=s(81468),$e=s(5541),He=s(86769),We=s(1186),Ke=s(11024),Ze=s(91733),Ve=s(92389),qe=s(79320),Ye=s(84816),Qe=s(38109),Xe=s(95018),Ge=s(59012),Je=s(54878),et=s(90922),tt=s(43113),st=s(75317),it=s(28053),at=s(50832),nt=s(67107),rt=s(22362),ot=s(38776),lt=s(40086);const ct=({episode:e,onPlayEpisode:t,isPlaying:s,isActive:a,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,x=(0,W.$P)(),y=(0,Ve.I0)(),[g]=(0,at.z)(1e4,(e=>e?.item?.uri===u)),j=(0,_e.Y)((e=>e?.duration)),{badges:b}=(0,rt.r)({contentRating:m?.label}),C=(0,i.useCallback)((e=>{!h.playable&&b.nineteen&&(e.stopPropagation(),y((0,qe.RM)(u||"")))}),[u,h.playable,b.nineteen,y]),P=(0,i.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();x.logInteraction(e)}),[x,d]),T=(0,i.useCallback)(((e,t)=>{(0,tt.l7)(t,d.downloadButtonFactory(),x,u)}),[x,d,u]),f=(0,i.useCallback)((e=>{const t=d.saveButtonFactory();x.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[x,d,u]),I=!l&&!e.playability.playable,S=c.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),v=c.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),U=e.podcast?.uri,N=(0,ot.j)(),w=(0,et.r)(e.uri);return(0,k.jsxs)(Ye.o,{backgroundColor:o,children:[(0,k.jsxs)(Ye.F,{children:[b.nineteen&&(0,k.jsx)(it.X,{className:E,size:16}),(0,k.jsx)(nt.E,{fullyPlayed:n,durationMs:a&&j?j:e.duration.milliseconds,releaseDate:Ut(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:s,position:a&&g||void 0})]}),(0,k.jsxs)(Ye.F,{children:[(0,k.jsx)("div",{onClick:C,children:(0,k.jsx)(Re,{episodeUri:e.uri,showUri:U,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:s,isPlayDisabled:I,playButtonPlayLabel:S,playButtonPauseLabel:v,size:N})}),!l&&(0,k.jsx)(Qe.p,{uri:e.uri,onClick:T,size:N}),w?(0,k.jsx)(lt.T,{uri:e.uri,size:N}):(0,k.jsx)(Ge.w,{uri:e.uri,size:N,onClick:f}),(0,k.jsx)(st.y,{onShow:P,menu:(0,k.jsx)(Je.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:U,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,k.jsx)(Xe.z,{label:c.ag.get("more.label.context",e.name),size:N})})]})]})};s(56321);var dt=s(22866),ut=s(47990),pt=s(17703),mt=s(61925),ht=s(69082),xt=s(81988),yt=s(54171),gt=s(44870),kt=s(78610),jt=s(10473),bt=s(53981),Ct=s(50807);const Pt=({coverArt:e,name:t})=>{const s=(0,jt.jh)(),i=s===jt.Uo.SMALL||s===jt.Uo.XSMALL;return(0,k.jsx)(bt.O,{images:e,type:Ze.p.EPISODE,shape:bt.K.ROUNDED_CORNERS,title:t,size:i?Ct.m$.SIZE_20:Ct.m$.SIZE_24,className:U})};const Tt=({episode:e,isFullyPlayed:t,setIsFullyPlayed:s,backgroundColor:a,spec:n})=>{const{uri:r,name:o,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m,coverArt:h}=e,x=(0,W.$P)(),y=function(e,t,s,i,a){const n=t===Ke.Wf.Episode;return(0,kt.G3)(e,i,s,a)?(0,k.jsx)(kt.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(r,p||Ke.Wf.Unknown,u.playPositionMilliseconds,Ut(m?.isoString),u.state===Ke.sY.Completed),g=e.podcast?.uri,j=function(e){const t=(0,l.EC)(e);return`/show/${(0,l.HB)(t?.id||"")}`}(g),b=(0,i.useCallback)((()=>{x.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:j}))}),[x,j,n]),C=e.podcast?.coverArt,P=!!(C&&C.length===h.length&&h.every(((e,t)=>e.url===C[t].url))),f=(0,jt.jh)();return(0,k.jsxs)(dt.gF,{backgroundColor:a,children:[(0,k.jsx)(pt.W,{children:(0,k.jsx)(mt.i,{text:o,dragUri:r,dragLabel:o})}),!P&&(0,k.jsx)(ut.k,{children:(0,k.jsx)(gt._,{menu:(0,k.jsx)(Je.k,{uri:r,sharingInfo:d,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:s}),children:(0,k.jsx)(dt.Oe,{loading:"eager",name:o,images:h,placeholderType:"episode",shape:dt.Kc.SQUARE})})}),(0,k.jsxs)(dt.sP,{children:[(0,k.jsx)(ht.g,{children:y}),(0,k.jsx)(gt._,{menu:(0,k.jsx)(Je.k,{uri:r,sharingInfo:d,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:s}),children:(0,k.jsx)(dt.xd,{dragUri:r,dragLabel:o,scaleAtMinWidth:dt.vz,className:T,children:(0,k.jsx)("span",{"data-testid":"episodeTitle",children:o})})}),(0,k.jsx)(gt._,{menu:(0,k.jsx)(Je.k,{uri:r,sharingInfo:d,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:s}),children:(0,k.jsxs)(yt.default,{to:j,onClick:b,className:N,children:[P&&(0,k.jsx)(Pt,{name:o,coverArt:h}),(0,k.jsx)(xt.m,{className:f===jt.Uo.SMALL&&P?"":I,children:(0,k.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var ft=s(29729),It=s(9831),St=s(90889);const vt=({episode:e})=>{const{uri:t,episodeType:s,description:n,htmlDescription:o,podcastSubscription:c,segmentsCount:p,podcast:m,contentInformation:h,playedState:x,coverArt:y}=e,{spec:g,logger:j}=(0,W.fU)(r.J,{data:{uri:t}}),b=(0,ft.k)(),C=(0,i.useMemo)((()=>g.headerFactory()),[g]),T=(0,i.useMemo)((()=>g.actionBarFactory()),[g]),[f,I]=(0,i.useState)(x.state===Ke.sY.Completed),S=(0,Oe.g)(),v=(0,Me.o)(),E=void 0!==p&&p>0,U=(0,we.g)(),{triggerPlay:N,togglePlay:w,isActive:D}=(0,oe.n)({uri:t,...b?{}:{pages:[{items:[{type:Ze.p.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:L,isPlaying:A}=(0,ze.$o)(t),R=y[0].url,M=(0,Fe.Zj)(R||null),B=(0,_e.Y)((e=>e?.isPaused??void 0)),F=(0,Le.E)(),O=c.isPaywalled&&!c.isUserSubscribed,z=L||D,_=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,$=m?{name:m.name,uri:m.uri,trailer:m.trailer,showTypes:m.showTypes}:null,H=(0,Be.s)(_,$),K=(0,i.useCallback)(((e,i,a,n)=>{const r=()=>{B?(n?.("resume"),S.resume()):(n?.("pause"),S.pause())};if(O)return;let o="play";if(!A||0!==e&&i||(o="pause"),v({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),s===Ke.Wf.Episode&&F)u.y.set((()=>({triggerId:a||Ae,triggerAction:null})));else if(D&&!i)U?r():w({loggingParams:n?.()});else if(L&&!i)r();else{const t=n?.("play");U?H({seekTo:e,loggingParams:t}):N({seekTo:e,loggingParams:t})}}),[O,A,v,t,s,F,L,D,U,B,S,w,H,N]),Z=(0,i.useCallback)((e=>{K(e,!1,void 0,(e=>{const s=g.actionBarFactory().playButtonFactory();let i;return i="pause"===e||A?s.hitPause({itemToBePaused:t}):"resume"===e||z?s.hitResume({itemToBeResumed:t}):s.hitPlay({itemToBePlayed:t}),j.logInteraction(i)}))}),[K,z,A,j,g,t]),V=(0,i.useCallback)((e=>{K(e,!0,void 0,(()=>j.logInteraction(g.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[K,j,g,t]),q=(0,i.useCallback)(((e,t)=>{K(e,!0,t)}),[K]),Y=(0,i.useCallback)((()=>{v({intent:"expand-description",type:"click"})}),[v]),[Q,X]=(0,a.lr)();(0,i.useEffect)((()=>{if(e&&!z&&Q.has("t")){const t=Q.get("t")||"0",s=1e3*parseInt(t,10);s<=e.duration.milliseconds&&(Q.delete("t"),X(Q,{replace:!0}),K(s,!0))}}),[e,K,z,Q,X]);const G=!!n||!!o,J=e.podcast?.uri,ee=(0,l.EC)(J)?.toURLPath(!0);return(0,k.jsxs)("section",{"data-testid":"episode",className:P,children:[(0,k.jsx)(d.$,{children:(0,We.mK)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,k.jsx)(Tt,{episode:e,isFullyPlayed:f,setIsFullyPlayed:I,backgroundColor:M,spec:C}),(0,k.jsx)(ct,{episode:e,onPlayEpisode:Z,isPlaying:A,isActive:z,isFullyPlayed:f,setIsFullyPlayed:I,backgroundColor:M,isLocked:O,spec:T}),(0,k.jsx)("div",{className:"contentSpacing",children:(0,k.jsx)(Ue,{transcript:e.transcript,hasDescription:G,contentInformation:h,onDescriptionTimestampClick:V,onTranscriptTimestampClick:q,onExpanded:Y,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:E,segmentCount:p,uri:e.uri,showUrl:ee,spec:g})})]})},Et=i.memo((function(){const{episodeId:e=""}=(0,n.UO)(),t=(0,l.YD)(e).toURI(),s=(0,$e.I)(t);return s?.isError||!s?.episodeOrChapter?(0,k.jsx)(p.h,{hasError:s?.isError||!1,errorMessage:c.ag.get("error.not_found.title.podcast")}):(0,He.Ey)(s.episodeOrChapter)?(0,k.jsx)(It.InstrumentedRedirect,{to:(0,l.EC)(s.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,k.jsx)(i.Suspense,{fallback:null,children:(0,k.jsx)(St.C,{pageId:o.Wg.PODCAST_EPISODE,uri:t,children:(0,k.jsx)(vt,{episode:s.episodeOrChapter})})})}));function Ut(e){return e?.replace(/T.*/,"")||""}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map