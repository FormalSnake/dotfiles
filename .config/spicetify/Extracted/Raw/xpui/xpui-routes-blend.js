"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8123],{16875:(e,t,i)=>{i.d(t,{l:()=>h});var n=i(80956),l=i(60820),a=i(10473),o=i(41614),r=i(7349),s=i(11527);const d={[a.Uo.MEDIUM]:"alto",[a.Uo.LARGE]:"alto",[a.Uo.XLARGE]:"forte"},c={[a.Uo.LARGE]:"ballad",[a.Uo.XLARGE]:"cello"},u={[a.Uo.LARGE]:"viola",[a.Uo.XLARGE]:"viola"},h=({title:e,subtitle:t,body:i,footnote:h,buttonText:b,callToActionClicked:x})=>{const m=(0,a.jh)(),g=m&&d[m]||"canon",v=m&&c[m]||"mesto",E=m&&u[m]||"finale";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.D,{as:"h1",variant:g,semanticColor:"textBase",className:r.Z.title,children:e}),(0,s.jsx)(n.D,{as:"h2",variant:v,semanticColor:"textSubdued",className:r.Z.subtitle,children:t}),i,x&&(0,s.jsx)(l.D,{className:r.Z.button,colorSet:"invertedLight",onClick:x,"data-testid":o.xd,children:b}),h&&(0,s.jsx)(n.D,{as:"p",variant:E,semanticColor:"textSubdued",className:r.Z.note,children:h})]})}},29591:(e,t,i)=>{i.d(t,{H:()=>p});var n=i(84875),l=i.n(n),a=i(5701),o=i(35665),r=i(8968),s=i(10473),d=i(16875),c=i(41614);const u="NTT5CathoDEMjrmgfv9y",h="WmmNhmwHDNvDxInfukYO";var b=i(11527);const x=e=>(0,b.jsx)("div",{className:u,children:(0,b.jsx)("div",{className:h,children:(0,b.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var m=i(7349);const g={name:"",username:"",image_url:null,hash:""},v={[s.Uo.MEDIUM]:164,[s.Uo.LARGE]:164,[s.Uo.XLARGE]:270},E=(e,t)=>(0,b.jsx)(o.q,{label:a.ag.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:"xxlarge",customPlaceholder:(0,b.jsx)(x,{iconSize:t}),piled:!0}),p=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=!!e.members?.length,u=n&&e.members?.[0]||e.recipient||g,h=n&&e.recipient||null,x=(0,s.jh)(),p=x&&v[x]||128,j=Math.round(.475*p);return(0,b.jsxs)("div",{className:l()(m.Z.container,m.Z.TwoUsers),"data-testid":c.xS,ref:i,children:[(0,b.jsx)(r.$,{children:a.ag.get("blend.invite.page-title")}),(0,b.jsxs)("div",{className:m.Z.facepile,children:[(0,b.jsx)(o.q,{label:u.name,images:[{url:u.image_url??"",width:p,height:p}],width:p,userIconSize:"xxlarge"}),h?(0,b.jsx)(o.q,{label:h.name,images:[{url:h.image_url??"",width:p,height:p}],width:p,userIconSize:"xxlarge",piled:!0}):E(p,j)]}),(0,b.jsx)(d.l,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,buttonText:e.button_text,callToActionClicked:t})]})}},46883:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},41614:(e,t,i)=>{i.d(t,{Eh:()=>o,ab:()=>a,e0:()=>n,xS:()=>l,xd:()=>r});const n="blend-deleted-container",l="blend-two-user-container",a="blend-multi-user-container",o="blend-full-container",r="blend-cta-button"},96136:(e,t,i)=>{i.d(t,{Ag:()=>r,V3:()=>l,nW:()=>o,oN:()=>a});var n=i(66772);let l=function(e){return e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED",e}({});const a=(e,t)=>e.build().withHost(n.cM).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),o=(e,t)=>e.build().withHost(n.cM).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),r=e=>e.build().withHost(n.cM).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},27175:(e,t,i)=>{i.d(t,{j:()=>a});var n=i(67950),l=i(11540);const a=()=>(0,l.D)({[n.U.SMALL]:536,[n.U.MEDIUM]:792,[n.U.LARGE]:1048,[n.U.XLARGE]:1688})},74131:(e,t,i)=>{i.d(t,{i:()=>u});var n=i(50959),l=i(26275),a=i(92389),o=i(5701),r=i(30101),s=i(35098),d=i(47001),c=i(96136);function u(e,t){const{user:i}=(0,a.v9)(d.Gg),{enqueueSnackbar:u}=(0,l.Ds)(),h=(0,r.Ob)(),b=(0,n.useCallback)((async()=>{const e=await(0,c.Ag)(h),t=e.body?.invite;if(!t)throw new Error("unable to generate invite link");return i?.display_name?o.ag.get("blend.invite.body-with-name",i.display_name,e.body?.invite):o.ag.get("blend.invite.body-without-name",e.body?.invite)}),[i?.display_name,h]);return async()=>{try{await(0,s.v)(b()),u(o.ag.get("feedback.link-copied"))}catch{u(o.ag.get("error.generic"))}if(e&&t){const i=e.inviteButtonFactory().hitCopyToClipboard();t.logInteraction(i)}}}},841:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var n=i(50959),l=i(92389),a=i(23916),o=i(5701),r=i(8968),s=i(47001),d=i(10473),c=i(59242),u=i(97726),h=i(99993),b=i(96136),x=i(27175),m=i(74131),g=i(29591),v=i(46883),E=i(11527);const p={page_type:b.V3.PENDING_INVITATION,get title(){return o.ag.get("web-player.blend.group-invite.header")},get subtitle(){return o.ag.get("web-player.blend.duo-invite.description")},get button_text(){return o.ag.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},j=()=>{const{spec:e,logger:t}=(0,c.fU)(a.L,{}),i=(0,m.i)(e,t),{ref:b,breakpoint:j}=(0,x.j)(),{user:w}=(0,l.v9)(s.Gg),f=w?.uri?(0,u.C)(w?.uri):"",y=(e=>({...p,members:[e],footnote:o.ag.get("web-player.blend.group-invite.warning")}))({name:w?.display_name||"",username:f,image_url:(0,h.X)(w?.images)?.url||null,hash:""});return w?(0,E.jsxs)(n.Suspense,{fallback:null,children:[(0,E.jsx)(r.$,{children:o.ag.get("web-player.blend.invite.page-title")}),(0,E.jsx)(d.ZU.Provider,{value:j,children:(0,E.jsx)(g.H,{invitation:y,callToActionClicked:i,breakpointEltRef:b})})]}):(0,E.jsx)(v.Z,{})}},28811:(e,t,i)=>{i.r(t),i.d(t,{default:()=>H});var n=i(50959),l=i(92389),a=i(76917),o=i(47001),r=i(64846),s=i(29611),d=i(23916),c=i(90880),u=i(5701),h=i(90343),b=i(10473),x=i(14726),m=i(59242),g=i(43529),v=i(16875),E=i(41614),p=i(7349),j=i(11527);const w=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>(0,j.jsxs)("div",{className:p.Z.container,"data-testid":E.Eh,ref:i,children:[(0,j.jsx)(g.Z,{size:"xxlarge"}),(0,j.jsx)(v.l,{title:e.title,subtitle:e.subtitle,buttonText:e.button_text,footnote:null,callToActionClicked:t})]});var f=i(8968),y=(i(55330),i(84875)),_=i.n(y),A=i(88798),I=i(35665),N=i(44870),T=i(73855),D=i(54171);const k="HKAYWYmxd5Ie8WSi0a4y",R="i52u_T3b50wraodIaORk",U="xakiNVMlUf6geF67FEgy",L="IRhTesoeIiwswlly0Dvg",C="LNJzE17iskXWmfKAzY4U",M="qzBr7X7cdLUhWdk0r8lL",O=({uri:e,imageUrl:t,name:i})=>(0,j.jsx)("li",{children:(0,j.jsx)(N._,{menu:(0,j.jsx)(T.I,{uri:e}),children:(0,j.jsx)(D.Link,{to:e,children:(0,j.jsxs)("div",{className:L,children:[(0,j.jsx)(I.q,{images:[{url:t,width:null,height:null}],label:i,width:32,userIconSize:"medium",className:C}),(0,j.jsx)(A.x,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),S=({members:e,headingText:t,className:i})=>(0,j.jsxs)("div",{className:_()(k,i),children:[(0,j.jsx)("div",{children:(0,j.jsx)(A.x,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:R,children:t})}),(0,j.jsx)("ul",{className:U,children:e&&e.map((e=>(0,j.jsx)(O,{imageUrl:e.image_url||"",name:e.name,uri:(0,c.QK)(e.username).toURI()},e.username)))}),(0,j.jsx)("div",{className:M})]}),Z=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=e.members||[],l=(0,j.jsx)("div",{className:p.Z.userListContainer,"data-testid":E.ab,children:(0,j.jsx)(S,{className:p.Z.userList,headingText:e.members_title,members:n})});return(0,j.jsxs)("div",{className:p.Z.container,ref:i,children:[(0,j.jsx)(f.$,{children:u.ag.get("blend.join.title")}),(0,j.jsx)(v.l,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,body:l,buttonText:e.button_text,callToActionClicked:t})]})};var P=i(29591),Y=i(77864),B=i(96136),V=i(27175),G=i(74131),z=i(30101),X=i(88878);const q=({invitationId:e})=>{const t=(0,a.s0)(),i=(0,s.W6)(h.c$b),{data:l,error:o,loading:g}=(0,x.J)(B.oN,[e]),{spec:f,logger:y}=(0,m.fU)(d.L,{}),_=(0,G.i)(f,y),A=function(e,t,i){const{enqueueSnackbar:n}=(0,X.D)(),l=(0,z.Ob)(),o=(0,a.s0)();return async()=>{try{const t=await(0,B.nW)(l,e),i=(0,c.EC)(t?.body.playlist_uri).toURLPath(!0);if(!i)throw new Error("unable to join");o(i,{replace:!0})}catch{n(u.ag.get("error.request-playlist-failure"))}if(t&&i){const e=t.joinButtonFactory().hitCreatePlaylist();i.logInteraction(e)}}}(e,f,y),{ref:I,breakpoint:N}=(0,V.j)();(0,n.useEffect)((()=>{if(l?.body?.page_type===B.V3.ALREADY_JOINED){const e=(0,c.EC)(l?.body.playlist_uri)?.toURLPath(!0);e&&t(e,{replace:!0})}}),[l?.body?.page_type,l?.body?.playlist_uri,t]);const T=null===l||!l.body;if(T||g||o)return(0,j.jsx)(Y.h,{timeoutInMs:1e3,hasError:!!o||!g&&T,errorMessage:u.ag.get("error.generic")});const D=l?.body.members?.length||0,k=i===h.rS8.TWO_USER;switch(l?.body.page_type){case B.V3.DELETED:return(0,j.jsx)(b.ZU.Provider,{value:N,children:(0,j.jsxs)("div",{className:p.Z.container,ref:I,"data-testid":E.e0,children:[(0,j.jsx)(r.F,{size:"xxlarge"}),(0,j.jsx)(v.l,{title:l.body.title,subtitle:l.body.subtitle,buttonText:l.body.button_text,footnote:l.body.footnote,callToActionClicked:_})]})});case B.V3.ALREADY_JOINED:return(0,j.jsx)(Y.h,{hasError:!1,errorMessage:u.ag.get("error.request-playlist-failure")});case B.V3.READY_TO_JOIN_EMPTY_BLEND:return(0,j.jsx)(b.ZU.Provider,{value:N,children:(0,j.jsx)(P.H,{invitation:l.body,breakpointEltRef:I,callToActionClicked:A})});case B.V3.READY_TO_JOIN_ALREADY_CREATED_BLEND:return k&&D>=2?(0,j.jsx)(b.ZU.Provider,{value:N,children:(0,j.jsx)(w,{invitation:{...l.body,title:u.ag.get("blend.link-invialid.header"),subtitle:u.ag.get("blend.link-invalid.subtitle"),button_text:u.ag.get("blend.invite.button-title")},callToActionClicked:_,breakpointEltRef:I})}):(0,j.jsx)(b.ZU.Provider,{value:N,children:(0,j.jsx)(Z,{invitation:l.body,callToActionClicked:A,breakpointEltRef:I})});case B.V3.MAX_MEMBERS:return(0,j.jsx)(b.ZU.Provider,{value:N,children:(0,j.jsx)(w,{invitation:l.body,callToActionClicked:_,breakpointEltRef:I})});case B.V3.PENDING_INVITATION:return(0,j.jsx)(b.ZU.Provider,{value:N,children:(0,j.jsx)(P.H,{invitation:l.body,callToActionClicked:_,breakpointEltRef:I})});default:return(0,j.jsx)(Y.h,{timeoutInMs:1e3,hasError:!0,errorMessage:u.ag.get("error.generic")})}};var J=i(46883);const W=({invitationId:e})=>{const{user:t}=(0,l.v9)(o.Gg);return t?(0,j.jsx)(n.Suspense,{fallback:null,children:(0,j.jsx)(q,{invitationId:e})}):(0,j.jsx)(J.Z,{})},H=(0,n.memo)((()=>{const{invitationId:e=""}=(0,a.UO)();return(0,j.jsx)(W,{invitationId:e})}))},7349:(e,t,i)=>{i.d(t,{Z:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map