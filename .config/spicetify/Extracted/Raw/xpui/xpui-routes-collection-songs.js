"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7553],{26454:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});a(63961),a(21164);var n=a(50959),l=a(35869),r=a(28150),i=a(22305),s=a(85420),o=a(55147),c=a(10992),u=a(39189),d=a(18953),g=a(30760),f=a(42964),m=a(99634),p=a(17997),h=a(1949),y=a(68823),x=a(43467),T=a(71707),F=a(90818),k=a(27374),C=a(98686),j=a(84351),b=a(45084);function D(e,t,a){const n={uri:e};return(0,k.R4)(n,t),(0,C.U6)(n,a?.map((e=>(0,j.cj)(e)??null)).filter(b.K)),n}var I=a(92808),S=a(79287),E=a(81085),v=a(12737),w=a(9705),R=a(93709),P=a(11665),A=a(88724),L=a(17207),N=a(13814),M=a(82869),_=a(95559),K=a(58045),Q=a(31661),O=a(15362),U=a(11527);const B=n.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,E.fU)(_.createDesktopSearchBarEventFactory,{}),l=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),r=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),i=(0,K.v)().filter((e=>h.P0.includes(e)));return(0,U.jsxs)("div",{className:f.Z.searchBoxContainer,children:[(0,U.jsx)(n.Suspense,{fallback:null,children:(0,U.jsx)(Q.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:l,onClear:r})}),(0,U.jsx)(O.l,{columns:i})]})}));a(36480),a(38910);var W=a(82187),q=a.n(W),z=a(78740),V=a(14842),G=a(36162),H=a(83241),J=a(77020),X=a(44250),Z=a(68167),$=a(62140);const Y="liked-songs-tags";function ee(){return(0,$.z)("liked-songs-current-tag-filter",null)}const te="bnAGyFvicDJD8TnVSKnq",ae="yXCuN8Qvva3SqJFc_Mph",ne=e=>({id:e.filter,getName:()=>e.name,ubiId:e.name}),le=(0,n.memo)((({spec:e,inline:t=!1,Wrapper:a})=>{const{tags:l,currentTag:r,setCurrentTag:i}=function(){const e=(0,X.y)(),t=(0,V.NL)(),[a,l]=ee(),{data:r=[]}=(0,G.a)({queryKey:[Y],queryFn:()=>e?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:H.Wk,refetchOnWindowFocus:!1}),i=(0,n.useCallback)((({data:{list:e}})=>{e===J.XD.TRACKS&&t.invalidateQueries({queryKey:[Y]})}),[t]);(0,Z.b)(J.EW.UPDATE,i);const s=(0,n.useMemo)((()=>r.find((e=>e.filter===a))),[a,r]),o=(0,n.useCallback)((e=>{l(e?.filter??null)}),[l]);return{tags:r,currentTag:s,setCurrentTag:o}}(),s=(0,E.$P)(),o=(0,n.useCallback)(((t,a,n)=>{let r;if(!t)return r=e.clearButtonFactory().hitClearFilter(),void s.logInteraction(r);const o=l.find((({filter:e})=>e===t));if(!o)return;const c=e.filterChipFactory({identifier:o.name,position:n});a?(r=c.hitClearFilter(),i(null)):(r=c.hitFilter(),o&&i(o)),s.logInteraction(r)}),[s,i,e,l]),u=r?[]:l.map(ne),d=r?[ne(r)]:[];if(!l.length)return null;const g=(0,U.jsx)(z.V,{availableFilters:u,selectedFilters:d,toggleFilterId:()=>{},resetFilterIds:()=>i(null),onFilterClick:o,ariaLabel:c.ag.get("web-player.liked-songs.liked-songs-filter-tags"),className:q()(te,{[ae]:t}),applyLightThemeControls:!0});return a?(0,U.jsx)(a,{children:g}):g}));var re=a(71932),ie=a(73196),se=a(19686),oe=a(3532),ce=a(65429);const ue="bKlB8pmFVoswJlZ_jhtL",de="hKfuETni1H5yAXl8wNgR",ge=n.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:a,spec:l,logger:r,backgroundColor:i,canSort:s,canFilter:o}){const{uri:u,name:d,totalLength:g}=e,f=(0,n.useRef)(null),m=(0,n.useMemo)((()=>l.actionBarFactory()),[l]),p=(0,n.useMemo)((()=>m.shuffleButtonContainerFactory()),[m]),h=(0,n.useMemo)((()=>m.filtersFactory()),[m]),y=g>0,x=g>0,T=s&&o,F=(0,oe.Q)(),k=(0,n.useCallback)(((e,t)=>{const a=m.downloadButtonFactory();t===N.mc.ADD?r.logInteraction(a.hitDownload({itemToDownload:u})):t===N.mc.REMOVE?r.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===N.mc.NO_PERMISSION&&r.logInteraction(a.hitUiReveal())}),[m,r,u]),C=(0,re.j)(),j=(0,v.W6)(ie.rVA),{shouldRenderTagsInline:b,inlineContainerRef:D}=function(){const e=(0,n.useRef)(null),[t,a]=(0,n.useState)(null);return(0,n.useLayoutEffect)((()=>{const t=e.current?.offsetWidth;t&&a(t>500)}),[e]),(0,ce.y)({observeOnly:"width",onResize:({width:e})=>{e>=500!==t&&a(!t)},refOrElement:e}),{shouldRenderTagsInline:t,inlineContainerRef:e}}();return(0,U.jsxs)(w.o,{backgroundColor:i,children:[(0,U.jsxs)(w.F,{children:[x?(0,U.jsx)(A.$,{onClick:t,isPlaying:a,size:C,uri:u,ariaPauseLabel:c.ag.get("playlist.a11y.pause",d),ariaPlayLabel:c.ag.get("playlist.a11y.play",d)}):null,F&&(0,U.jsx)(E.Nh,{spec:p,children:(0,U.jsx)(se.K,{entityName:d,contextUri:u,activationPlacement:"bottomEnd",size:C})}),(0,U.jsx)(R.o,{uri:u,canDownload:y,isFollowing:!0,onFollow:()=>{},size:C,onClick:k}),j&&(0,U.jsx)("div",{className:de,ref:D,children:b&&(0,U.jsx)(le,{spec:h,inline:!0})}),T?(0,U.jsx)(E.Nh,{spec:m,children:(0,U.jsx)(B,{tracklistDomRef:f})}):(0,U.jsx)("div",{className:ue,children:(0,U.jsx)(P.F,{property:M.FM,renderNewExperience:()=>(0,U.jsx)(L.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),j&&!1===b&&(0,U.jsx)(le,{spec:h,Wrapper:w.F})]})}));var fe=a(60718),me=a(38229),pe=a(49558),he=a(86343),ye=a(53885),xe=a(93295),Te=a(51604),Fe=a(87063);const ke=[p.QD.INDEX,p.QD.TITLE_AND_ARTIST,p.QD.ALBUM,p.QD.ADDED_AT,p.QD.DURATION],Ce=({data:e,canFilter:t,canSort:a})=>{const{uri:l,name:o,totalLength:k}=e.metadata,C=(0,n.useRef)(null),j=(0,F.Y5)("#5038a0"),[I]=ee(),{filter:v}=(0,n.useContext)(m.fo),{sortState:w,setSortState:R}=(0,n.useContext)(h.Gb),{spec:P,logger:A}=(0,E.fU)(s.Q,{data:{uri:l}}),L=n.useMemo((()=>P.headerFactory()),[P]),N=n.useMemo((()=>P.tracklistFactory()),[P]);(0,n.useEffect)((()=>{null===w.column&&R({column:p.QD.ADDED_AT,order:p.kn.DESC})}),[w,R]);const M=(0,r.ur)(),_=(0,r.TH)(),K="POP"!==M?new URLSearchParams(_.search).get("uri"):null,{isPlaying:Q,togglePlay:O,usePlayContextItem:B,isActive:W}=(0,S.n)(D(l,(0,fe.w)(w),[v,I].filter(b.K)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),q=()=>{const e=(0,he.aK)({isPlaying:Q,isActive:W,spec:P.actionBarFactory().playButtonFactory(),logger:A,uri:l});O({loggingParams:e})},[z]=(0,pe.d4)(),{isCompactMode:V}=(0,T.mJ)(),G=(({isCompactMode:e=!1})=>{const t=[...ke];return e&&t.splice(t.indexOf(p.QD.TITLE_AND_ARTIST),1,p.QD.TITLE,p.QD.ARTIST),t})({isCompactMode:V});return(0,U.jsx)(y.a,{columns:G,children:(0,U.jsxs)("section",{role:"presentation",className:f.Z.playlist,"data-testid":"playlist-page",children:[(0,U.jsx)(u.$,{children:c.ag.get("playlist.page-title",o)}),(0,U.jsx)(x.s,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:z,isPlaying:Q,togglePlay:q,backgroundColor:j,specLikedSongs:L}),(0,U.jsx)(ge,{metadata:e.metadata,onClickTogglePlay:q,isPlaying:Q,spec:P,logger:A,backgroundColor:j,canSort:a,canFilter:t}),(0,U.jsx)("div",{className:"contentSpacing",children:k>0?(0,U.jsx)(n.Suspense,{fallback:(0,U.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.request-collection-tracks-failure")}),children:(0,U.jsx)(E.Nh,{spec:N,children:(0,U.jsx)(me.p,{nrTracks:k,collectionUri:l,scrollToUri:K,usePlayContextItem:B,outerDomRef:C,spec:N,initialItems:e.contents.items,isCompactMode:V,tagFilter:I})})}):(0,U.jsx)(d.u,{message:c.ag.get("collection.empty-page.songs-subtitle"),title:c.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,U.jsx)(i.F,{"aria-hidden":"true"})})})]})})},je=n.memo((function({user:e,uri:t}){const{filter:a}=(0,n.useContext)(m.fo),{sortState:l}=(0,n.useContext)(h.Gb),[r]=ee(),i=function(e,t,a){const l=(0,n.useContext)(I.H),r=(0,V.NL)(),i=(0,xe.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,G.a)({queryKey:i(),queryFn:()=>l.getTracks(a),gcTime:18e5,placeholderData:H.Wk,refetchOnWindowFocus:!1}),o=(0,n.useCallback)((()=>{r.invalidateQueries({queryKey:i()})}),[r,i]);(0,Z.b)(J.EW.UPDATE,o);const c=(0,Fe.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,Te.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,fe.w)(l),filters:[a,r].filter(b.K)}),s=(0,n.useContext)(I.H).getCapabilities();return i?(0,U.jsx)(Ce,{data:i,canFilter:s.canFilterTracksAndEpisodes&&i.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&i.metadata.unfilteredTotalLength>0}):(0,U.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),be=()=>{const{user:e}=(0,l.v9)(ye.Gg);if(null===e)return null;const t=(0,o.wG)(e.id).toURI();return(0,U.jsx)(h.kz,{uri:t,children:(0,U.jsx)(m.hz,{uri:t,children:(0,U.jsx)(pe.Y4,{children:(0,U.jsx)(je,{uri:t,user:e})})})})}}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map