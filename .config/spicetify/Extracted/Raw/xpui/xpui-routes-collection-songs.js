"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8828],{95519:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});a(62355),a(48117);var l=a(79474),r=a(85980),n=a(61343),s=a(26045),i=a(71573),o=a(63275),c=a(89551),u=a(19935),d=a(58717),g=a(81891),f=a(60426),m=a(8773),p=a(62358),y=a(78874),h=a(33655),C=a(23673),k=a(24506),x=a(51103),T=a(44824),F=a(66766),j=a(43281),b=a(62773);function I(e,t,a){const l={uri:e};return(0,T.qq)(l,t),(0,F.Pz)(l,a?.map((e=>(0,j.HI)(e)??null)).filter(b.P)),l}var S=a(84168),R=a(48378),D=a(43083),A=a(52745),P=a(94080),E=a(21066),L=a(81153),w=a(12972),v=a(35243),M=a(60411),N=a(14863),_=a(23222),U=a(3665),B=a(2578),O=a(57024),$=a(13274);const q=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,A.r)(_.createDesktopSearchBarEventFactory,{}),r=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),n=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),s=(0,U.w)().filter((e=>y.gc.includes(e)));return(0,$.jsxs)("div",{className:f.A.searchBoxContainer,children:[(0,$.jsx)(l.Suspense,{fallback:null,children:(0,$.jsx)(B.S,{placeholder:c.R.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:r,onClear:n})}),(0,$.jsx)(O.d,{columns:s})]})}));a(63512),a(1137);var z=a(97500),V=a.n(z),K=a(36911),H=a(36981),Q=a(54594),X=a(58703),Z=a(49036),J=a(39807),W=a(41546),G=a(68525),Y=a(85078),ee=a(495);const te="liked-songs-tags";function ae(){return(0,ee.x)("liked-songs-current-tag-filter",null)}const le="bnAGyFvicDJD8TnVSKnq",re=e=>({id:e.filter,getName:()=>e.name,ubiId:e.name}),ne=(0,l.memo)((({spec:e,nrTracks:t})=>{const{tags:a,currentTag:r,setCurrentTag:n}=function({nrTracks:e}){const t=(0,G.t)(),a=(0,X.jE)(),[r,n]=ae(),[s,i]=(0,l.useState)([]),{data:o}=(0,Z.I)({queryKey:[te],queryFn:()=>t?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:J.rX,refetchOnWindowFocus:!1});(0,l.useLayoutEffect)((()=>{const t=o?.find((e=>e.filter===r));if(!t&&r){if(e>0&&o?.length)return;n(null)}i(o??[])}),[r,n,e,o]);const c=(0,l.useCallback)((({data:{list:e}})=>{e===W.Ir.TRACKS&&a.invalidateQueries({queryKey:[te]})}),[a]);(0,Y.l)(W.UV.UPDATE,c);const u=(0,l.useMemo)((()=>s.find((e=>e.filter===r))),[r,s]),d=(0,l.useCallback)((e=>{n(e?.filter??null)}),[n]);return{tags:r||e?s:[],currentTag:u,setCurrentTag:d}}({nrTracks:t}),s=(0,H.s)(),i=(0,l.useCallback)(((t,l,r)=>{let i;if(!t)return i=e.clearButtonFactory().hitClearFilter(),void s.logInteraction(i);const o=a.find((({filter:e})=>e===t));if(!o)return;const c=e.filterChipFactory({identifier:o.name,position:r});l?(i=c.hitClearFilter(),n(null)):(i=c.hitFilter(),o&&n(o)),s.logInteraction(i)}),[s,n,e,a]),o=r?[]:a.map(re),u=r?[re(r)]:[];return a.length?(0,$.jsx)(Q.S,{children:(0,$.jsx)(K.s,{availableFilters:o,selectedFilters:u,toggleFilterId:()=>{},resetFilterIds:()=>n(null),onFilterClick:i,ariaLabel:c.R.get("web-player.liked-songs.liked-songs-filter-tags"),clearBtnAriaLabel:c.R.get("web-player.liked-songs.clear-filter"),className:V()(le),applyLightThemeControls:!0})}):null}));var se=a(64280),ie=a(85905),oe=a(60327),ce=a(47095),ue=a(59914);const de="bKlB8pmFVoswJlZ_jhtL",ge=l.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:a,spec:r,logger:n,backgroundColor:s,canSort:i,canFilter:o}){const{uri:u,name:d,totalLength:g}=e,f=(0,l.useRef)(null),m=(0,l.useMemo)((()=>r.actionBarFactory()),[r]),p=(0,l.useMemo)((()=>m.shuffleButtonContainerFactory()),[m]),y=(0,l.useMemo)((()=>m.filtersFactory()),[m]),h=g>0,C=g>0,k=i&&o,x=(0,ue.X)(),T=(0,l.useCallback)(((e,t)=>{const a=m.downloadButtonFactory();t===M.NV.ADD?n.logInteraction(a.hitDownload({itemToDownload:u})):t===M.NV.REMOVE?n.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===M.NV.NO_PERMISSION&&n.logInteraction(a.hitUiReveal())}),[m,n,u]),F=(0,ie.j)(),j=(0,P.NC)(oe.cLA);return(0,$.jsxs)(se.E,{backgroundColor:s,children:[(0,$.jsxs)(Q.S,{children:[C?(0,$.jsx)(w.D,{onClick:t,isPlaying:a,size:F,uri:u,ariaPauseLabel:c.R.get("playlist.a11y.pause",d),ariaPlayLabel:c.R.get("playlist.a11y.play",d)}):null,x&&(0,$.jsx)(D.r,{spec:p,children:(0,$.jsx)(ce.Y,{entityName:d,contextUri:u,activationPlacement:"bottomEnd",size:F})}),(0,$.jsx)(E.f,{uri:u,canDownload:h,isFollowing:!0,onFollow:()=>{},size:F,onClick:T}),k?(0,$.jsx)(D.r,{spec:m,children:(0,$.jsx)(q,{tracklistDomRef:f})}):(0,$.jsx)("div",{className:de,children:(0,$.jsx)(L.u,{property:N.mA,renderNewExperience:()=>(0,$.jsx)(v.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),j&&(0,$.jsx)(ne,{spec:y,nrTracks:g})]})}));var fe=a(25582),me=a(72082),pe=a(9646),ye=a(26756),he=a(82383),Ce=a(86892),ke=a(33902),xe=a(40088);const Te=[p.$C.INDEX,p.$C.TITLE_AND_ARTIST,p.$C.ALBUM,p.$C.ADDED_AT,p.$C.DURATION],Fe=({data:e,canFilter:t,canSort:a})=>{const{uri:r,name:o,totalLength:T}=e.metadata,F=(0,l.useRef)(null),j=(0,x.z6)("#5038a0"),[S]=ae(),{filter:P}=(0,l.useContext)(m.gM),{sortState:E,setSortState:L}=(0,l.useContext)(y.cL),{spec:w,logger:v}=(0,A.r)(i.k,{data:{uri:r}}),M=l.useMemo((()=>w.headerFactory()),[w]),N=l.useMemo((()=>w.tracklistFactory()),[w]);(0,l.useEffect)((()=>{null===E.column&&L({column:p.$C.ADDED_AT,order:p.Ht.DESC})}),[E,L]);const _=(0,n.wQ)(),U=(0,n.zy)(),B="POP"!==_?new URLSearchParams(U.search).get("uri"):null,{isPlaying:O,togglePlay:q,usePlayContextItem:z,isActive:V}=(0,R.P)(I(r,(0,fe.c)(E),[P,S].filter(b.P)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),K=()=>{const e=(0,ye.$I)({isPlaying:O,isActive:V,spec:w.actionBarFactory().playButtonFactory(),logger:v,uri:r});q({loggingParams:e})},[H]=(0,pe.z1)(),{isCompactMode:Q}=(0,k.an)(),X=(({isCompactMode:e=!1})=>{const t=[...Te];return e&&t.splice(t.indexOf(p.$C.TITLE_AND_ARTIST),1,p.$C.TITLE,p.$C.ARTIST),t})({isCompactMode:Q});return(0,$.jsx)(h.a,{columns:X,children:(0,$.jsxs)("section",{role:"presentation",className:f.A.playlist,"data-testid":"playlist-page",children:[(0,$.jsx)(u.Q,{children:c.R.get("playlist.page-title",o)}),(0,$.jsx)(C.x,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:H,isPlaying:O,togglePlay:K,backgroundColor:j,specLikedSongs:M}),(0,$.jsx)(ge,{metadata:e.metadata,onClickTogglePlay:K,isPlaying:O,spec:w,logger:v,backgroundColor:j,canSort:a,canFilter:t}),(0,$.jsx)("div",{className:"contentSpacing",children:T>0?(0,$.jsx)(l.Suspense,{fallback:(0,$.jsx)(g.A,{hasError:!1,errorMessage:c.R.get("error.request-collection-tracks-failure")}),children:(0,$.jsx)(D.r,{spec:N,children:(0,$.jsx)(me.b,{nrTracks:T,collectionUri:r,scrollToUri:B,usePlayContextItem:z,outerDomRef:F,spec:N,initialItems:e.contents.items,isCompactMode:Q,tagFilter:S})})}):(0,$.jsx)(d.p,{message:c.R.get("collection.empty-page.songs-subtitle"),title:c.R.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c.R.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,$.jsx)(s.v,{"aria-hidden":"true"})})})]})})},je=l.memo((function({user:e,uri:t}){const{filter:a}=(0,l.useContext)(m.gM),{sortState:r}=(0,l.useContext)(y.cL),[n]=ae(),s=function(e,t,a){const r=(0,l.useContext)(S.Z),n=(0,X.jE)(),s=(0,Ce.U0)((()=>["useLikedSongs",e,a]),[e,a]),{data:i}=(0,Z.I)({queryKey:s(),queryFn:()=>r.getTracks(a),gcTime:18e5,placeholderData:J.rX,refetchOnWindowFocus:!1}),o=(0,l.useCallback)((()=>{n.invalidateQueries({queryKey:s()})}),[n,s]);(0,Y.l)(W.UV.UPDATE,o);const c=(0,xe.$R)(t.id);return c&&i?{metadata:{uri:e,name:c.name,images:c.images,totalLength:i?.totalLength,unfilteredTotalLength:i.unfilteredTotalLength,owner:(0,ke.w)(t)},contents:i}:null}(t,e,{offset:0,limit:25,sort:(0,fe.c)(r),filters:[a,n].filter(b.P)}),i=(0,l.useContext)(S.Z).getCapabilities();return s?(0,$.jsx)(Fe,{data:s,canFilter:i.canFilterTracksAndEpisodes&&s.metadata.unfilteredTotalLength>0,canSort:i.canSortTracksAndEpisodes&&s.metadata.unfilteredTotalLength>0}):(0,$.jsx)(g.A,{hasError:!1,errorMessage:c.R.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline})})),be=()=>{const{user:e}=(0,r.d4)(he.Ht);if(null===e)return null;const t=(0,o.fH)(e.id).toURI();return(0,$.jsx)(y.sn,{uri:t,children:(0,$.jsx)(m.si,{uri:t,children:(0,$.jsx)(pe.S1,{children:(0,$.jsx)(je,{uri:t,user:e})})})})}},51103:(e,t,a)=>{a.d(t,{Hk:()=>r.H,z6:()=>l.z});a(18515);var l=a(4977),r=a(75995)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map