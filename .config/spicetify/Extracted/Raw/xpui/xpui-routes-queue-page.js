"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7521],{36875:(e,t,i)=>{i.d(t,{I:()=>A});var s=i(75618),n=i(50959),a=i(10992),r=(i(63961),i(36480),i(38910),i(40032),i(21799),i(21164),i(82187)),l=i.n(r),u=i(28150),o=i(97018),c=i(29693),d=i(97098),m=i(49857),x=i(30386),h=i(65429);var g=i(69918),p=i(94467),f=i(19315);const y="main-topBar-contentArea",j="queue-tabBar-headerIsCentered",b="queue-tabBar-headerItem",v="queue-tabBar-moreButton",C="queue-tabBar-moreButtonActive",k="yxf_6IsQEmHjijEBUMTP",N="queue-tabBar-active",I="queue-tabBar-headerItemLink",q="queue-tabBar-header",w="queue-tabBar-chevron";var S=i(11527);const P=({items:e,activeItemId:t})=>(0,S.jsx)(p.v,{children:e.map((e=>e.disabled?(0,S.jsx)(f.s,{disabled:!0,role:"menuitemradio",className:k,onClick:e.handleClick,children:e.title},e.uri):(0,S.jsx)(f.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:({isActive:e})=>l()(k,{[N]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var E=i(95090);const O=(0,n.memo)((function({isCentered:e,links:t,landmarkLabel:i,className:s}){const r=(0,n.useRef)(null),[p,f]=(0,n.useState)([]),[k,O]=(0,n.useState)(0),[U,R]=(0,n.useState)([]),D=function(){const[e,t]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:i}=(0,n.useContext)(x.VX),s=(0,m.y1)((e=>{e?.width&&t(e.width)}),250);return(0,h.y)({refOrElement:i,observeOnly:"width",onResize:s}),e}()??1/0,{pathname:F}=(0,u.TH)(),M=t.find((e=>e.to===F));return(0,n.useEffect)((()=>{r.current&&O(r.current.clientWidth)}),[D]),(0,n.useEffect)((()=>{if(!r.current)return;const e=Array.from(r.current.children).map((e=>e.clientWidth));f(e)}),[t]),(0,n.useEffect)((()=>{if(!r.current)return;if(p.slice(0,-1).reduce(((e,t)=>e+t),0)<=k)return void R([]);const e=p.reduce(((e,t)=>e>t?e:t),0),t=[];let i=e;p.forEach(((e,s)=>{k>=i+e?i+=e:t.push(s)})),R(t)}),[k,p]),(0,S.jsx)("nav",{className:l()(s,y),"aria-label":i,children:(0,S.jsxs)("ul",{className:e?j:q,ref:r,children:[t.filter(((e,t)=>!U.includes(t))).map((e=>{const t=e?.render??(e=>e);return(0,S.jsx)(n.Fragment,{children:t((0,S.jsx)("li",{className:b,children:e.disabled?(0,S.jsx)("div",{className:I,children:(0,S.jsx)(o.x,{variant:"bodySmallBold",children:e.title})}):(0,S.jsx)(E.O,{end:!0,className:({isActive:e})=>l()(I,{[N]:e}),to:e.to,onClick:e.handleClick,children:(0,S.jsx)(o.x,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),U.length||0===p.length?(0,S.jsx)("li",{className:b,children:(0,S.jsx)(g.xV,{renderInline:!0,menu:(0,S.jsx)(P,{items:t.filter(((e,t)=>U.includes(t))),activeItemId:M?.itemId}),children:(e,t,i)=>(0,S.jsxs)("button",{className:l()(v,{[C]:M}),type:"button",onClick:t,ref:i,children:[(0,S.jsx)(o.x,{variant:"bodySmallBold",children:M?M.title:a.ag.get("more")}),e?(0,S.jsx)(c.U,{size:"small",className:w,"aria-hidden":"true"}):(0,S.jsx)(d.i,{size:"small",className:w,"aria-hidden":"true"})]})})}):null]})})}));var U=i(71406),R=i(59773),D=i(24110);const F="queue-tabBar-nav",M=()=>{const e=(0,D.Y)(),t=(0,n.useCallback)((e=>(0,S.jsx)(R.v,{placement:"bottomEnd",arrow:"topStart",title:a.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),i=(0,n.useMemo)((()=>[{title:a.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:t,disabled:e},{title:a.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,t]);return(0,S.jsx)(U.w,{children:(0,S.jsx)(O,{className:F,links:i})})},A=({children:e})=>{const t=(0,s.nF)();return(0,S.jsxs)("section",{className:"contentSpacing",children:[e,t&&(0,S.jsx)(M,{})]})}},1912:(e,t,i)=>{i.r(t),i.d(t,{default:()=>K});var s=i(50959),n=i(82187),a=i.n(n),r=i(97018),l=i(87735),u=i(15502),o=i(10992),c=i(39189),d=i(44288),m=i(56880),x=i(453),h=i(30678),g=i(79287),p=i(81085),f=i(81909),y=i(11527);const j=({onClick:e})=>(0,y.jsx)(f.P,{onClick:e,size:"small",children:o.ag.get("queue.clear-queue")});var b=i(39753),v=i(3557),C=i(95264),k=(i(5811),i(58994));const N="i9rTNwKyT_NMDghd8q65",I="DXBMXJD8Zoj4V8MxIVTB",q="UEtqSfWDubkNdPIaEkfA",w="I_Rc74Je7W4sk6KAVR05",S=s.memo((function({onClose:e,onConfirm:t,isOpen:i,itemCount:n}){const l=(0,s.useCallback)((i=>{t(),e(i)}),[t,e]),u=o.ag.get("queue.confirm-title",n);return(0,y.jsx)(k.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:u,isOpen:i,children:(0,y.jsxs)("div",{className:N,children:[(0,y.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",className:I,children:u}),(0,y.jsx)(r.x,{as:"p",variant:"bodySmall",className:q,paddingBottom:b.g4,children:o.ag.get("queue.confirm-message")}),(0,y.jsxs)("div",{className:a()("encore-light-theme",w),children:[(0,y.jsx)(v.o,{onClick:e,children:o.ag.get("queue.cancel-button")}),(0,y.jsx)(C.D,{onClick:l,children:o.ag.get("queue.confirm-button")})]})]})})}));var P=i(18582),E=i(11050),O=i(17997),U=i(56855),R=i(48439),D=i(90407),F=i(8495),M=i(92718),A=i(20704),L=i(35518);const Q=s.memo((function({tracks:e,ariaLabel:t,contextUri:i,currentlyPlayingContextUri:n=i,rowNumberOffset:a=0,section:r,usePlayContextItem:l}){const u=(0,R.o)(),c=(0,h.g)(),d=(0,s.useCallback)(((e,t)=>{u({intent:"remove-from-queue",type:"click"}),c.removeFromQueue(e).then(t)}),[c,u]),m=(0,s.useCallback)(((e,t)=>{if((0,F.iw)(e)){const s=(0,A.X)(e.show?.images,{desiredSize:40});return(0,y.jsx)(L.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,D.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:L.j.EPISODE,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${t}${a}${e.uid}`)}if((0,F.G7)(e)){const s=(0,A.X)(e.images||void 0,{desiredSize:40});return(0,y.jsx)(L.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,D.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:L.j.CHAPTER,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${t}${a}${e.uid}`)}if((0,F.k6)(e)){const s=(0,A.X)(e.images||void 0,{desiredSize:40});return(0,y.jsx)(L.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??o.ag.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:L.j.AD,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${t}${a}${e.uid}`)}if((0,F.G_)(e)||(0,F.RB)(e)){const s=(0,A.X)(e?.album?.images,{desiredSize:40}),u=e.type===M.p.TRACK?e:null;return(0,y.jsx)(L.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,D.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:u?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:u?.is19PlusOnly??!1,type:u?.isLocal?L.j.LOCAL:L.j.TRACK,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,U.$)(e),trackContextUri:e.metadata?.context_uri??n},`${t}${a}${e.uid}`)}return(0,y.jsx)(O.Lb,{height:`${O.dN}px`})}),[a,i,n,r,l]),x=(0,s.useMemo)((()=>[O.QD.INDEX,O.QD.TITLE_AND_ARTIST,O.QD.ALBUM,O.QD.DURATION]),[]),g=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid??e.uri})),[]);return(0,y.jsx)(O.Pv,{ariaLabel:t,tracks:e,nrTracks:e.length,onRemove:d,renderRow:m,resolveItem:g,columns:x})}));var T=i(96242);const B="queue-queuePage-queuePage",$="queue-queuePage-header",_="queue-queuePage-subHeader",G="queue-queuePage-nextFrom",W="queue-queuePage-nextInQueue",X=()=>{const{uri:e,description:t,current:i,nextUp:n,queued:f,isEmpty:b,hasQueuedTracks:v,hasNextTracks:C}=(0,T.y)(),{spec:k,logger:N,UBIFragment:I}=(0,p.fU)(l.z,{data:{identifier:u.Wg.NOWPLAYING_QUEUE,uri:e??""}}),q=(0,s.useMemo)((()=>k.nowPlayingSectionFactory()),[k]),w=(0,s.useMemo)((()=>k.nextInQueueSectionFactory()),[k]),O=(0,s.useMemo)((()=>k.nextFromSectionFactory()),[k]),U=(0,h.g)(),[R,D]=(0,s.useState)(!1),F=(0,s.useCallback)((()=>{D(!1)}),[D]),M=(0,s.useCallback)((()=>{U.clearQueue(),D(!1)}),[U]),A=(0,s.useCallback)((()=>{let e;const t=w.clearQueueButtonFactory();f.length>0&&(e=t.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:f.length}),N.logInteraction(e))}),[N,w,f.length]),L=(0,s.useCallback)((async()=>{A(),D(!0)}),[A]),{usePlayContextItem:X}=(0,g.n)({uri:e??""},{featureIdentifier:"queue"}),J=(0,s.useCallback)((async()=>{if(!C)return;const t=k.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});N.logInteraction(t)}),[C,N,k,e]);return b?(0,y.jsx)(P.Q,{}):(0,y.jsxs)("div",{className:B,children:[(0,y.jsx)(c.$,{children:o.ag.get("queue.page-title")}),(0,y.jsx)(I,{spec:k,children:(0,y.jsx)(m.A,{className:$,emptyStateComponent:(0,y.jsx)(r.x,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:$,children:o.ag.get("playback-control.queue")})})}),i&&e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:_,children:o.ag.get("queue.now-playing")}),(0,y.jsx)(I,{spec:q,children:(0,y.jsx)(x.JL,{value:"now-playing",children:(0,y.jsx)(Q,{ariaLabel:o.ag.get("queue.now-playing"),tracks:[i],contextUri:e,section:E.h.NowPlaying,usePlayContextItem:X})})})]}),v&&e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:a()(W,_),children:[(0,y.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",children:o.ag.get("queue.next-in-queue")}),v&&(0,y.jsx)(j,{onClick:L})]}),(0,y.jsx)(I,{spec:w,children:(0,y.jsx)(x.JL,{value:"next-in-queue",children:(0,y.jsx)(Q,{ariaLabel:o.ag.get("queue.next-in-queue"),tracks:f,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:E.h.NextInQueue,usePlayContextItem:X})})})]}),C&&e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:_,children:t&&!(0,T.X)(i)?(0,y.jsxs)("span",{className:"standalone-ellipsis-one-line",children:[o.ag.get("queue.next-from")," ",(0,y.jsx)(d.Link,{className:G,to:e,onClick:J,children:t})]}):o.ag.get("queue.next-up")}),(0,y.jsx)(I,{spec:O,children:(0,y.jsx)(x.JL,{value:"next-up",children:(0,y.jsx)(Q,{ariaLabel:o.ag.get("queue.next-up"),tracks:n,rowNumberOffset:1+(f?.length||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:E.h.NextUp,usePlayContextItem:X})})})]}),(0,y.jsx)(S,{itemCount:f?.length||0,isOpen:R,onClose:F,onConfirm:M})]})};var J=i(36875),z=i(24110),H=i(35733);const K=()=>(0,z.Y)()?(0,y.jsx)(H.InstrumentedRedirect,{to:"/history"}):(0,y.jsx)(J.I,{children:(0,y.jsx)(s.Suspense,{fallback:null,children:(0,y.jsx)(X,{})})})}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map