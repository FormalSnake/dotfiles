(()=>{var e,t={1960:(e,t,s)=>{"use strict";var n=s(4478),r=s(9611),o=s(2460);(0,o.JP)({name:"enableNothing",description:"Property to that does nothing.",default:!1});const a=(0,o.JP)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1});var i=s(959),l=s(820),c=s(9971);const d="EDO6W2NIL5kJzuuvw2J7",u="bnCvPLsrkevVeOYYpwQG",g="qizIRC62kg8aAqE5y1K6";s(4267),s(9746),s(9593),s(8974),s(7340),s(8220),s(628),s(5330),s(4534),s(2119),s(9801);var h=s(4555),p=s.n(h);const m=864e5;class f{_cache=new Map;constructor(e=null){if(this._ttl=e,null!==e&&(e<1||e>m))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const s=this.get(e);if(void 0===s){const s=t();return this.set(e,s),s}return s}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}let x=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});const w=new Intl.Locale(x.en);Object.values(x);var y=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}(y||{});function b(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const _=new class{_localeForTranslation=w;_localeForFormatting=w;_localeForURLPath=w;_translations={};_relativeTimeFormat=null;_dateTimeFormats=new f;_pluralRules=null;getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting)),this._relativeTimeFormat}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));return this._dateTimeFormats.create(t,(()=>new Intl.DateTimeFormat(this._localeForFormatting,e)))}getPluralRules(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation)),this._pluralRules}getPluralKey(e){const t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch{return"other"}}initialize({localeForTranslation:e,localeForFormatting:t,translations:s}){var n;this._localeForTranslation=new Intl.Locale(e),this._localeForFormatting=("string"==typeof(n=t??e)&&(n=new Intl.Locale(n)),"ar"===n.baseName?new Intl.Locale(n,{numberingSystem:"latn"}):n),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));const t=new Set([x.paIN,x.paPK,x.zhCN,x.zhTW,x.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):w}(e),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=s}getLocaleForTranslation(){return this._localeForTranslation.baseName}getLocaleForFormatting(){return this._localeForFormatting.baseName}getLocaleForURLPath(){return this._localeForURLPath.baseName}getLocaleForSmartling(){const e=this._localeForTranslation.baseName;return p()[e]||e}getTranslations(){return this._translations}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._localeForTranslation)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._localeForTranslation)}get(e,...t){const s=e in this._translations?this._translations[e]:e;let n="";if("string"!=typeof s){const e=t[0],r=s[this.getPluralKey(e)];void 0!==r?n=r:s.other&&(n=s.other)}else n=s;if(/%\d%/.test(n)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const r={},o={};t.forEach(((e,t)=>{const s="object"!=typeof e||null===e||(0,i.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of s)(0,i.isValidElement)(t)?o[e]=t:void 0!==t&&(r[e]=t)})),n=n.replace(b(Object.keys(r)),((e,t)=>{const s=t.slice(1,-1),n=r[s];return"number"==typeof n?this.formatNumber(n):n}));const a=Object.keys(o);return a.length?(0,i.createElement)(i.Fragment,null,n.split(b(a)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),s=o[t];return(0,i.cloneElement)(s,{key:s.key??t})}return e})).filter((e=>""!==e))):n}getSeparator(){switch(new Intl.Locale(this._localeForTranslation).language){case x.ar:return y.AR;case x.fa:return y.FA;default:return y.EN}}formatNumber(e,t){return e.toLocaleString(this._localeForFormatting,t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const s=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(s).format(e)}formatRelativeDate(e,t=null,s=new Date){const n=this.getRelativeTimeFormat(),r=e.getTime()-s.getTime(),o=Math.abs(r)<2592e6;if(null!==n&&o){const{weeks:e,days:t,hours:s,minutes:o,seconds:i}=(a=r,{seconds:Math.round(a/1e3),minutes:Math.round(a/1e3/60),hours:Math.round(a/1e3/60/60),days:Math.round(a/1e3/60/60/24),weeks:Math.round(a/1e3/60/60/24/7)});return Math.abs(t)>=7?n.format(e,"weeks"):Math.abs(s)>=24?n.format(t,"days"):Math.abs(o)>=60?n.format(s,"hours"):Math.abs(i)>=60?n.format(o,"minutes"):n.format(i,"seconds")}var a;return this.formatDate(e,t)}};let v=function(e){return e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.ARTIST_CONCERTS="artist-concerts",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.CONCERT="concert",e.CONCERTS="concerts",e.EPISODE="episode",e.PODCAST_SHORT="podcast-short",e.GENRE="genre",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.PRE_RELEASE="pre-release",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes",e.FOLDER="folder",e.PREMIUM="premium",e}({});const k="intl-",S=(new RegExp(`${`/${k}`}([a-zA-Z0-9-]+)`),[]),E=[x.id,x.de,"pt",x.ja,x.fr,x.ar,x.es,x.tr,x.it],[N]=(x.en,v.ALBUM,v.ARTIST,v.TRACK,v.PREMIUM,v.CONCERT,v.CONCERTS,x.hu,E);S.length||x.ca,x.zhCN,x.es419,x.es;var O=s(1527);const C=({toggleSettings:e})=>(0,O.jsxs)("header",{className:d,children:[(0,O.jsx)("div",{children:(0,O.jsx)("img",{className:u,src:"images/logo.svg",alt:""})}),(0,O.jsxs)("div",{className:g,children:[(0,O.jsx)(l.D,{onClick:e,size:"small",colorSet:"invertedDark",children:_.get("desktop.login.PreferencesLink")}),(0,O.jsx)(l.D,{as:"a",href:"https://open.spotify.com/",size:"small",iconTrailing:c.T,colorSet:"invertedDark",children:_.get("desktop-auth.login.preview-experience")})]})]}),j="dDq7z7SMlOtaz9XvBhD8",A="U5LyL65TJ6tdGjHlaK1q",R="awxiyoFzSyDm_MbWN_eY";var M=s(5507),I=s(956),L=s(5537);let T=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});s(3261);const F=()=>"undefined"==typeof window;function P(e){return!F()&&e instanceof HTMLElement}let D;const U={subscribersByElement:new WeakMap,get resizeObserver(){return D||(D=new ResizeObserver((e=>{Array.isArray(e)&&e.forEach((t=>{const s={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(U.subscribersByElement.get(t.target)??new Set).forEach((n=>{n(s,t,e)}))}))}))),D}};function B({onResize:e,refOrElement:t,observeOnly:s,observeOnMount:n=!1}){const r=(0,i.useRef)(e);r.current=e;const o=(0,i.useRef)(s);o.current=s;const a=(0,i.useRef)({width:-1,height:-1}),l=(0,i.useCallback)(((e,t,s)=>{if(!r.current)return;const n=a.current.width!==e.width,i=a.current.height!==e.height;("width"===o.current&&n||"height"===o.current&&i||!o.current&&(n||i))&&r.current(e,t,s),a.current.width=e.width,a.current.height=e.height}),[]),c=function({refOrElement:e,subscriber:t}){let s=null;const n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useRef)(null),a=(0,i.useRef)(),l=(0,i.useRef)(t);l.current=t;const c=(0,i.useCallback)((()=>{let t=null;r.current?t=r.current:n.current?t=n.current:P(e)&&(t=e),o.current!==t&&(a.current&&(a.current(),a.current=null),o.current=t,t&&l.current&&(a.current=l.current(t)))}),[e]),d=(0,i.useCallback)((e=>{r.current=e,c()}),[c]);return e&&!P(e)&&(s=e),(0,i.useEffect)((()=>{s&&(n.current=s.current),c()}),[s,s?.current,c]),(0,i.useEffect)((()=>()=>{a?.current?.()}),[]),d}({refOrElement:t,subscriber:e=>(n&&l({width:e.offsetWidth,height:e.offsetHeight},null,[]),U.subscribersByElement.has(e)||(U.resizeObserver.observe(e),U.subscribersByElement.set(e,new Set)),U.subscribersByElement.get(e)?.add(l),()=>{U.subscribersByElement.get(e)?.delete(l),0===U.subscribersByElement.get(e)?.size&&(U.resizeObserver.unobserve(e),U.subscribersByElement.delete(e))})});return c}function W(e,t,s){const[n,r]=(0,i.useState)(),o=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:B({refOrElement:s,observeOnly:t,onResize:({[t]:e})=>{if(void 0===e)return;const s=o.find((([,t])=>e>=t)),a=s&&s[0];a&&a!==n&&r(a)}}),breakpoint:n}}const z="_Cavu1tQ2xHOf1gnVGLI",G="OAeAxLyDsiZO9kZm0WTJ",H="aO8ExrFCupBc13AZlOiu";var K=s(8655);const V="RKmCwNfF52QOvDMMoteA",J="VDAySBjjOh9Kf83VFHyw",q="N8UxiIkVqP_rLpZHNysn",X="E5bQk5goX9hChELcTBbe",Z="cgl3eWBkELRCNdMhDX8w",$="cRd8EyQyHz4DK42rr3yw";var Y=s(4875),Q=s.n(Y),ee=s(1486),te=s.n(ee);const se=e=>{const{isOpen:t,contentLabel:s,children:n,className:r,overlayClassName:o,animated:a,animation:i,shouldFocusAfterRender:l=!0,...c}=e;let d=0;return a?d=300:i?.closeTimeoutMs&&(d=i.closeTimeoutMs),(0,O.jsx)(te(),{className:{base:Q()("GenericModal","encore-dark-theme","encore-layout-themes",{"GenericModal--animated":a},[i?.modal?.base,r]),afterOpen:Q()("",{"GenericModal--afterOpen":a},[i?.modal?.afterOpen]),beforeClose:Q()("",{"GenericModal--beforeClose":a},[i?.modal?.beforeClose])},overlayClassName:{base:Q()("GenericModal__overlay",{"GenericModal__overlay--animated":a},[i?.overlay?.base,o]),afterOpen:Q()("",{"GenericModal__overlay--afterOpen":a},[i?.overlay?.afterOpen]),beforeClose:Q()("",{"GenericModal__overlay--beforeClose":a},[i?.overlay?.beforeClose])},bodyOpenClassName:"GenericModal__Body--open",isOpen:t,...d?{closeTimeoutMS:d}:{},shouldFocusAfterRender:l,preventScroll:!0,ariaHideApp:!1,contentLabel:s,...c,children:n})},ne=({isSigningUp:e,closeModal:t,retryOpeningBrowser:s,errorMessage:n,isOpen:r=!0})=>(0,O.jsx)(se,{className:V,isOpen:r,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:q,onRequestClose:t,"aria-label":e?_.get("desktop-auth.login.redirect-to-browser-signup"):_.get("desktop-auth.login.redirect-to-browser-login"),children:(0,O.jsxs)("div",{className:J,children:[(0,O.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,O.jsx)(I.D,{variant:"alto",semanticColor:"textBase",children:e?_.get("desktop-auth.login.redirect-to-browser-signup"):_.get("desktop-auth.login.redirect-to-browser-login")}),n&&(0,O.jsxs)("div",{className:Z,role:"alert","aria-live":"assertive",children:[(0,O.jsx)(K.l,{className:$}),(0,O.jsx)("span",{dangerouslySetInnerHTML:{__html:n}})]}),(0,O.jsxs)("button",{className:X,onClick:s,children:[!n&&(0,O.jsx)(I.D,{variant:"ballad",semanticColor:"textSubdued",children:_.get("desktop-auth.login.not-seeing-browser")}),(0,O.jsx)(I.D,{variant:"balladBold",semanticColor:"textBase",children:_.get("desktop-auth.login.try-again")})]})]})});var re=s(5530),oe=s.n(re);const ae="https://www.spotify.com/redirect/account-page/",ie="showSettings",le={id:"UnknownLoginErrorMessage"},ce={id:"DefaultErrorMessage",replace:[ie]},de={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[ie]},400:le,401:le,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:le,405:le,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[ae]},408:{id:"RegionMismatchMessage",replace:[ae,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:le,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:le,415:le,416:le,417:{id:"FacebookCredentialsMisusedMessage"},418:le,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},ue={1:le,2:le,3:{id:"BadCredentialsMessage"},4:le,5:le,6:le,7:le,8:le,9:le},ge={1:{silent:!0},2:le,3:le,4:{id:"SessionExpiredMessage"},5:ce};const he=(0,i.createContext)(null),pe=()=>{const e=(0,i.useContext)(he);if(!e)throw new Error("useDesktopLoginLogger must be used within a DesktopLoginLoggerContext");return e};var me=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(me||{});const fe=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!1),[o,a]=(0,i.useState)(""),l=(0,i.useRef)(0),c=pe();return{handleLoginOrSignupClick:async e=>{const n=++l.current,o=oe().create().toString();r(e),a(""),t(!0),c.logAction({page:"auth-on-web",action_type:"click",action_intent:e?"sign-up-with-browser":"log-in-with-browser",action_hash:o});try{await(i={name:"login-accounts",args:[{method:"login-accounts",enableSignup:e,actionHash:o}]},s.g&&"function"==typeof s.g._getSpotifyModule?new Promise(((e,t)=>{s.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(i),{onSuccess:e,onFailure:t})})):null),c.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-success-signup":"show-success-login"},{flush:!1}),await c.finalFlush(),location.href="spotify:app:xpui"}catch(s){const r="string"==typeof s?JSON.parse(s):s;if(n!==l.current)return void c.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:r?.errorReference});t(!1);let o=function(e,t,s){if(0===t)return!1;if(!e&&!t)return!1;let n=de;switch(e){case"session":n=ue;break;case"desktop_login_accounts":n=ge}const r=n[t]||ce;if(r.silent)return!1;const o=r.replace||[];let a="";switch(r.id){case"UnknownLoginErrorMessage":a=_.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":a=_.get("desktop.login.DefaultErrorMessage",o[0]);break;case"SessionTerminatedMessage":a=_.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":a=_.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":a=_.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":a=_.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":a=_.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":a=_.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":a=_.get("desktop.login.ErrorProxyAuthRequired",o[0]);break;case"CriticalUpdate":a=_.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":a=_.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":a=_.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":a=_.get("desktop.login.MissingUserInfoMessage",o[0]);break;case"RegionMismatchMessage":a=_.get("desktop.login.RegionMismatchMessage",o[0],o[1]);break;case"PremiumUsersOnlyMessage":a=_.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":a=_.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":a=_.get("desktop.login.ClientUpdateFail",o[0]);break;case"FbUserNotFoundSignUp":a=_.get("desktop.login.FbUserNotFoundSignUp",o[0])}return s?`${a}<br>${_.get("desktop.login.errorCode",s)}`:a}(r.errorCategory,r.errorCode,r.errorReference);"desktop_login_accounts"===r.errorCategory&&r.errorCode===me.OPERATION_TIMED_OUT&&(o=e?_.get("desktop-auth.login.signup-time-out"):_.get("desktop-auth.login.login-time-out")),a(o||""),c.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-error-signup":"show-error-login",item_id:r?.errorReference})}var i},handleTryAgainClick:()=>{t(!1),c.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},isWaitingForBrowser:e,isSigningUp:n,errorMessage:o}},xe=({titleStrings:e,titleVariants:t,widthBreakpoint:s,heightBreakpoint:n})=>{const[r,o]=(0,i.useState)(!1),{handleLoginOrSignupClick:a,isSigningUp:d,errorMessage:u}=fe(),g=()=>{let e=t[s??T.MEDIUM];return s===T.LARGE&&n===T.SMALL?e=t[T.MEDIUM]:s===T.MEDIUM&&n===T.LARGE?e=t[n]:s!==T.SMALL||n!==T.MEDIUM&&n!==T.LARGE||(e=t[n]),e};return(0,O.jsxs)(O.Fragment,{children:[r&&(0,O.jsx)(ne,{isSigningUp:d,closeModal:()=>o(!1),retryOpeningBrowser:()=>{a(!0)},errorMessage:u}),(0,O.jsxs)("div",{className:z,children:[(0,O.jsx)("div",{className:H,children:e.map(((e,t)=>(0,O.jsx)(I.D,{variant:g(),semanticColor:"textBase",children:e},`title-${t}`)))}),(0,O.jsxs)("div",{className:G,children:[(0,O.jsx)(l.D,{onClick:()=>{a(!0)},iconTrailing:c.T,"data-testid":"signup-button",children:_.get("desktop-auth.login.sign-up-with-browser")}),(0,O.jsx)(L.P,{onClick:()=>{a(!1)},iconTrailing:c.T,children:_.get("desktop-auth.login.log-in-with-browser")})]})]})]})},we="pGPnNDcYgyNwnreAcAjH",ye="SH3eUKfHc4CgBmWIBRrv",be="Tcw5QBhdNr3DQLv4tFI6",_e="Z0UVjrWuri5SAyaPIcXN",ve="AW58_lCPMJQuX4DRlFnb",ke="Dd2IOSyZz6e01mIY_yfr";var Se=s(6259),Ee=s(5344);const Ne=({nrSteps:e,atStep:t,navigate:s,backgroundImage:n})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:we,children:[(0,O.jsxs)("div",{className:ye,children:[(0,O.jsx)(l.D,{colorSet:"invertedDark",size:"medium",iconOnly:Se.e,onClick:()=>s((t-1+e)%e),"aria-label":"previous page"}),(0,O.jsx)(l.D,{colorSet:"invertedDark",size:"medium",iconOnly:Ee.V,onClick:()=>s((t+1)%e),"aria-label":"next page"})]}),(0,O.jsx)("div",{className:_e,children:Array.from({length:e}).map(((e,n)=>(0,O.jsx)("button",{className:be,onClick:()=>s(n),children:(0,O.jsx)("div",{className:Q()(ve,{[ke]:t===n}),"aria-label":`navigate to page ${n+1}`})},n)))})]}),n]}),Oe="ziwA70F7A7bE1f_6JfC6",Ce="OspetDqlUGDfoHpTMfNO",je="GFbAscggSBjAyjtM_3jg",Ae="pi2IJ4liRapxpGdxMJu5",Re=({imageLocale:e,fadeInRef:t})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("img",{className:Q()(Oe,{[Ce]:t.current}),src:`images/localised-carousel-image/login-1-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,O.jsx)("div",{className:Ae}),(0,O.jsx)("div",{className:je})]}),Me=({imageLocale:e,fadeInRef:t})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("img",{className:Q()(Oe,{[Ce]:t.current}),src:`images/localised-carousel-image/login-2-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,O.jsx)("div",{className:Ae}),(0,O.jsx)("div",{className:je})]}),Ie="t71Gs8ndLnfWLdcqPzTw",Le="eSEJ1rqeTzD_6sklBWTI",Te="XGEPBM1JHuPOpeuZsIwA",Fe="Kj3InjxX0eAmTViGluAm",Pe="_SsAtuLKRe2TvyQ7V_iu",De="IONRZYfY863Fg8_TZZwW",Ue="mzc8KoGBYnUXfOViDxlH",Be=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],We=({imgSrc:e,reverse:t})=>{const[s,n]=(0,i.useState)(!1),[r,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),c=s&&r&&a;return(0,O.jsxs)("div",{className:Q()(Le,{[Te]:c&&!t,[Fe]:c&&t}),children:[(0,O.jsx)("img",{src:e,className:De,onLoad:()=>{n(!0)},alt:""}),(0,O.jsx)("img",{src:e,className:De,onLoad:()=>{o(!0)},alt:""}),(0,O.jsx)("img",{src:e,className:De,onLoad:()=>{l(!0)},alt:""})]})},ze=({fadeInRef:e})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:Q()(Ie,{[Pe]:e.current}),onAnimationEnd:()=>{e.current=!1},children:[...Array(6).keys()].concat([...Array(6).keys()]).concat([...Array(6).keys()]).map(((e,t)=>(0,O.jsx)(We,{imgSrc:`images/artwork-grid/row-${e+1}.avif`,reverse:t%2==0},`image-row-${t}`)))}),(0,O.jsx)("div",{className:Ue})]}),Ge=2,He=3,Ke=4,Ve={"auto-detect":{label:()=>_.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>_.get("desktop.settings.proxy.noproxy")},http:{label:()=>_.get("desktop.settings.proxy.http")},socks4:{label:()=>_.get("desktop.settings.proxy.socks4")},socks5:{label:()=>_.get("desktop.settings.proxy.socks5")}},Je=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var qe=s(3053);const Xe="mpdBa62OP4Fr5wvCsa89",Ze="acVhMt5pELcXQyLaaPuV",$e="AavUTirpKSAHapguSAy0",Ye="SkbGMKYv49KtJNB5XxdX",Qe="qfjicQPaTTPrLWJWRxMQ",et=({id:e,type:t,placeHolder:s,inputRef:n,handleOnChange:r})=>(0,O.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:Ye,placeholder:s,ref:n,onChange:r}),tt=({children:e,label:t})=>(0,O.jsx)(qe.c,{label:t,className:Qe,children:e});var st=s(9496),nt=s.n(st);function rt(){return"Safari"===nt().parse(window.navigator.userAgent).browser.name}const ot="zrvvPyoxE6wQNqnu0yWA",at="jmu6DFPvhxRl0wSfmv2O",it=({value:e,id:t,children:s,disabled:n,onSelect:r,className:o,dir:a})=>(0,O.jsx)("span",{className:o,children:(0,O.jsx)("select",{className:Q()(ot,{[at]:rt()}),value:e?.toString(),id:t,disabled:n,onBlur:()=>{},onChange:e=>{r(e.target.value)},dir:a,children:s})}),lt=(0,i.createContext)(void 0),ct=({children:e})=>{const[t,s]=(0,i.useState)(!1),[n,r]=(0,i.useState)(new Set),o=(0,i.useCallback)(((e,t)=>{r((s=>{if(s.has(e)===t)return s;const n=new Set(s);return t?n.add(e):n.delete(e),n}))}),[]),a=n.size>0;return(0,O.jsx)(lt.Provider,{value:{sectionMatch:t,setSectionMatch:s,sectionContainsMatch:a,setSectionFilterMatchQueryValue:o},children:e})},dt=()=>{const e=(0,i.useContext)(lt);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e};(0,s(5329).Ue)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,s)=>{e({lastFilterState:t,lastFilteredUri:s})}})));const ut=(0,i.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""});s(451);const gt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),ht=/\p{White_Space}/u,pt=/\p{P}/u,mt=/\p{sc=Han}/u;function ft(e){return null!==e&&ht.test(e)}function xt(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||ft(e))}function wt(e){return null!==e&&pt.test(e)}function yt(e){return null!==e&&mt.test(e)}class bt{constructor(e,t,s){if(t<0||s<0||t+s>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=s,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new bt(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const s=this.offset+e,n=t-e;return new bt(this.data,s,n)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function _t(e){let t;do{t=e.nextCodePoint()}while(null!==t&&ft(t)||wt(t));return t}function vt(e,t){let s=_t(e),n=_t(t);if(null===n)return{offset:0,length:0};const r=e.offset+e.position-1;let o=e.offset+e.position;for(;;){if(null===s&&null===n)return{offset:r,length:o-r};if(null===n)return{offset:r,length:o-r};if(null===s)return null;if(0!==gt.compare(s,n))return null;o=e.offset+e.position,s=_t(e),n=_t(t)}}function kt(e,t){let s,n,r;do{n=e.position,s=e.nextCodePoint()}while(null!==s&&ft(s));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(s)){const t=s;n=e.position;do{r=e.position,s=e.nextCodePoint()}while(null!==s&&s!==t);return null===s&&n===r?null:e.slice(n,r)}do{if(r=e.position,t?.segmentCJKUnifieIdeographs&&yt(s))break;s=e.nextCodePoint()}while(null!==s&&!xt(s));return null===s&&n===r?null:e.slice(n,r)}function St(e){return kt(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Et(e){return kt(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Nt(e,t){const s=[];for(let n=Et(e);null!==n;n=Et(e)){let r=vt(n,t.slice());null===r?(r=vt(e.slice(n.offset),t.slice()),null===r||s.push(r)):s.push(r)}return s}function Ot(e,t){return e.offset===t.offset&&e.length===t.length}const Ct=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const s=bt.from(e),n=[];for(let e=St(s);null!==e;e=St(s)){const s=[];for(let n=0;n<t.length;++n){const r=t[n],o=Nt(bt.from(r),e);for(const e of o)s.push({text:r,range:e})}if(0===s.length)return null;n.push(...s.filter(((e,t,s)=>e.range.length>0&&s.findIndex((t=>Ot(e.range,t.range)))===t)))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e,jt={section:"c6TyNYOUJRIsjYZJZofy",hidden:"V4Bh2Ch7KvYUdn2s9ZdX"};function At({children:e,filterMatchQuery:t}){const{filter:s}=(0,i.useContext)(ut),{setSectionMatch:n,sectionContainsMatch:r}=dt(),o=Ct(s,t);(0,i.useEffect)((()=>{n(o)}),[o,n]);const a=!o&&!r;return(0,O.jsx)("div",{className:Q()(jt.section,{[jt.hidden]:a}),children:e})}function Rt(e){return(0,O.jsx)(ct,{children:(0,O.jsx)(At,{...e})})}var Mt=s(8798),It=(s(6321),s(9658)),Lt=s.n(It);const Tt={highlightedText:"M0E2Al6URHV3iyoDbvi_"};function Ft({searchWords:e,textToHighlight:t,...s}){return 0===e.length||e.every((e=>!e))?(0,O.jsx)(O.Fragment,{children:t}):(0,O.jsx)(Lt(),{highlightClassName:Tt.highlightedText,searchWords:e,textToHighlight:t,autoEscape:!0,...s})}function Pt({children:e,className:t,semanticColor:s="textBase"}){const{filter:n}=(0,i.useContext)(ut);return(0,O.jsx)(Mt.x,{as:"h2",variant:"bodyMediumBold",semanticColor:s,className:t,children:(0,O.jsx)(Ft,{searchWords:[n],textToHighlight:e})})}const Dt="gvcgOXnAiNKEe_z92_lw";function Ut({onClick:e}){return(0,O.jsx)(L.P,{className:Dt,onClick:e,children:_.get("settings.restartApp")})}const Bt=(e,t,s)=>{let n=`${e}:${t}`;switch(s){case Ge:n+="@http";break;case He:n+="@socks4";break;case Ke:n+="@socks5"}return n},Wt=({addr:e,mode:t="0",pass:s,user:n,setValue:r,restartContainer:o,fullWidth:a})=>{const l=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),g=Number(t),[h,p]=(0,i.useState)(""),[m,f]=(0,i.useState)(""),[x,w]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const[t,s]=e?.split(/[:@]+/)||["",""];p(t),f(s),l.current&&(l.current.value=t),c.current&&(c.current.value=s)}),[e]),(0,i.useEffect)((()=>{u.current&&s&&(u.current.value=s.toString())}),[s]),(0,i.useEffect)((()=>{d.current&&n&&(d.current.value=n.toString())}),[n]);const y=(0,i.useCallback)((({target:e})=>{const t=Bt(e.value,m,g);p(e.value),r("network.proxy.addr",t),w(!0)}),[g,m,r]),b=(0,i.useCallback)((({target:e})=>{const t=Bt(h,e.value,g);f(e.value),r("network.proxy.addr",t),w(!0)}),[g,h,r]),v=(0,i.useCallback)((({target:e})=>{r("network.proxy.user",e.value),w(!0)}),[r]),k=(0,i.useCallback)((({target:e})=>{r("network.proxy.pass",e.value),w(!0)}),[r]),S=0!==g&&1!==g,E=g!==He;return(0,O.jsxs)(Rt,{filterMatchQuery:_.get("desktop.settings.proxy.title"),children:[(0,O.jsx)(Pt,{children:_.get("desktop.settings.proxy.title")}),(0,O.jsxs)("div",{className:Q()(Ze,a?$e:null),children:[(0,O.jsx)(tt,{label:_.get("desktop.settings.proxy.type"),children:(0,O.jsx)(it,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);r("network.proxy.mode",t),w(!0)},children:Je.map((({enumKey:e,enumValue:t})=>(0,O.jsx)("option",{value:t,"data-testid":e,children:Ve[e]?Ve[e].label():""},e)))})}),S?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:Xe,children:[(0,O.jsx)(tt,{label:_.get("desktop.settings.proxy.host"),children:(0,O.jsx)(et,{id:"network.proxy.host",handleOnChange:y,placeHolder:_.get("desktop.settings.proxy.host"),inputRef:l})}),(0,O.jsx)(tt,{label:_.get("desktop.settings.proxy.port"),children:(0,O.jsx)(et,{id:"network.proxy.port",type:"number",handleOnChange:b,placeHolder:_.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,O.jsxs)("div",{className:E?Xe:void 0,children:[(0,O.jsx)(tt,{label:_.get("desktop.settings.proxy.user"),children:(0,O.jsx)(et,{id:"network.proxy.user",handleOnChange:v,placeHolder:_.get("desktop.settings.proxy.user"),inputRef:d})}),E?(0,O.jsx)(tt,{label:_.get("desktop.settings.proxy.pass"),children:(0,O.jsx)(et,{id:"network.proxy.pass",handleOnChange:k,placeHolder:_.get("desktop.settings.proxy.pass"),type:"password",inputRef:u})}):null]})]}):null,x&&(0,O.jsx)("div",{children:(0,O.jsx)(Ut,{onClick:o})})]})]})},zt="sp://proxy/v1/";function Gt(){const[e,t]=(0,i.useState)(null);(0,i.useEffect)((()=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:zt}),persistent:!1,onSuccess:s=>{const n=JSON.parse(s);200!==n.status&&t(new Error(`Failed to fetch proxy settings (status code: ${n.status})`));const r=JSON.parse(n.body);e({mode:r["network.proxy.mode"],address:r["network.proxy.addr"],username:r["network.proxy.user"],password:r["network.proxy.pass"]})},onFailure:(e,s)=>{t(e)}})}))})().then(t)}),[t]);return{settings:e,updateSettings:(0,i.useCallback)((e=>{(async function(e){return new Promise(((t,s)=>{const n={"network.proxy.mode":e.mode};[Ge,He,Ke].includes(e.mode)&&(n["network.proxy.addr"]=e.address,n["network.proxy.user"]=e.username),[Ge,Ke].includes(e.mode)&&(n["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:zt,body:JSON.stringify(n)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{s(e)}})}))})(e).then((()=>t({...e})))}),[t])}}function Ht(){return(0,i.useCallback)((()=>async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,s)=>{t(e)}})}))}()),[])}const Kt="BuzoTjBZd1UqCn6DmFJr",Vt="HKamyJi9H31s99erfVyG",Jt=()=>(0,O.jsxs)("div",{className:Vt,children:[(0,O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,O.jsx)("circle",{className:Kt,cx:"-140",cy:"50",r:"32"}),(0,O.jsx)("circle",{className:Kt,cx:"0",cy:"50",r:"32"}),(0,O.jsx)("circle",{className:Kt,cx:"140",cy:"50",r:"32"})]}),(0,O.jsx)("span",{className:"hidden-visually",children:_.get("page.loading")})]}),qt=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const Xt=()=>{const{settings:e,updateSettings:t}=Gt(),s=Ht(),n=(0,i.useCallback)(((s,n)=>{if(null!==e&&function(e){return!!qt.includes(e)}(s)){const r=e;switch(s){case"network.proxy.mode":r.mode=n;break;case"network.proxy.addr":r.address=n;break;case"network.proxy.user":r.username=n;break;case"network.proxy.pass":r.password=n}t(r)}return Promise.resolve()}),[e,t]);return(0,O.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,O.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:_.get("desktop.login.PreferencesLink")}),null!==e?(0,O.jsx)(Wt,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:n,restartContainer:s,fullWidth:!0}):(0,O.jsx)(Jt,{})]})};var Zt=s(4412);const $t=({toggleSettings:e,isOpen:t=!0})=>(0,O.jsx)(se,{className:V,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:q,onRequestClose:e,"aria-label":_.get("desktop.login.PreferencesLink"),children:(0,O.jsxs)("div",{className:J,children:[(0,O.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,O.jsx)(Xt,{}),(0,O.jsx)(Zt.o,{size:"medium",semanticColor:"textBase",onClick:e,children:_.get("close")})]})}),Yt=()=>{const e=pe();(0,i.useEffect)((()=>{e.logPageView({page:"auth-on-web"})}),[e]);const t=(0,i.useRef)(!0),s=(0,i.useRef)(!0),n=(0,i.useRef)(!0),r=(0,i.useRef)(null),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(0),{breakpoint:d}=W({[T.SMALL]:0,[T.MEDIUM]:1024,[T.LARGE]:1600},"width",r);const{breakpoint:u}=function(e,t){return W(e,"height",t)}({[T.SMALL]:0,[T.MEDIUM]:800,[T.LARGE]:1200},r),g=(0,i.useCallback)((()=>{a(!o)}),[o]),h=Be.includes(_.getLocaleForTranslation().valueOf())?_.getLocaleForTranslation().valueOf():"en",p=[{backgroundImage:(0,O.jsx)(ze,{fadeInRef:t}),titleStrings:[_.get("desktop-auth.login.millions-of-songs"),_.get("desktop-auth.login.free-on-spotify")],titleVariants:{[T.SMALL]:"brio",[T.MEDIUM]:"forte",[T.LARGE]:"bass"}},{backgroundImage:(0,O.jsx)(Re,{imageLocale:h,fadeInRef:s}),titleStrings:[_.get("desktop-auth.login.collect-and-create")],titleVariants:{[T.SMALL]:"alto",[T.MEDIUM]:"brio",[T.LARGE]:"forte"}},{backgroundImage:(0,O.jsx)(Me,{imageLocale:h,fadeInRef:n}),titleStrings:[_.get("desktop-auth.login.perfect-work-environment")],titleVariants:{[T.SMALL]:"alto",[T.MEDIUM]:"brio",[T.LARGE]:"forte"}}];return(0,O.jsx)(M.u,{children:(0,O.jsx)("div",{className:j,ref:r,"data-testid":"new-login",children:(0,O.jsxs)("main",{className:A,children:[(0,O.jsxs)("div",{className:R,children:[(0,O.jsx)(C,{toggleSettings:g}),(0,O.jsx)(xe,{titleStrings:p[l].titleStrings,titleVariants:p[l].titleVariants,widthBreakpoint:d,heightBreakpoint:u})]}),(0,O.jsx)(Ne,{nrSteps:p.length,atStep:l,navigate:c,backgroundImage:p[l].backgroundImage}),o&&(0,O.jsx)($t,{toggleSettings:g})]})})})},Qt="H5vfurs7KNEs9Io5DUA7",es="qfBRU_bttJde7gy46oAB",ts="ypTrzM1PtlrZp04qs6Eq",ss="oHZmDpK0SrWDaXhPjUtC",ns="lAHowB9HYfAUrg9UaSde",rs=function({showSettings:e}){const{handleLoginOrSignupClick:t,handleTryAgainClick:s,isWaitingForBrowser:n,isSigningUp:r,errorMessage:o}=fe(),a=pe();(0,i.useEffect)((()=>{a.logPageView({page:"auth-on-web"})}),[a]);return(0,O.jsx)("main",{"data-testid":"login",children:n?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(I.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:Qt,children:r?_.get("desktop-auth.login.go-to-browser-signup"):_.get("desktop-auth.login.go-to-browser-login")}),(0,O.jsxs)("button",{className:ts,onClick:s,children:[(0,O.jsx)(I.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:_.get("desktop-auth.login.not-seeing-browser")})," ",(0,O.jsx)(I.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:_.get("desktop-auth.login.try-again")})]})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(I.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:Qt,children:[_.get("desktop-auth.login.millions-of-songs"),(0,O.jsx)("br",{}),_.get("desktop-auth.login.free-on-spotify")]}),o&&(0,O.jsxs)("div",{className:ss,role:"alert",onClick:t=>{if(t.currentTarget.getAttribute("data-action")){"showSettings"===t.currentTarget.getAttribute("data-action")&&e()}},"aria-live":"assertive",children:[(0,O.jsx)(K.l,{className:ns}),(0,O.jsx)("span",{dangerouslySetInnerHTML:{__html:o}})]}),(0,O.jsx)(l.D,{onClick:()=>{t(!1)},iconTrailing:c.T,"data-testid":"login-button",children:_.get("desktop-auth.login.log-in-with-browser")}),(0,O.jsxs)("button",{className:es,onClick:()=>{t(!0)},children:[(0,O.jsx)(I.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:_.get("desktop-auth.login.new-to-spotify")}),(0,O.jsx)(I.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:_.get("desktop-auth.login.sign-up-with-browser")}),(0,O.jsx)(c.T,{iconSize:16,semanticColor:"textBase"})]})]})})},os=({mode:e,showLogin:t,showSettings:s})=>{const n=pe();return(0,O.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===e?(0,O.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{n.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),t()},"data-ta-id":"login-footer-settings-back-to-login",children:_.get("desktop.login.Back")}):(0,O.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{n.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),s()},"data-ta-id":"login-footer-settings",children:_.get("desktop.login.PreferencesLink")})})},as=()=>(0,O.jsxs)("header",{className:"Header",children:[(0,O.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,O.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]});var is=s(4596),ls=s(5093);const cs=({initialMode:e="login"})=>{const[t,s]=(0,i.useState)(e),n=function(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}(t),r=pe();(0,i.useEffect)((()=>{!async function(){new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:'{"type":"view_loaded", "name":"/loginUI"}'}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,s)=>{t(e)}})}))}()}),[]),(0,i.useEffect)((()=>{"login"===t?r.logPageView({page:"login"}):"settings"===t&&r.logPageView({page:"login/settings"})}),[t,r]);const o=n?`__${t} __${n}-to-${t}`:"",a=()=>s("settings");return(0,O.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":t,children:[(0,O.jsxs)("div",{className:"fakeWebPlayer",children:[(0,O.jsx)("aside",{}),(0,O.jsxs)("footer",{children:[(0,O.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,O.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,O.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,O.jsx)("main",{children:(0,O.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,O.jsx)("div",{className:`App__content ${o}`,children:(0,O.jsx)(ls.Z,{mode:"in-out",children:(0,O.jsx)(is.Z,{timeout:{appear:0,enter:0,exit:650},children:(0,O.jsxs)("div",{className:`App__modal ${o}`,children:[(0,O.jsx)(as,{}),"settings"===t?(0,O.jsx)(Xt,{}):(0,O.jsx)(rs,{showSettings:a}),(0,O.jsx)(os,{mode:t,showLogin:()=>s("login"),showSettings:a})]})},o)})})]},"main1")},ds=({initialMode:e})=>{const t=(0,r.W6)(a);return(0,O.jsx)(O.Fragment,{children:t?(0,O.jsx)(Yt,{}):(0,O.jsx)(cs,{initialMode:e})})};var us=s(3512);var gs=s(2015);const hs=(e,t)=>{const s=e.event_sender_context_information;return[(0,gs.UY)({version_code:s.client_version_int,version_string:s.client_version_string}),(0,gs.jx)(t),(0,gs.IE)(s.installation_id),(0,gs.CF)({device_id:s.device_id,device_manufacturer:s.device_manufacturer,device_model:s.device_model,os_version:s.os_version,platform_type:s.platform_type})]};var ps=s(7880);let ms=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),fs=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const xs={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function ws(e,t){var s;s=Object.values(xs),document.documentElement.classList.remove(...s);const n=[];"Microsoft Edge"===nt().parse(window.navigator.userAgent).browser.name?n.push(xs.BROWSER_EDGE):rt()&&n.push(xs.BROWSER_SAFARI),t===fs.macOS?n.push(xs.OS_MACOS):t===fs.Windows?n.push(xs.OS_WINDOWS):t===fs.Linux?n.push(xs.OS_LINUX):t===fs.ChromeOS&&n.push(xs.OS_CHROMEOS),e===ms.Desktop?n.push(xs.CONTAINER_DESKTOP):e===ms.PWA?n.push(xs.CONTAINER_PWA):e===ms.Web&&n.push(xs.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(n)}var ys=s(3854),bs=s(3288);const _s=/Spotify\/(?<version>.+)\s/;function vs(){if(!!window.navigator.userAgent.match(_s))return ms.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,s="Windows"in window;return e&&(t||s)?ms.PWA:ms.Web}const ks=/Spotify\/(?<version>.+)\s/;function Ss(){const e=window.navigator.userAgent.match(ks);return e?.groups?.version||"unknown"}var Es=s(3610);const Ns=oe().create().toString(),Os="has-used-app";function Cs(){const e=!window.localStorage.getItem(Os);return e&&window.localStorage.setItem(Os,"true"),e}const js=window.localStorage,As=()=>{const e=js.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Rs{constructor(e){this._eventSender=e}logPageView({page:e}){this.logAction({page:e,action_type:"pageview",action_intent:""})}logAction({page:e,action_type:t,action_intent:s,item_id:n,action_hash:r},o){this._eventSender.send((0,Es.e)({action_type:t,action_intent:s,action_page:e,action_item_id:n,action_hash:r,device_is_new_install:Cs(),device_locale:window.__spotify.locale,device_referrer:As(),ab_flags:"",session_id:Ns}),o)}async finalFlush(){await this._eventSender.finalFlush()}}(0,ps.hb)(),async function(){for(const e of[window.__spotify.locale,x.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return void _.initialize({localeForTranslation:e,localeForFormatting:navigator.language,translations:t})}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){ws(vs(),function(){const e=nt().parse(window.navigator.userAgent).os.name;return"macOS"===e?fs.macOS:"Windows"===e?fs.Windows:"Linux"===e?fs.Linux:"Chrome OS"===e?fs.ChromeOS:fs.Other}());const e=function(){const e=(0,us.qy)({providers:{endpoints:(0,us.uG)(),token:()=>Promise.reject()}});return e.connect(),e}(),t="65b708073fc0480ea92a077233ca87bd",s=((e,t,s,n,r,o)=>(0,gs.mi)({transport:t,suppressPersist:!1,context:hs(e,s),storagePrefix:r,ownerProvider:n,useOptimizedESS2NA:o}))(window.__spotify,e,t,(()=>null),`${t}-loginui`,!1),o=new Rs(s),a=window.__spotify&&window.__spotify.locale;a&&document.documentElement.setAttribute("lang",a);const l=ys.L.addMiddleware(bs._);(0,n.s)(document.getElementById("main")).render((0,O.jsx)(r.nD,{resolver:l,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:e,eventSender:s,version:Ss(),installationId:window.__spotify.event_sender_context_information?.installation_id},children:(0,O.jsx)(he.Provider,{value:o,children:(0,O.jsx)(i.Suspense,{fallback:null,children:(0,O.jsx)(ds,{})})})})),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,ps.wm)("UI init phase is done for login")}))},4555:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var o=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,e=[],n.O=(t,s,r,o)=>{if(!s){var a=1/0;for(d=0;d<e.length;d++){for(var[s,r,o]=e[d],i=!0,l=0;l<s.length;l++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={535:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,o,[a,i,l]=s,c=0;if(a.some((t=>0!==e[t]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var d=l(n)}for(t&&t(s);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},s=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0;var r=n.O(void 0,[569],(()=>n(1960)));r=n.O(r)})();
//# sourceMappingURL=login.js.map